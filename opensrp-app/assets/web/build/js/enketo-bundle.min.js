require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"./xpath-evaluator-binding":[function(a,b,c){tthEvaluator=a("extended-xpath");var d=a("openrosa-xpath-extensions");b.exports=function(){var a=new XPathEvaluator;this.xml.jsCreateExpression=function(){return a.createExpression.apply(a,arguments)},this.xml.jsCreateNSResolver=function(){return a.createNSResolver.apply(a,arguments)},this.xml.jsEvaluate=function(a,b,c,e,f){var g,h;return h=new ExtendedXpathEvaluator(function(a){var d=b.ownerDocument;return d.evaluate(a,b,c,XPathResult.ANY_TYPE,f)},d),g=h.evaluate(a)},window.JsXPathException=window.JsXPathExpression=window.JsXPathNSResolver=window.JsXPathResult=window.JsXPathNamespace=!0}},{"extended-xpath":"extended-xpath","openrosa-xpath-extensions":"openrosa-xpath-extensions"}],1:[function(a,b,c){function d(){h=new l("form.or:eq(0)",{modelStr:j}),window.form=h,g=h.init(),g.length>0&&alert("loadErrors: "+g.join(", "))}function e(a){return decodeURI((new RegExp(a+"=(.+?)(&|$)").exec(location.search)||[null,null])[1])}var f=a("jquery");window.jQuery=f;var g,h,i,j,k=a("./src/js/support"),l=a("./src/js/Form"),m=a("./src/js/file-manager");"true"===e("touch")&&(k.touch=!0,f("html").addClass("touch")),"null"!==e("xform")?(f(".guidance").remove(),f.getJSON("http://xslt-dev.enketo.org/transform?xform="+e("xform"),function(a){i=a.form,j=a.model,f(".form-header").after(i),d()})):f("form.or").length>0&&(f(".guidance").remove(),j=globalModelStr,d()),f("#validate-form").on("click",function(){h.validate(),h.isValid()?(alert("Form is valid! (see XML record and media files in the console)"),console.log("record:",h.getDataStr()),console.log("media files:",m.getCurrentFiles())):alert("Form contains errors. Please see fields marked in red.")})},{"./src/js/Form":13,"./src/js/file-manager":19,"./src/js/support":21,jquery:9}],2:[function(a,b,c){!function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(a){return function(){return this[a].apply(this,arguments)}}function g(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function h(b){var c={};if(p[b]||(b=b.split("-")[0],p[b])){var d=p[b];return a.each(o,function(a,b){b in d&&(c[b]=d[b])}),c}}var i=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new i;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),j=function(b,c){this._process_options(c),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(q.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};j.prototype={constructor:j,_process_options:function(e){this._o=a.extend({},this._o,e);var f=this.o=a.extend({},this._o),g=f.language;switch(p[g]||(g=g.split("-")[0],p[g]||(g=n.language)),f.language=g,f.startView){case 2:case"decade":f.startView=2;break;case 1:case"year":f.startView=1;break;default:f.startView=0}switch(f.minViewMode){case 1:case"months":f.minViewMode=1;break;case 2:case"years":f.minViewMode=2;break;default:f.minViewMode=0}f.startView=Math.max(f.startView,f.minViewMode),f.multidate!==!0&&(f.multidate=Number(f.multidate)||!1,f.multidate!==!1&&(f.multidate=Math.max(0,f.multidate))),f.multidateSeparator=String(f.multidateSeparator),f.weekStart%=7,f.weekEnd=(f.weekStart+6)%7;var h=q.parseFormat(f.format);if(f.startDate!==-(1/0)&&(f.startDate?f.startDate instanceof Date?f.startDate=this._local_to_utc(this._zero_time(f.startDate)):f.startDate=q.parseDate(f.startDate,h,f.language):f.startDate=-(1/0)),f.endDate!==1/0&&(f.endDate?f.endDate instanceof Date?f.endDate=this._local_to_utc(this._zero_time(f.endDate)):f.endDate=q.parseDate(f.endDate,h,f.language):f.endDate=1/0),f.daysOfWeekDisabled=f.daysOfWeekDisabled||[],a.isArray(f.daysOfWeekDisabled)||(f.daysOfWeekDisabled=f.daysOfWeekDisabled.split(/[,\s]*/)),f.daysOfWeekDisabled=a.map(f.daysOfWeekDisabled,function(a){return parseInt(a,10)}),f.datesDisabled=f.datesDisabled||[],!a.isArray(f.datesDisabled)){var i=[];i.push(q.parseDate(f.datesDisabled,h,f.language)),f.datesDisabled=i}f.datesDisabled=a.map(f.datesDisabled,function(a){return q.parseDate(a,h,f.language)});var j=String(f.orientation).toLowerCase().split(/\s+/g),k=f.orientation.toLowerCase();if(j=a.grep(j,function(a){return/^auto|left|right|top|bottom$/.test(a)}),f.orientation={x:"auto",y:"auto"},k&&"auto"!==k)if(1===j.length)switch(j[0]){case"top":case"bottom":f.orientation.y=j[0];break;case"left":case"right":f.orientation.x=j[0]}else k=a.grep(j,function(a){return/^left|right$/.test(a)}),f.orientation.x=k[0]||"auto",k=a.grep(j,function(a){return/^top|bottom$/.test(a)}),f.orientation.y=k[0]||"auto";else;if(f.defaultViewDate){var l=f.defaultViewDate.year||(new Date).getFullYear(),m=f.defaultViewDate.month||0,o=f.defaultViewDate.day||1;f.defaultViewDate=c(l,m,o)}else f.defaultViewDate=d();f.showOnFocus=f.showOnFocus!==b?f.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(b.focus=a.proxy(this.show,this)),this.isInput?this._events=[[this.element,b]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),b],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return q.formatDate(c,b,this.o.language)},this)})},show:function(){return this.element.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return"undefined"!=typeof a?new Date(a):null},clearDates:function(){var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),setValue:function(){var a=this.getFormattedDate();return this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change(),this},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return q.formatDate(a,c,d)}).join(this.o.multidateSeparator)},setStartDate:function(a){return this._process_options({startDate:a}),this.update(),this.updateNavArrows(),this},setEndDate:function(a){return this._process_options({endDate:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(a){return this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(a){this._process_options({datesDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=a(this.o.container).width(),f=a(this.o.container).height(),g=a(this.o.container).scrollTop(),h=a(this.o.container).offset(),i=[];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+10,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-h.left,o=k.top-h.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=b-m)):k.left<0?(this.picker.addClass("datepicker-orient-left"),n-=k.left-d):n+b>e?(this.picker.addClass("datepicker-orient-right"),n=k.left+m-b):this.picker.addClass("datepicker-orient-left");var p,q,r=this.o.orientation.y;if("auto"===r&&(p=-g+o-c,q=g+f-(o+l+c),r=Math.max(p,q)===q?"top":"bottom"),this.picker.addClass("datepicker-orient-"+r),"top"===r?o+=l:o-=c+parseInt(this.picker.css("padding-top")),this.o.rtl){var s=e-(n+m);this.picker.css({top:o,right:s,zIndex:j})}else this.picker.css({top:o,left:n,zIndex:j});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;return arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return q.parseDate(a,this.o.format,this.o.language)},this)),c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(a,b){return parseInt(b)+1});var c='<th class="cw">&#160;</th>';b+=c}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+p[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+p[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<f?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>f)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===g.getFullYear()&&b.getUTCMonth()===g.getMonth()&&b.getUTCDate()===g.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.o.datesDisabled.length>0&&a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length>0&&c.push("disabled","disabled-date"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var d,e=new Date(this.viewDate),f=e.getUTCFullYear(),g=e.getUTCMonth(),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),j=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,k=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=p[this.o.language].today||p.en.today||"",m=p[this.o.language].clear||p.en.clear||"";if(!isNaN(f)&&!isNaN(g)){this.picker.find(".datepicker-days thead .datepicker-switch").text(p[this.o.language].months[g]+" "+f),this.picker.find("tfoot .today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(m).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=c(f,g-1,28),o=q.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(o),n.setUTCDate(o-(n.getUTCDay()-this.o.weekStart+7)%7);var r=new Date(n);r.setUTCDate(r.getUTCDate()+42),r=r.valueOf();for(var s,t=[];n.valueOf()<r;){if(n.getUTCDay()===this.o.weekStart&&(t.push("<tr>"),this.o.calendarWeeks)){var u=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),v=new Date(Number(u)+(11-u.getUTCDay())%7*864e5),w=new Date(Number(w=c(v.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),x=(v-w)/864e5/7+1;t.push('<td class="cw">'+x+"</td>")}if(s=this.getClassNames(n),s.push("day"),this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"==typeof y?y={enabled:y}:"string"==typeof y&&(y={classes:y}),y.enabled===!1&&s.push("disabled"),y.classes&&(s=s.concat(y.classes.split(/\s+/))),y.tooltip&&(d=y.tooltip)}s=a.unique(s),t.push('<td class="'+s.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+n.getUTCDate()+"</td>"),d=null,n.getUTCDay()===this.o.weekEnd&&t.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(t.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");if(a.each(this.dates,function(a,b){b.getUTCFullYear()===f&&z.eq(b.getUTCMonth()).addClass("active")}),(h>f||f>j)&&z.addClass("disabled"),f===h&&z.slice(0,i).addClass("disabled"),f===j&&z.slice(k+1).addClass("disabled"),this.o.beforeShowMonth!==a.noop){var A=this;a.each(z,function(b,c){if(!a(c).hasClass("disabled")){var d=new Date(f,b,1),e=A.o.beforeShowMonth(d);e===!1&&a(c).addClass("disabled")}})}t="",f=10*parseInt(f/10,10);var B=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var C,D=a.map(this.dates,function(a){return a.getUTCFullYear()}),E=-1;11>E;E++)C=["year"],-1===E?C.push("old"):10===E&&C.push("new"),-1!==a.inArray(f,D)&&C.push("active"),(h>f||f>j)&&C.push("disabled"),t+='<span class="'+C.join(" ")+'">'+f+"</span>",f+=1;B.html(t)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();var d,e,f,g=a(b.target).closest("span, td, th");if(1===g.length)switch(g[0].nodeName.toLowerCase()){case"th":switch(g[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=q.modes[this.viewMode].navStep*("prev"===g[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var i=new Date;i=c(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),this.showMode(-2);var j="linked"===this.o.todayBtn?null:"view";this._setDate(i,j);break;case"clear":this.clearDates()}break;case"span":g.hasClass("disabled")||(this.viewDate.setUTCDate(1),g.hasClass("month")?(f=1,e=g.parent().find("span").index(g),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(g.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":g.hasClass("day")&&!g.hasClass("disabled")&&(f=parseInt(g.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g.hasClass("old")?0===e?(e=11,d-=1):e-=1:g.hasClass("new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),-1!==b?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b):this.o.multidate===!1?(this.dates.clear(),this.dates.push(a)):this.dates.push(a),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),b&&"view"===b||this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d,e,f=new Date(a.valueOf()),g=f.getUTCDate(),h=f.getUTCMonth(),i=Math.abs(c);if(c=c>0?1:-1,1===i)e=-1===c?function(){return f.getUTCMonth()===h}:function(){return f.getUTCMonth()!==d},d=h+c,f.setUTCMonth(d),(0>d||d>11)&&(d=(d+12)%12);else{for(var j=0;i>j;j++)f=this.moveMonth(f,c);d=f.getUTCMonth(),f.setUTCDate(g),e=function(){return d!==f.getUTCMonth()}}for(;e();)f.setUTCDate(--g),f.setUTCMonth(d);return f},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(!this.picker.is(":visible"))return void(27===a.keyCode&&this.show());var b,c,e,f=!1,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+b),e=new Date(g),e.setUTCDate(g.getUTCDate()+b)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+7*b),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*b)),this.dateWithinRange(e)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(g),f=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),"function"==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(f){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.children("div").hide().filter(".datepicker-"+q.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var k=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,m.call(a(this.inputs),c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=e-1,g=e+1,h=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[f])for(;f>=0&&d<this.dates[f];)this.pickers[f--].setUTCDate(d);else if(d>this.dates[g])for(;h>g&&d>this.dates[g];)this.pickers[g++].setUTCDate(d);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var l=a.fn.datepicker,m=function(c){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var f=a(this),i=f.data("datepicker"),l="object"==typeof c&&c;if(!i){var m=g(this,"date"),o=a.extend({},n,m,l),p=h(o.language),q=a.extend({},n,p,m,l);if(f.hasClass("input-daterange")||q.inputs){var r={inputs:q.inputs||f.find("input").toArray()};f.data("datepicker",i=new k(this,a.extend(q,r)))}else f.data("datepicker",i=new j(this,q))}return"string"==typeof c&&"function"==typeof i[c]&&(e=i[c].apply(i,d),e!==b)?!1:void 0}),e!==b?e:this};a.fn.datepicker=m;var n=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},o=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=j;var p=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},q={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,q.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){function g(){var a=this.slice(0,m[k].length),b=m[k].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!d)return b;if(d instanceof Date)return d;"string"==typeof e&&(e=q.parseFormat(e));var h,i,k,l=/([\-+]\d+)([dmwy])/,m=d.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){for(d=new Date,k=0;k<m.length;k++)switch(h=l.exec(m[k]),i=parseInt(h[1]),h[2]){case"d":d.setUTCDate(d.getUTCDate()+i);break;case"m":d=j.prototype.moveMonth.call(j.prototype,d,i);break;case"w":d.setUTCDate(d.getUTCDate()+7*i);break;case"y":d=j.prototype.moveYear.call(j.prototype,d,i)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}m=d&&d.match(this.nonpunctuation)||[],d=new Date;var n,o,r={},s=["yyyy","yy","M","MM","m","mm","d","dd"],t={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};t.M=t.MM=t.mm=t.m,t.dd=t.d,d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var u=e.parts.slice();if(m.length!==u.length&&(u=a(u).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray()),m.length===u.length){var v;for(k=0,v=u.length;v>k;k++){if(n=parseInt(m[k],10),h=u[k],isNaN(n))switch(h){case"MM":o=a(p[f].months).filter(g),n=a.inArray(o[0],p[f].months)+1;break;case"M":o=a(p[f].monthsShort).filter(g),n=a.inArray(o[0],p[f].monthsShort)+1}r[h]=n}var w,x;for(k=0;k<s.length;k++)x=s[k],x in r&&!isNaN(r[x])&&(w=new Date(d),t[x](w,r[x]),isNaN(w)||(d=w))}return d},formatDate:function(b,c,d){if(!b)return"";"string"==typeof c&&(c=q.parseFormat(c));var e={d:b.getUTCDate(),D:p[d].daysShort[b.getUTCDay()],DD:p[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:p[d].monthsShort[b.getUTCMonth()],MM:p[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};q.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+q.headTemplate+"<tbody></tbody>"+q.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+q.headTemplate+q.contTemplate+q.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+q.headTemplate+q.contTemplate+q.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=q,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l,this},a.fn.datepicker.version="1.4.1",a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),m.call(c,"show"))}),a(function(){m.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery)},{}],3:[function(a,b,c){!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof c?a("jquery"):jQuery)}(function(a,b){function c(b,c){if(h[b]){var e=d(this),f=h[b].apply(e,c);return"undefined"==typeof f?a(this):f}throw new Error("method '"+b+"()' does not exist for slider.")}function d(b){var c=a(b).data("slider");if(c&&c instanceof g)return c;throw new Error(f.callingContextNotSliderInstance)}function e(b){var c=a(this);return c.each(function(){var c=a(this),d=c.data("slider"),e="object"==typeof b&&b;d&&!e&&(e={},a.each(a.fn.slider.defaults,function(a){e[a]=d[a]})),c.data("slider",new g(this,a.extend({},a.fn.slider.defaults,e)));
}),c}var f={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},g=function(c,d){var e=this.element=a(c).hide(),f=a(c)[0].style.width,g=!1,h=this.element.next(".widget");switch(h.hasClass("slider")===!0?(g=!0,this.widget=h):this.widget=a('<div class="widget"><div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div></div></div>').insertAfter(this.element),this.picker=this.widget.find(".slider"),this.id=this.element.data("slider-id")||d.id,this.id&&(this.widget[0].id=this.id),("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&(this.touchCapable=!0),g===!0&&(this.widget.removeClass("slider-horizontal"),this.widget.removeClass("slider-vertical")),this.orientation=this.element.data("slider-orientation")||d.orientation,this.orientation){case"vertical":this.widget.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight";break;default:this.widget.addClass("slider-horizontal").css("width",f),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"}var i=this;switch(a.each(["min","max","step","precision","value","reversed","handle"],function(a,b){"undefined"!=typeof e.data("slider-"+b)?i[b]=e.data("slider-"+b):"undefined"!=typeof d[b]?i[b]=d[b]:"undefined"!=typeof e.prop(b)?i[b]=e.prop(b):i[b]=0}),this.value instanceof Array?g&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]),this.selection=this.element.data("slider-selection")||d.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,g===!0&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide")),this.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=d.formater,this.setValue(this.value),this.handle1.on({keydown:a.proxy(this.keydown,this,0)}),this.handle2.on({keydown:a.proxy(this.keydown,this,1)}),this.touchCapable&&this.picker.on({touchstart:a.proxy(this.mousedown,this)}),this.picker.on({mousedown:a.proxy(this.mousedown,this)}),this.enabled=d.enabled&&(this.element.data("slider-enabled")===b||this.element.data("slider-enabled")===!0),this.enabled?this.enable():this.disable(),this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||d.natural_arrow_keys};g.prototype={constructor:g,over:!1,inDrag:!1,layout:function(){var a;a=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=a[0]+"%",this.handle2Stype[this.stylePos]=a[1]+"%","vertical"===this.orientation?(this.selectionElStyle.top=Math.min(a[0],a[1])+"%",this.selectionElStyle.height=Math.abs(a[0]-a[1])+"%"):(this.selectionElStyle.left=Math.min(a[0],a[1])+"%",this.selectionElStyle.width=Math.abs(a[0]-a[1])+"%")},mousedown:function(b){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===b.type&&(b=b.originalEvent),this.triggerFocusOnHandle(),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var c=this.getPercentage(b);if(this.range){var d=Math.abs(this.percentage[0]-c),e=Math.abs(this.percentage[1]-c);this.dragged=e>d?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-c:c,this.layout(),this.touchCapable&&a(document).on({touchmove:a.proxy(this.mousemove,this),touchend:a.proxy(this.mouseup,this)}),a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}),this.inDrag=!0;var f=this.calculateValue();return this.element.trigger({type:"slideStart",value:f}).data("value",f).prop("value",f),this.setValue(f),!0},triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},keydown:function(a,b){if(!this.isEnabled())return!1;var c;switch(b.which){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){this.natural_arrow_keys&&("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed)&&(c=-1*c);var d=c*this.percentage[2],e=this.percentage[a]+d;e>100?e=100:0>e&&(e=0),this.dragged=a,this.adjustPercentageForRangeSliders(e),this.percentage[this.dragged]=e,this.layout();var f=this.calculateValue();return this.element.trigger({type:"slideStart",value:f}).data("value",f).prop("value",f),this.setValue(f,!0),this.element.trigger({type:"slideStop",value:f}).data("value",f).prop("value",f),!1}},mousemove:function(a){if(!this.isEnabled())return!1;this.touchCapable&&"touchmove"===a.type&&(a=a.originalEvent);var b=this.getPercentage(a);this.adjustPercentageForRangeSliders(b),this.percentage[this.dragged]=this.reversed?100-b:b,this.layout();var c=this.calculateValue();return this.setValue(c,!0),!1},adjustPercentageForRangeSliders:function(a){this.range&&(0===this.dragged&&this.percentage[1]<a?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>a&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;this.touchCapable&&a(document).off({touchmove:this.mousemove,touchend:this.mouseup}),a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1;var b=this.calculateValue();return this.layout(),this.element.data("value",b).prop("value",b).trigger({type:"slideStop",value:b}),!1},calculateValue:function(){var a;return this.range?(a=[this.min,this.max],0!==this.percentage[0]&&(a[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step),a[0]=this.applyPrecision(a[0])),100!==this.percentage[1]&&(a[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),a[1]=this.applyPrecision(a[1])),this.value=a):(a=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,a<this.min?a=this.min:a>this.max&&(a=this.max),a=parseFloat(a),a=this.applyPrecision(a),this.value=[a,this.value[1]]),a},applyPrecision:function(a){var b=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(a,b)},getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=100*(a[this.mousePos]-this.offset[this.stylePos])/this.size;return b=Math.round(b/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,b))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(a,b){if(a||(a=0),this.value=this.validateInputValue(a),this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"===this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.diff>0?this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:this.percentage=[0,0,100],this.layout(),b===!0){var c=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:c}).data("value",c).prop("value",c)}},validateInputValue:function(b){if("number"==typeof b)return b;if(b instanceof Array)return a.each(b,function(a,b){if("number"!=typeof b)throw new Error(f.formatInvalidInputErrorMsg(b))}),b;throw new Error(f.formatInvalidInputErrorMsg(b))},destroy:function(){this.handle1.off(),this.handle2.off(),this.element.off().show(),this.picker.off().remove(),a(this.element).removeData("slider")},disable:function(){this.enabled=!1,this.handle1.removeAttr("tabindex"),this.handle2.removeAttr("tabindex"),this.picker.addClass("slider-disabled"),this.element.trigger("slideDisabled")},enable:function(){this.enabled=!0,this.handle1.attr("tabindex",0),this.handle2.attr("tabindex",0),this.picker.removeClass("slider-disabled"),this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(a,b){this[a]=b},getAttribute:function(a){return this[a]}};var h={getValue:g.prototype.getValue,setValue:g.prototype.setValue,setAttribute:g.prototype.setAttribute,getAttribute:g.prototype.getAttribute,destroy:g.prototype.destroy,disable:g.prototype.disable,enable:g.prototype.enable,toggle:g.prototype.toggle,isEnabled:g.prototype.isEnabled};a.fn.slider=function(a){if("string"==typeof a&&"refresh"!==a){var b=Array.prototype.slice.call(arguments,1);return c.call(this,a,b)}return e.call(this,a)},a.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(a){return a}},a.fn.slider.Constructor=g})},{jquery:9}],4:[function(a,b,c){!function(a,b,c,d){"use strict";var e=function(b,c){this.widget="",this.$element=a(b),this.defaultTime=c.defaultTime,this.disableFocus=c.disableFocus,this.disableMousewheel=c.disableMousewheel,this.isOpen=c.isOpen,this.minuteStep=c.minuteStep,this.modalBackdrop=c.modalBackdrop,this.orientation=c.orientation,this.secondStep=c.secondStep,this.showInputs=c.showInputs,this.showMeridian=c.showMeridian,this.showSeconds=c.showSeconds,this.template=c.template,this.appendWidgetTo=c.appendWidgetTo,this.showWidgetOnAddonClick=c.showWidgetOnAddonClick,this._init()};e.prototype={constructor:e,_init:function(){var b=this;this.showWidgetOnAddonClick&&(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend"))?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":a.proxy(this.mousewheel,this)}),this.template!==!1?this.$widget=a(this.getTemplate()).on("click",a.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b),"keyup.timepicker":a.proxy(b.widgetKeyup,b)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=null,this.updateFromElementVal()},clear:function(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=23:this.hour--},decrementMinute:function(a){var b;b=a?this.minute-a:this.minute-this.minuteStep,0>b?(this.decrementHour(),this.minute=b+60):this.minute=b},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a},elementKeydown:function(a){switch(a.keyCode){case 9:case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update();break;case 39:a.preventDefault(),this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}this.update()}},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),d=c.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-d}},getTemplate:function(){var a,b,c,d,e,f;switch(this.showInputs?(b='<input type="text" class="bootstrap-timepicker-hour" maxlength="2"/>',c='<input type="text" class="bootstrap-timepicker-minute" maxlength="2"/>',d='<input type="text" class="bootstrap-timepicker-second" maxlength="2"/>',e='<input type="text" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">Ã—</a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"</div>"}return a},getTime:function(){return""===this.hour?"":this.hour+":"+(1===this.minute.toString().length?"0"+this.minute:this.minute)+(this.showSeconds?":"+(1===this.second.toString().length?"0"+this.second:this.second):"")+(this.showMeridian?" "+this.meridian:"")},hideWidget:function(){this.isOpen!==!1&&(this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker, touchend.timepicker"),this.isOpen=!1,this.$widget.detach())},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(0,1):a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(2,4):a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0),b=this;this.highlightedUnit="meridian",a.setSelectionRange&&(this.showSeconds?setTimeout(function(){b.hour<10?a.setSelectionRange(8,10):a.setSelectionRange(9,11)},0):setTimeout(function(){b.hour<10?a.setSelectionRange(5,7):a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):void this.hour++},incrementMinute:function(a){var b;b=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep,b>59?(this.incrementHour(),this.minute=b-60):this.minute=b},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a},mousewheel:function(b){if(!this.disableMousewheel){b.preventDefault(),b.stopPropagation();var c=b.originalEvent.wheelDelta||-b.originalEvent.detail,d=null;switch("mousewheel"===b.type?d=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"===b.type&&(d=40*b.originalEvent.detail),d&&(b.preventDefault(),a(this).scrollTop(d+a(this).scrollTop())),this.highlightedUnit){case"minute":c>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":c>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:c>0?this.incrementHour():this.decrementHour(),this.highlightHour()}return!1}},place:function(){if(!this.isInline){var c=this.$widget.outerWidth(),d=this.$widget.outerHeight(),e=10,f=a(b).width(),g=a(b).height(),h=a(b).scrollTop(),i=parseInt(this.$element.parents().filter(function(){}).first().css("z-index"),10)+10,j=this.component?this.component.parent().offset():this.$element.offset(),k=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),l=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),m=j.left,n=j.top;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),"auto"!==this.orientation.x?(this.picker.addClass("datepicker-orient-"+this.orientation.x),"right"===this.orientation.x&&(m-=c-l)):(this.$widget.addClass("timepicker-orient-left"),j.left<0?m-=j.left-e:j.left+c>f&&(m=f-c-e));var o,p,q=this.orientation.y;"auto"===q&&(o=-h+j.top-d,p=h+g-(j.top+k+d),q=Math.max(o,p)===p?"top":"bottom"),this.$widget.addClass("timepicker-orient-"+q),"top"===q?n+=k:n-=d+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:n,left:m,zIndex:i})}},remove:function(){a("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date,c=b.getHours(),d=b.getMinutes(),e=b.getSeconds(),f="AM";0!==e&&(e=Math.ceil(b.getSeconds()/this.secondStep)*this.secondStep,60===e&&(d+=1,e=0)),0!==d&&(d=Math.ceil(b.getMinutes()/this.minuteStep)*this.minuteStep,60===d&&(c+=1,d=0)),this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="PM"):f="AM"),this.hour=c,this.minute=d,this.second=e,this.meridian=f,this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a,b){if(!a)return void this.clear();var c,d,e,f,g;"object"==typeof a&&a.getMonth?(d=a.getHours(),e=a.getMinutes(),f=a.getSeconds(),this.showMeridian&&(g="AM",d>12&&(g="PM",d%=12),12===d&&(g="PM"))):(g=null!==a.match(/p/i)?"PM":"AM",a=a.replace(/[^0-9\:]/g,""),c=a.split(":"),d=c[0]?c[0].toString():c.toString(),e=c[1]?c[1].toString():"",f=c[2]?c[2].toString():"",d.length>4&&(f=d.substr(4,2)),d.length>2&&(e=d.substr(2,2),d=d.substr(0,2)),e.length>2&&(f=e.substr(2,2),e=e.substr(0,2)),f.length>2&&(f=f.substr(2,2)),d=parseInt(d,10),e=parseInt(e,10),f=parseInt(f,10),isNaN(d)&&(d=0),isNaN(e)&&(e=0),isNaN(f)&&(f=0),this.showMeridian?1>d?d=1:d>12&&(d=12):(d>=24?d=23:0>d&&(d=0),13>d&&"PM"===g&&(d+=12)),0>e?e=0:e>=60&&(e=59),this.showSeconds&&(isNaN(f)?f=0:0>f?f=0:f>=60&&(f=59))),this.hour=d,this.minute=e,this.second=f,this.meridian=g,this.update(b)},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){this.$widget.appendTo(this.appendWidgetTo);var b=this;a(c).on("mousedown.timepicker, touchend.timepicker",function(a){b.$element.parent().find(a.target).length||b.$widget.is(a.target)||b.$widget.find(a.target).length||b.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.place(),this.disableFocus&&this.$element.blur(),""===this.hour&&(this.defaultTime?this.setDefaultTime(this.defaultTime):this.setTime("0:0:0")),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM"},update:function(a){this.updateElement(),a||this.updateWidget(),this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}})},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){this.setTime(this.$element.val())},updateWidget:function(){if(this.$widget!==!1){var a=this.hour,b=1===this.minute.toString().length?"0"+this.minute:this.minute,c=1===this.second.toString().length?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var a=this.$widget.find("input.bootstrap-timepicker-hour").val()+":"+this.$widget.find("input.bootstrap-timepicker-minute").val()+(this.showSeconds?":"+this.$widget.find("input.bootstrap-timepicker-second").val():"")+(this.showMeridian?this.$widget.find("input.bootstrap-timepicker-meridian").val():"");this.setTime(a,!0)}},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("a").data("action");d&&this[d](),this.update(),c.is("input")&&c.get(0).setSelectionRange(0,2)},widgetKeydown:function(b){var c=a(b.target),d=c.attr("class").replace("bootstrap-timepicker-","");switch(b.keyCode){case 9:if(this.showMeridian&&"meridian"===d||this.showSeconds&&"second"===d||!this.showMeridian&&!this.showSeconds&&"minute"===d)return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(b.preventDefault(),d){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2);break;case 40:switch(b.preventDefault(),d){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.setTime(this.getTime()),c.get(0).setSelectionRange(0,2)}},widgetKeyup:function(a){(65===a.keyCode||77===a.keyCode||80===a.keyCode||46===a.keyCode||8===a.keyCode||a.keyCode>=46&&a.keyCode<=57)&&this.updateFromWidgetInputs()}},a.fn.timepicker=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var d=a(this),f=d.data("timepicker"),g="object"==typeof b&&b;f||d.data("timepicker",f=new e(this,a.extend({},a.fn.timepicker.defaults,g,a(this).data()))),"string"==typeof b&&f[b].apply(f,c)})},a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,orientation:{x:"auto",y:"auto"},secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0},a.fn.timepicker.Constructor=e}(jQuery,window,document)},{}],5:[function(a,b,c){var d=function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=[],t="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",x="http://www.w3.org/1999/xhtml",y=function(a){return a.ownerDocument},z=function(a){var b=[],c=function(a,b){var c,d,e=[];for(d=0;d<a.length;d++)c=a.item(d),!1!==arrayIndexOf(c.nodeType,b)&&e.push(c);return e};switch(a.nodeType){case 1:b=c(a.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:b=c(a.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+a.nodeType)}return b},A=function(a){var b,c,d=[];for(b=z(a),c=0;c<b.length;c++)d.push(b[c]),d.push.apply(d,A(b[c]));return d},B=function(a){var b;switch(a.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return a.parentNode;case 2:return a.ownerElement?a.ownerElement:b=nodeAttributeSearch(a.ownerDocument,!0,function(b,c){return c===a?!0:void 0});case 13:return a.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+a.type)}},C=function(a){for(var b,c=[];b=B(a);)c.push(b),a=b;return c},D=function(a){return F(a,"nextSibling")},E=function(a){return F(a,"previousSibling")},F=function(a,b){for(var c,d=[];c=a[b];){switch(c.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:d.push(c)}a=c}return d},G=function(a){var b,c,d,e,f=[];for(b=C(a),b.unshift(a),c=0;c<b.length;c++)for(d=D(b[c]),e=0;e<d.length;e++)f.push(d[e]),f.push.apply(f,A(d[e]));return f},H=function(a){var b,c,d,e,f=[];for(b=C(a),b.unshift(a),c=0;c<b.length;c++)for(d=E(b[c]),e=0;e<d.length;e++)f.push.apply(f,A(d[e]).reverse()),f.push(d[e]);return f},y=function(a){switch(a.nodeType){case 9:return a;default:return a.ownerDocument}};return nodeAttribute=function(a){var b,c=[];if(1===a.nodeType)for(b=0;b<a.attributes.length;b++)a.attributes[b].specified&&!1===isNamespaceAttributeNode(a.attributes[b])&&c.push(a.attributes[b]);return c},nodeNamespace=function(a,b){var c,d,e,f=b||[];if(1===a.nodeType){if(a.ownerDocument.documentElement===a&&"object"==typeof a.ownerDocument.namespaces)for(c=a.ownerDocument.namespaces.length-1;c>=0;c--)e=a.ownerDocument.namespaces.item(c),insertNamespaceIfNotDeclared.call(this,f,e.name,e.urn,a);for(c=a.attributes.length-1;c>=0;c--)a.attributes[c].specified&&!1!==(d=isNamespaceAttributeNode(a.attributes[c]))&&(1!==d.length?insertNamespaceIfNotDeclared.call(this,f,d[1],a.attributes[c].nodeValue,a):insertNamespaceIfNotDeclared.call(this,f,"",a.attributes[c].nodeValue,a));if(nodeNamespace.call(this,a.parentNode,f),void 0===b&&(insertNamespaceIfNotDeclared.call(this,f,"xml",t,a),f[0]&&""===f[0].prefix&&""===f[0].namespaceURI&&f.shift()),void 0===b)for(c=0;c<f.length;c++)f[c].ownerElement!==a&&(f[c]=createNamespaceNode(f[c].prefix,f[c].nodeValue,a))}return f},insertNamespaceIfNotDeclared=function(a,b,c,d){var e,f;for(this.opts["case-sensitive"]||(b=b.toLowerCase()),e=0;e<a.length;e++)if(a[e].prefix===b)return!1;return f=createNamespaceNode(b,c,d),""===b&&null!==c?a.unshift(f):a.push(f),!0},isNamespaceAttributeNode=function(a){var b=a.nodeName.split(":");return"xmlns"===b[0]?b:!1},nodeIdAttribute=function(a,b){var c,d,e,f,g,h;if(1===a.nodeType)for(e=b?[b]:nodeAttribute(a),f=nodeNamespace.call(this,a),c=0;c<e.length;c++){for(h=e[c].nodeName.split(":"),1===h.length&&(h[1]=h[0],h[0]=""),g=null,d=0;d<f.length;d++)if(f[d].prefix===h[0]){g=f[d].namespaceURI;break}if(null===g&&(g=""),this.opts["unique-ids"][g]===h[1])return e[c]}return null},nodeAttributeSearch=function(a,b,c){var d,e,f,g,h=[];for(f=a.getElementsByTagName("*"),d=0;d<f.length;d++)if(g=f.item(d),1==g.nodeType)for(e=0;e<g.attributes.length;e++)if(g.attributes[e].specified&&c(g,g.attributes[e])===!0){if(b)return g;h.push(g);break}return b?null:h},nodeExpandedName=function(a){var b,c,d,e;switch(a.nodeType){case 1:for("undefined"!=typeof a.scopeName?e={prefix:"HTML"==a.scopeName?"":a.scopeName,name:a.nodeName}:(b=a.nodeName.split(":"),e=1==b.length?{prefix:"",name:b[0]}:{prefix:b[0],name:b[1]}),this.opts["case-sensitive"]||(e.prefix=e.prefix.toLowerCase(),e.name=e.name.toLowerCase()),c=nodeNamespace.call(this,a),d=0;d<c.length;d++)if(c[d].prefix===e.prefix)return e.ns=c[d].namespaceURI,e;if(""===e.prefix)return e.ns=null,e;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+e.prefix+'" on element: '+a.nodeName);case 2:if(b=a.nodeName.split(":"),1==b.length)return{prefix:"",ns:null,name:b[0]};for(e={prefix:b[0],name:b[1]},this.opts["case-sensitive"]||(e.prefix=e.prefix.toLowerCase(),e.name=e.name.toLowerCase()),c=nodeNamespace.call(this,B(a)),d=0;d<c.length;d++)if(c[d].prefix===e.prefix)return e.ns=c[d].namespaceURI,e;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+e.prefix+'" on attribute: '+a.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?a.prefix.toLowerCase():a.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?a.target.toLowerCase():a.target};default:return!1}},nodeStringValue=function(a){var b,c,d="";switch(a.nodeType){case 9:case 1:for(c=i(new l(a,1,1,{},{},{}),{
type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]}),c.sortDocumentOrder(),b=0;b<c.value.length;b++)d+=c.value[b].data;return d;case 2:return a.nodeValue;case 13:return a.namespaceURI;case 7:case 8:case 3:case 4:return a.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+a.nodeType)}},createError=function(a,b,c){var d=new Error(c);return d.name=b,d.code=a,d},arrayIndexOf=function(a,b){for(var c=b.length;c--;)if(b[c]===a)return c;return!1},compareOperator=function(a,b,c,d){var e,f,g,h,i;if(a instanceof q)if(b instanceof q){for(h=b.stringValues(),g=a.stringValues(),e=0;e<g.length;e++)for(f=0;f<h.length;f++)if(i=compareOperator(g[e],h[f],c,d),i.toBoolean())return i}else if(b instanceof p){for(g=a.stringValues(),e=0;e<g.length;e++)if(i=compareOperator(new p(g[e].toNumber()),b,c,d),i.toBoolean())return i}else if(b instanceof DateType||b instanceof o&&b.isDateString()){for(b instanceof o&&(b=new DateType(b)),g=a.stringValues(),e=0;e<g.length;e++)if(i=compareOperator(new DateType(g[e].toDate()),b,c,d),i.toBoolean())return i}else{if(!(b instanceof o))return compareOperator(new n(a.toBoolean()),b,c,d);for(g=a.stringValues(),e=0;e<g.length;e++)if(i=compareOperator(g[e],b,c,d),i.toBoolean())return i}else if(b instanceof q)if(a instanceof p){for(h=b.stringValues(),e=0;e<h.length;e++)if(i=compareOperator(a,new p(h[e].toNumber()),c,d),i.toBoolean())return i}else if(a instanceof DateType||a instanceof o&&a.isDateString()){for(a instanceof o&&(a=new DateType(a)),h=b.stringValues(),e=0;e<h.length;e++)if(i=compareOperator(a,new DateType(h[e].toDate()),c,d),i.toBoolean())return i}else{if(!(a instanceof o))return compareOperator(a,new n(b.toBoolean()),c,d);for(h=b.stringValues(),e=0;e<h.length;e++)if(i=compareOperator(a,h[e],c,d),i.toBoolean())return i}else switch(c){case"=":case"!=":return new n(a instanceof n||b instanceof n?d(a.toBoolean(),b.toBoolean()):a instanceof p||b instanceof p?d(a.toNumber(),b.toNumber()):d(a.toString(),b.toString()));default:return new n(d(a.toNumber(),b.toNumber()))}return new n(!1)},getComparableNode=function(a){switch(a.nodeType){case 2:case 3:case 4:case 7:case 8:return B(a);case 1:case 9:return a;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+a.nodeType)}},compareDocumentPosition=function(a,b){var c,d,e;if(13==a.nodeType&&13==b.nodeType&&a.ownerElement==b.ownerElement){if(a===b)return 0;for(d=nodeNamespace.call(r,a.ownerElement),e=0;e<d.length;e++){if(d[e]===a){c=4;break}if(d[e]===b){c=2;break}}}else 13==a.nodeType&&(a=a.ownerElement),13==b.nodeType&&(b=b.ownerElement),c=compareDocumentPositionNoNamespace(a,b);return c},compareDocumentPositionNoNamespace=function(a,b){var c,d,e,f,g,h=function(a,b,c,d,e,f,g,h,i){return 0===e||(e&f)===f?h+f:(e&g)===g?i:e};if(a.compareDocumentPosition)return a.compareDocumentPosition(b);if(a===b)return 0;if(c=getComparableNode(a),d=getComparableNode(b),9===c.nodeType)if(9===d.nodeType){if(c!==d)return 1;e=0}else{if(c!==d.ownerDocument)return 1;e=20}else if(9===d.nodeType){if(d!==c.ownerDocument)return 1;e=10}else{if(c.ownerDocument!==d.ownerDocument)return 1;if(!c.contains||"undefined"==typeof c.sourceIndex||!d.contains||"undefined"==typeof d.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');e=(c!=d&&c.contains(d)&&16)+(c!=d&&d.contains(c)&&8)+(c.sourceIndex>=0&&d.sourceIndex>=0?(c.sourceIndex<d.sourceIndex&&4)+(c.sourceIndex>d.sourceIndex&&2):1)+0}if(a===c&&b===d)return e;if(a===c)return h(a,c,b,d,e,16,8,4,2);if(b===d)return h(b,d,a,c,e,8,16,2,4);if(16===(16&e))return 4;if(8===(8&e))return 2;if(0===e){for(f=0;f<c.attributes.length;f++)if(g=c.attributes[f],g.specified){if(g===b)return 2;if(g===a)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return e},nodeSupported=function(a){if(!a)throw createError(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=a.nodeType&&1!=a.nodeType&&2!=a.nodeType&&3!=a.nodeType&&4!=a.nodeType&&8!=a.nodeType&&7!=a.nodeType&&13!=a.nodeType)throw createError(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+a.nodeType+")");if(2==a.nodeType&&!a.specified)throw createError(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},createNamespaceNode=function(a,b,c){var d,e;for(d=0;d<s.length;d++)if(e=s[d],e.prefix===a&&e.nodeValue===b&&e.ownerElement===c)return e;return e=new g(a,b,c),s.push(e),e},m=function(a,b,c){this.value=a,this.type=b,this.supports=c},m.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(a){return!1!==arrayIndexOf(a,this.supports)}},n=function(a){m.call(this,a,"boolean",["boolean","string","number","date"])},n.prototype=new m,n.constructor=n,n.prototype.toBoolean=function(){return this.value},n.prototype.toString=function(){return this.value===!0?"true":"false"},n.prototype.toNumber=function(){return this.value?1:0},n.prototype.toDate=function(){return null},q=function(a,b){m.call(this,a,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=b||"unsorted"},q.prototype=new m,q.constructor=q,q.prototype.toBoolean=function(){return this.value.length>0},q.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),nodeStringValue(this.value[0]))},q.prototype.toNumber=function(){return new o(this.toString()).toNumber()},q.prototype.toNodeSet=function(){return this.value},q.prototype.toDate=function(){return new o(this.toString()).toDate()},q.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(a,b){var c=compareDocumentPosition(a,b);if(4==(4&c))return-1;if(2==(2&c))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+c)})}this.docOrder="document-order"},q.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},q.prototype.append=function(a){var b,c=0,d=0;if(!a instanceof q)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),a.sortDocumentOrder();c<this.value.length&&d<a.value.length;)if(b=compareDocumentPosition(this.value[c],a.value[d]),0==b)d++;else if(4==(4&b))c++;else{if(2!=(2&b))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+b+")");this.value.splice(c,0,a.value[d]),c++,d++}for(;d<a.value.length;d++)this.value.push(a.value[d]);this.docOrder="document-order"},q.prototype.stringValues=function(){var a,b,c=[];for(a=0;a<this.value.length;a++)b=new o(nodeStringValue(this.value[a])),b.isDateString()&&(b=new DateType(b.value)),c.push(b);return c},o=function(a){m.call(this,a,"string",["boolean","string","number","date"])},o.prototype=new m,o.constructor=o,o.prototype.toBoolean=function(){return this.value.length>0},o.prototype.toString=function(){return this.value},o.prototype.toNumber=function(){var a;return this.isDateString(this.value)?new DateType(this.value).toNumber():(a=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/),null!==a?parseFloat(a[1]):(a=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/),null!==a?parseFloat(a[1]):Number.NaN))},o.prototype.toDate=function(){return new Date(this.value)},o.prototype.isDateString=function(){return isNaN(this.value)?isNaN(Date.parse(this.value))?!1:/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value)?(console.debug("found string value that passes check for datestringiness: "+this.value),!0):!1:!1},p=function(a){m.call(this,a,"number",["boolean","string","number","date"])},p.prototype=new m,p.constructor=p,p.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},p.prototype.toString=function(){return this.value.toString()},p.prototype.toNumber=function(){return this.value},p.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(a){m.call(this,a,"date",["date","string","number","boolean"])},DateType.prototype=new m,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toUTCString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},a=function(b,c){var d;switch(this.code=b,this.code){case a.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case a.TYPE_ERR:this.name="TYPE_ERR";break;default:throw d=new Error("Unsupported XPathException code: "+this.code),d.name="XPathExceptionInternalError",d}this.message=c||""},a.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},a.INVALID_EXPRESSION_ERR=51,a.TYPE_ERR=52,b=function(a){var b,c,d;for(b in a){d=!1;for(c in this.opts)if(b===c){this.opts[b]=a[b],d=!0;break}if(!d)throw new Error("Unsupported option: "+b)}this.opts["unique-ids"][t]="id",this.opts["unique-ids"][x]="id"},b.prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(b,e){var f,g,h,i,j={};try{f=d._parser.parse(b)}catch(k){throw g="The expression is not a legal expression.",g+=k instanceof d._parser.SyntaxError?" (line: "+k.line+", character: "+k.column+")":" ("+k.message+")",new a(a.INVALID_EXPRESSION_ERR,g)}if(f.nsPrefixes.length>0){if("object"!=typeof e||"undefined"==typeof e.lookupNamespaceURI)throw new a(a.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(h=0;h<f.nsPrefixes.length;h++)if(i=f.nsPrefixes[h],j[i]=e.lookupNamespaceURI(i),null===j[i])throw createError(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+i+'" in the context of the given resolver.')}return new c(f,j,this.opts)},createNSResolver:function(a){return new e(a)},evaluate:function(a,b,c,d,e){var a=this.createExpression(a,c);return a.evaluate(b,d,e)}},c=function(a,b,c){this.parsedExpression=a,this.namespaceMapping=b,this.opts=c||{}},c.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(a,b,c){var d;return r=this,nodeSupported(a),d=new l(a,1,1,{},k,this.namespaceMapping,this.opts),f.factory(d,b,i(d,this.parsedExpression.tree))}},l=function(a,b,c,d,e,f,g){this.node=a,this.pos=b,this.size=c,this.vars=d,this.fns=e,this.nsMap=f,this.opts=g||{}},l.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(a,b,c){return new l(a||this.node,"undefined"!=typeof b?b:this.pos,"undefined"!=typeof c?c:this.size,this.vars,this.fns,this.nsMap,this.opts)}},e=function(a){nodeSupported(a),this.node=a},e.prototype={node:null,lookupNamespaceURI:function(a){var b,c,d,e=this.node;switch(a){case"xml":return t;case"xmlns":return u;default:switch(this.node.nodeType){case 9:e=e.documentElement;break;case 1:break;default:e=B(e)}if(null!=e&&1==e.nodeType){if(""==a){if(c=e.getAttribute("xmlns"),null!==c)return c}else if(e.ownerDocument.documentElement===e&&"object"==typeof e.ownerDocument.namespaces){for(b=0;b<e.ownerDocument.namespaces.length;b++)if(c=e.ownerDocument.namespaces.item(b),c.name==a)return c.urn}else for(b=0;b<e.attributes.length;b++)if(e.attributes[b].specified&&"xmlns:"+a==e.attributes[b].nodeName)return e.attributes[b].nodeValue;if(e.ownerDocument.documentElement!==e&&e.parentNode)return d=this.node,this.node=e.parentNode,c=this.lookupNamespaceURI(a),this.node=d,c}return null}}},j={"/":function(a,b){var c,d,e,f,g;if(null===a)d=new q([y(this.node)],"document-order");else if(d=i(this,a),!d instanceof q)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+d.type+")");if(null===b)f=d;else for(f=new q([],"document-order"),c=0;c<d.value.length;c++){if(g=this.clone(d.value[c]),e=i(g,b),!e instanceof q)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+e.type+")");f.append(e)}return f},step:function(a,b){var c,d,e,f,g,h,j;switch(a){case"child":c=new q(z(this.node),"document-order");break;case"descendant":c=new q(A(this.node),"document-order");break;case"parent":e=B(this.node),c=new q(e?[e]:[],"document-order");break;case"ancestor":c=new q(C(this.node),"reverse-document-order");break;case"following-sibling":c=new q(D(this.node),"document-order");break;case"preceding-sibling":c=new q(E(this.node),"reverse-document-order");break;case"following":c=new q(G(this.node),"document-order");break;case"preceding":c=new q(H(this.node),"reverse-document-order");break;case"attribute":c=new q(nodeAttribute(this.node),"document-order");break;case"namespace":c=new q(nodeNamespace.call(this,this.node),"document-order");break;case"self":c=new q([this.node],"document-order");break;case"descendant-or-self":f=A(this.node),f.unshift(this.node),c=new q(f,"document-order");break;case"ancestor-or-self":f=C(this.node),f.unshift(this.node),c=new q(f,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+a)}switch(b.type){case"nodeType":if("node"==b.args[0])break;for(d=c.value.length-1;d>=0;d--)switch(b.args[0]){case"text":3!=c.value[d].nodeType&&4!=c.value[d].nodeType&&c.value.splice(d,1);break;case"comment":8!=c.value[d].nodeType&&c.value.splice(d,1);break;case"processing-instruction":(7!=c.value[d].nodeType||b.args[1].length>0&&i(this,b.args[1][0])!=c.value[d].nodeName)&&c.value.splice(d,1)}break;case"name":switch(g=i(this,b),a){case"attribute":h=2;break;case"namespace":h=13;break;default:h=1}for(d=c.value.length-1;d>=0;d--)c.value[d].nodeType==h?null===g.ns&&null===g.name||(j=nodeExpandedName.call(this,c.value[d]),j!==!1&&j.ns===g.ns?null!==g.name&&j.name.toLowerCase()!=g.name.toLowerCase()&&c.value.splice(d,1):c.value.splice(d,1)):c.value.splice(d,1);break;default:throw new Error("NodeTest type not supported in step: "+b.type)}return c},predicate:function(a,b,c){var d,e,f,g,h,j;if(d=i(this,b),!d instanceof q)throw new Error('Expected "node-set", got: '+d.type);switch(a){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":d.sortReverseDocumentOrder();break;default:d.sortDocumentOrder()}for(g=0;g<c.length;g++)for(e=0,h=1,j=d.value.length;e<d.value.length;h++){if(f=i(this.clone(d.value[e],h,j),c[g]),f instanceof p){if(f.value!=h){d.value.splice(e,1);continue}}else if(!f.toBoolean()){d.value.splice(e,1);continue}e++}return d},"function":function(a,b){var c,d,e,f,g=[],h=function(a){return(null!==a.ns?"{"+a.ns+"}":"{}")+a.name},j=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=void 0===a[b].t?"object":a[b].t,a[b].r!==!1?a[b].rep===!0&&(c+="+"):c+=a[b].rep===!0?"*":"?",d.push(c);return"("+d.join(", ")+")"},k=0,l=[];if(c=i(this,a),null===c.ns&&(c.ns=""),!this.fns[c.ns]||!this.fns[c.ns][c.name])throw new Error('Function "'+h(c)+'" does not exist.');for(d=this.fns[c.ns][c.name],d.args||(d.args=[]),e=0,k=0;e<d.args.length;k++,e++){if(void 0===b[k]){if(d.args[e].r!==!1)throw new Error('Function "'+h(c)+'" expects '+j(d.args)+".")}else l.push(void 0===d.args[e].t?"object":d.args[e].t);if(d.args[e].rep===!0){for(;k<b.length;k++)l.push(void 0===d.args[e].t?"object":d.args[e].t);break}}if(l.length<b.length)throw new Error('Function "'+h(c)+'" expects '+j(d.args)+".");for(e=0;e<b.length;e++){if(f=i(this,b[e]),"object"!==l[e]&&!f.canConvertTo(l[e]))throw new Error('Function "'+h(c)+'" expects '+j(d.args)+'.Cannot convert "'+f.type+'" to "'+l[e]+'".');g.push(f)}if(result=d.fn.apply(this,g),!result instanceof m)throw new Error('Function "'+h(c)+'" did not return a value that inherits from BaseType.');if("object"!==d.ret&&!result.canConvertTo(d.ret))throw new Error('Function "'+h(c)+'" return "'+result.type+'" type that cannot be converted to "'+d.ret+'".');return result},"|":function(a,b){if(a=i(this,a),b=i(this,b),"undefined"==typeof a||"undefined"==typeof b||!a instanceof q||!b instanceof q)throw new Error('Unable to perform union on non-"node-set" types.');return a.append(b),a},or:function(a,b){return new n(i(this,a).toBoolean()?!0:i(this,b).toBoolean())},and:function(a,b){return new n(i(this,a).toBoolean()?i(this,b).toBoolean():!1)},"=":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),"=",function(a,b){return a==b})},"!=":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),"!=",function(a,b){return a!=b})},"<=":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),"<=",function(a,b){return b>=a})},"<":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),"<",function(a,b){return b>a})},">=":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),">=",function(a,b){return a>=b})},">":function(a,b){return compareOperator.call(this,i(this,a),i(this,b),">",function(a,b){return a>b})},"+":function(a,b){return new p(i(this,a).toNumber()+i(this,b).toNumber())},"-":function(a,b){return new p(i(this,a).toNumber()-i(this,b).toNumber())},div:function(a,b){return new p(i(this,a).toNumber()/i(this,b).toNumber())},mod:function(a,b){return new p(i(this,a).toNumber()%i(this,b).toNumber())},"*":function(a,b){return new p(i(this,a).toNumber()*i(this,b).toNumber())},string:function(a){return new o(a)},number:function(a){return new p(a)},$:function(a){throw new Error("TODO: Not implemented.16")},name:function(a,b){var c=null;if(null!==a&&(c=this.nsMap[a],!c))throw new Error('Namespace prefix "'+a+'" is not mapped to a namespace.');return{ns:c,name:b}}},k={"":{last:{fn:function(){return new p(this.size)},ret:"number"},count:{fn:function(a){return new p(a.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(a){var b,c,d,e=this,f=[],g=[],h=function(a){var b,c=a.split(/[\u0020\u0009\u000D\u000A]+/);for(b=c.length-1;b>=0;b--)0==c[b].length&&c.splice(b,1);return c};if(a instanceof q)for(b=0;b<a.value.length;b++)f.push.apply(f,h(nodeStringValue(a.value[b])));else a=a.toString(),f=h(a);for(b=f.length-1;b>=0;b--)for(c=b-1;c>=0;c--)if(f[b]==f[c]&&b!=c){f.splice(b,1);break}for(b=0;b<f.length;b++)d=y(this.node).getElementById(f[b]),d&&nodeIdAttribute.call(this,d)?g.push(d):nodeAttributeSearch(y(this.node),!0,function(a,c){var d=nodeIdAttribute.call(e,a,c);return d&&d.nodeValue==f[b]?(g.push(a),!0):void 0});return new q(g)},args:[{}],ret:"node-set"},"local-name":{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=nodeExpandedName.call(this,a.value[0]),b!==!1&&(c=b.name)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=nodeExpandedName.call(this,a.value[0]),b!==!1&&null!==b.ns&&(c=b.ns)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(a){var b,c="";return 0==arguments.length&&(a=new q([this.node])),a.toNodeSet().length>0&&(a.sortDocumentOrder(),b=nodeExpandedName.call(this,a.value[0]),b!==!1&&(c=b.prefix&&b.prefix.length>0?b.prefix+":"+b.name:b.name)),new o(c)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(a){return 0==arguments.length&&(a=new q([this.node],"document-order")),new o(a.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(a,b){return new n(a.toString().substr(0,(b=b.toString()).length)==b)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(a,b){return new n(-1!=a.toString().indexOf(b=b.toString()))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(a,b){return a=a.toString(),b=a.indexOf(b.toString()),new o(-1==b?"":a.substr(0,b))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(a,b){var c;return a=a.toString(),b=b.toString(),c=a.indexOf(b),new o(-1==c?"":a.substr(c+b.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(a,b,c){return a=a.toString(),b=Math.round(b.toNumber())-1,new o(isNaN(b)?"":2==arguments.length?a.substring(0>b?0:b):a.substring(0>b?0:b,b+Math.round(c.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(a){return a=0==arguments.length?nodeStringValue(this.node):a.toString(),new p(a.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(a){return a=0==arguments.length?nodeStringValue(this.node):a.toString(),new o(a.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(a,b,c){var d,e,f,g="";for(a=a.toString(),b=b.toString(),c=c.toString(),d=0;d<a.length;d++)(-1==(e=b.indexOf(f=a.charAt(d)))||(f=c.charAt(e)))&&(g+=f);return new o(g)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},"boolean":{fn:function(a){return new n(a.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(a){return new n(!a.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},"true":{fn:function(){return new n(!0)},ret:"boolean"},"false":{fn:function(){return new n(!1)},ret:"boolean"},lang:{fn:function(a){for(var b,c,d,e,f,g,h,i=this.node,j=a.toString().toLowerCase().split("-");9!=i.nodeType;i=B(i))for(b=nodeAttribute(i),f=0;f<b.length;f++)if(c=b[f].nodeName.split(":"),1===c.length&&(c[1]=c[0],c[0]=""),"lang"==c[1]){if(d=b[f].nodeValue.toLowerCase().split("-"),d.length<j.length)continue;for(h=!0,g=0;g<j.length;g++)if(j[g]!=d[g]){h=!1;break}if(h)for(e=nodeNamespace.call(this,i),g=0;g<e.length;g++)if(e[g].prefix==c[0]&&e[g].nodeValue==t)return new n(!0)}return new n(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(a){return 0==arguments.length&&(a=new q([this.node],"document-order")),new p(a.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(a){var b,c=0;for(a=a.toNodeSet(),b=0;b<a.length;b++)c+=new o(nodeStringValue(a[b])).toNumber();return new p(c)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(a){return new p(Math.floor(a))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(a){return new p(Math.ceil(a))},args:[{t:"number"}],ret:"number"},sum_jr:{fn:function(a){var b,c;for(sum=0,a=a.toNodeSet(),b=0;b<a.length;b++)c=""==nodeStringValue(a[b])?"0":nodeStringValue(a[b]),sum+=new o(c).toNumber();return new p(sum)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(a){if(a){var b,c,d;if(a=a.toNodeSet(),1===a.length){for(b=a[0],d=1,c=b.tagName;b.previousElementSibling&&b.previousElementSibling.tagName===c;)b=b.previousElementSibling,d++;return new p(d)}throw new Error("nodeset provided to position() contained multiple nodes")}return new p(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(a){var b,c,d="";for(b=0;b<arguments.length;b++)c=arguments[b]instanceof q?arguments[b].stringValues().join(""):arguments[b].toString(),d+=c;return new o(d)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(a,b){return b=Math.round(b)||0,new p(Math.round(a*Math.pow(10,b))/Math.pow(10,b))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(a,b){var c;return b=b.toString().trim(),c=a.toString(),new n(-1!=(" "+c+" ").indexOf(" "+b+" "))},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(a,b){var c,d,e;return b=Math.round(b.toNumber()),c=a.toString(),d=c.split(" "),e=b>=0&&b<d.length?d[b]:"",new o(e)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(a){var b=[];return a=a.toNodeSet(),a.length>0?(b=nodeStringValue(a[0]).trim().split(" "),new p(1==b.length&&""===b[0]?0:b.length)):new p(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(a,b,c){var d,e,f=0;for(a=a.toNumber(),b=b.toNumber(),d=2;d<arguments.length;d++)if(arguments[d]instanceof q)for(e=0;e<arguments[d].stringValues().length;e++)arguments[d].stringValues()[e].toBoolean()===!0&&f++;else arguments[d].toBoolean()===!0&&f++;return new n((0>a||f>=a)&&(0>b||b>=f))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(a,b,c,d){var e,f=[],g=[],h=0;for(a=a.toNumber(),b=b.toNumber(),e=2;e<arguments.length;e+=2)v=arguments[e],w=arguments[e+1],v&&w&&(v instanceof q?f=f.concat(v.stringValues()):f.push(v),w instanceof q?g=g.concat(w.stringValues()):g.push(w));for(e=0;e<f.length;e++)f[e].toBoolean()===!0&&(h+=g[e].toNumber());return new n((0>a||h>=a)&&(0>b||b>=h))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(a){return new n("true"===a.toString().toLowerCase()||"1"===String(a))},args:[{t:"string"}],ret:"boolean"},"if":{fn:function(a,b,c){return a.toBoolean()?b:c},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(a){return new DateType(a.toDate())},args:[{t:"object"}],ret:"string"},today:{fn:function(){var a=new Date;return new DateType(new Date(a.getFullYear(),a.getMonth(),a.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(a,b){var c,d;return c=a.toString(),d=new RegExp(b),new n(d.test(c))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return new o(a)},ret:"string"},"int":{fn:function(a){return new p(parseInt(a))},args:[{t:"number"}],ret:"number"},substr:{fn:function(a,b,c){return a=a.toString(),length=a.length,b=Math.round(b.toNumber()),c=c?Math.round(c.toNumber()):length,new o(isNaN(b)?"":a.substring(0>b?length+b:b,0>c?length+c:c))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new p(Math.random().toFixed(15))},ret:"number"},min:{fn:function(a,b){var c,d,e,f;for(console.log("min args",arguments),c=0;c<arguments.length;c++)if(arguments[c]instanceof q)for(f=arguments[c].toNodeSet(),c=0;c<f.length;c++)e=new o(nodeStringValue(f[c])),e&&(d=d?Math.min(d,e.toNumber()):e.toNumber());else e=new o(arguments[c].toString()),e&&(d=d?Math.min(d,e.toNumber()):e.toNumber());return new p(d)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(a,b){var c,d,e,f;for(c=0;c<arguments.length;c++)if(arguments[c]instanceof q)for(f=arguments[c].toNodeSet(),c=0;c<f.length;c++)e=new o(nodeStringValue(f[c])),e&&(d=d?Math.max(d,e.toNumber()):e.toNumber());else e=new o(arguments[c].toString()),e&&(d=d?Math.max(d,e.toNumber()):e.toNumber());return new p(d)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(a,b){var c,d=[];for(c=1;c<arguments.length;c++)arguments[c]instanceof q?d=d.concat(arguments[c].stringValues()):d.push(arguments[c].toString());for(value=d[0]||"",c=1;c<d.length;c++)value+=a.toString()+d[c];return new o(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(a,b){return a.toString().length>0?a:b},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(a,b){var c,a=new DateType(a),d=a.toDate(),e=b.toString(),f=function(a,b){var d=a.toString(),e=b-d.length;for(c=0;e>c;c++)d="0"+d;return d};if(!a.toBoolean())return new o(d.toString());props={Y:d.getFullYear(),y:d.getFullYear().toString().substring(2,4),m:f(d.getMonth()+1,2),n:d.getMonth()+1,b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()],d:f(d.getDate(),2),e:d.getDate(),H:f(d.getHours(),2),h:d.getHours(),M:f(d.getMinutes(),2),S:f(d.getSeconds(),2),3:f(d.getMilliseconds(),3),a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()]};for(prop in props)e=e.replace("%"+prop,props[prop]);return new o(e)},args:[{t:"date"},{t:"string"}],ret:"string"},"format-date-time":{fn:function(a,b){var c,a=new DateType(a),d=a.toDate(),e=b.toString(),f=function(a,b){var d=a.toString(),e=b-d.length;for(c=0;e>c;c++)d="0"+d;return d};if(!a.toBoolean())return new o(d.toString());props={Y:d.getFullYear(),y:d.getFullYear().toString().substring(2,4),m:f(d.getMonth()+1,2),n:d.getMonth()+1,b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()],d:f(d.getDate(),2),e:d.getDate(),H:f(d.getHours(),2),h:d.getHours(),M:f(d.getMinutes(),2),S:f(d.getSeconds(),2),3:f(d.getMilliseconds(),3),a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()]};for(prop in props)e=e.replace("%"+prop,props[prop]);return new o(e)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(a,b){return new p(Math.pow(a,b))},args:[{t:"number"},{t:"number"}],ret:"number"},version:{fn:function(){var a="#document"===this.node.nodeName?this.node.documentElement:this.node.ownerDocument.documentElement,b=a.attributes.version;return new o(b?b.textContent:"")},args:[],ret:"string"},once:{fn:function(a){var b=nodeStringValue(this.node),c=a.toString();return c="NaN"===c?"":c,new o(""!==b?b:c)},args:[{t:"string"}],ret:"string"},area:{fn:function(a){var b,c,d=[],e=[];if(a instanceof q&&a.value.length>1?a.value.forEach(function(a){d.push(nodeStringValue(a))}):a instanceof q?d=nodeStringValue(a.value[0]).split(";"):a instanceof o&&(d=a.value.split(";")),e=d.map(function(a){return a.trim().split(" ")}),c=e.every(function(a){return""!==a[0]&&a[0]>=-90&&a[0]<=90&&""!==a[1]&&a[1]>=-180&&a[1]<=180&&("undefined"==typeof a[2]||!isNaN(a[2]))&&("undefined"==typeof a[3]||!isNaN(a[3])&&a[3]>=0)})){var f,g,h=6378100,i=e.length,j=Math.PI/180;if(b=0,i>2){for(var k=0;i>k;k++)f={lat:e[k][0],lng:e[k][1]},g={lat:e[(k+1)%i][0],lng:e[(k+1)%i][1]},b+=(g.lng-f.lng)*j*(2+Math.sin(f.lat*j)+Math.sin(g.lat*j));b=b*h*h/2}b=Math.abs(Math.round(100*b))/100}else b=Number.NaN;return new p(b)},args:[{t:"string"}],ret:"number"}}},i=function(a,b){if("function"!=typeof j[b.type])throw new Error("Internal Error: Expression type does not exist: "+b.type);return j[b.type].apply(a,b.args)},f=function(b,c,d){switch(c){case f.NUMBER_TYPE:this.resultType=f.NUMBER_TYPE,this.numberValue=d.toNumber();break;case f.STRING_TYPE:this.resultType=f.STRING_TYPE,this.stringValue=d.toString();break;case f.BOOLEAN_TYPE:this.resultType=f.BOOLEAN_TYPE,this.booleanValue=d.toBoolean();break;case f.UNORDERED_NODE_ITERATOR_TYPE:case f.ORDERED_NODE_ITERATOR_TYPE:case f.UNORDERED_NODE_SNAPSHOT_TYPE:case f.ORDERED_NODE_SNAPSHOT_TYPE:case f.ANY_UNORDERED_NODE_TYPE:case f.FIRST_ORDERED_NODE_TYPE:if(!d instanceof q)throw new Error('Expected result of type "node-set", got: "'+d.type+'"');switch(this.resultType=c,c){case f.UNORDERED_NODE_ITERATOR_TYPE:case f.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=d.toNodeSet(),this.snapshotLength=this._value.length;break;case f.ORDERED_NODE_ITERATOR_TYPE:case f.ORDERED_NODE_SNAPSHOT_TYPE:d.sortDocumentOrder(),this._value=d.toNodeSet(),this.snapshotLength=this._value.length;break;case f.ANY_UNORDERED_NODE_TYPE:d=d.toNodeSet(),this.singleNodeValue=d.length?d[0]:null;break;case f.FIRST_ORDERED_NODE_TYPE:d.sortDocumentOrder(),d=d.toNodeSet(),this.singleNodeValue=d.length?d[0]:null;break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+c+")")}break;default:throw new a(a.TYPE_ERR,"XPath result type not supported. (type: "+c+")")}},f.factory=function(b,c,d){var e;if(c!==f.ANY_TYPE)return new f(b,c,d);if(d instanceof q)e=new f(b,f.UNORDERED_NODE_ITERATOR_TYPE,d);else if(d instanceof p)e=new f(b,f.NUMBER_TYPE,d);else if(d instanceof n)e=new f(b,f.BOOLEAN_TYPE,d);else{
if(!(d instanceof o))throw new a(a.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof d);e=new f(b,f.STRING_TYPE,d)}return e},f.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=f.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=f.ORDERED_NODE_ITERATOR_TYPE)throw new a(a.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(b){if(this.resultType!=f.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=f.ORDERED_NODE_SNAPSHOT_TYPE)throw new a(a.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[b]}},f.ANY_TYPE=0,f.NUMBER_TYPE=1,f.STRING_TYPE=2,f.BOOLEAN_TYPE=3,f.UNORDERED_NODE_ITERATOR_TYPE=4,f.ORDERED_NODE_ITERATOR_TYPE=5,f.UNORDERED_NODE_SNAPSHOT_TYPE=6,f.ORDERED_NODE_SNAPSHOT_TYPE=7,f.ANY_UNORDERED_NODE_TYPE=8,f.FIRST_ORDERED_NODE_TYPE=9,g=function(a,b,c){if(1!=c.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=c,this.ownerDocument=c.ownerDocument,this.nodeName="#namespace",this.prefix=a,this.localName=a,this.nodeType=g.XPATH_NAMESPACE_NODE,this.namespaceURI=b,this.nodeValue=b},g.XPATH_NAMESPACE_NODE=13,h={XPathException:a,XPathEvaluator:b,XPathNSResolver:e,XPathExpression:c,XPathResult:f,XPathNamespace:g,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(d){var h=new b(d);return{window:{XPathException:a,XPathExpression:c,XPathNSResolver:e,XPathResult:f,XPathNamespace:g},document:{createExpression:function(){return h.createExpression.apply(h,arguments)},createNSResolver:function(){return h.createNSResolver.apply(h,arguments)},evaluate:function(){return h.evaluate.apply(h,arguments)}}}},bindDomLevel3XPath:function(a,b){var c,d=b||h.createDomLevel3XPathBindings(),e=h.getCurrentDomLevel3XPathBindings(),a=a||document;for(c in d.window)window[c]=d.window[c];for(c in d.document)a[c]=d.document[c];return e}}}();d._parser=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return md!==b&&(md>b&&(md=0,nd={line:1,column:1,seenCR:!1}),c(nd,md,b),md=b),nd}function d(a){od>kd||(kd>od&&(od=kd,pd=[]),pd.push(a))}function e(d,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=c(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==d?d:h(e,j),e,j,f,i.line,i.column)}function f(){var a,b,c,d;return a=kd,b=O(),b!==Y?(c=s(),c!==Y?(d=O(),d!==Y?(ld=a,b=aa(c),a=b):(kd=a,a=_)):(kd=a,a=_)):(kd=a,a=_),a}function g(){var a;return a=j(),a===Y&&(a=h()),a}function h(){var b,c,e,f,g;return b=p(),b===Y&&(b=kd,47===a.charCodeAt(kd)?(c=ba,kd++):(c=Y,0===qd&&d(ca)),c!==Y?(e=kd,f=O(),f!==Y?(g=j(),g!==Y?(f=[f,g],e=f):(kd=e,e=_)):(kd=e,e=_),e===Y&&(e=da),e!==Y?(ld=b,c=ea(e),b=c):(kd=b,b=_)):(kd=b,b=_)),b}function j(){var b,c,e,f,g,h,i,j;if(b=kd,c=k(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(a.substr(kd,2)===fa?(h=fa,kd+=2):(h=Y,0===qd&&d(ga)),h===Y&&(47===a.charCodeAt(kd)?(h=ba,kd++):(h=Y,0===qd&&d(ca))),h!==Y?(i=O(),i!==Y?(j=k(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(a.substr(kd,2)===fa?(h=fa,kd+=2):(h=Y,0===qd&&d(ga)),h===Y&&(47===a.charCodeAt(kd)?(h=ba,kd++):(h=Y,0===qd&&d(ca))),h!==Y?(i=O(),i!==Y?(j=k(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=ha(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function k(){var a,b,c,d,e,f,g,h;if(a=kd,b=l(),b!==Y)if(c=O(),c!==Y)if(d=n(),d!==Y){for(e=[],f=kd,g=O(),g!==Y?(h=o(),h!==Y?(g=[g,h],f=g):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(h=o(),h!==Y?(g=[g,h],f=g):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=a,b=ia(b,d,e),a=b):(kd=a,a=_)}else kd=a,a=_;else kd=a,a=_;else kd=a,a=_;return a===Y&&(a=q()),a}function l(){var b,c,e,f;return b=kd,c=m(),c!==Y?(e=O(),e!==Y?(a.substr(kd,2)===ja?(f=ja,kd+=2):(f=Y,0===qd&&d(ka)),f!==Y?(ld=b,c=la(c),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,c=r(),c!==Y&&(ld=b,c=ma(c)),b=c),b}function m(){var b;return a.substr(kd,16)===na?(b=na,kd+=16):(b=Y,0===qd&&d(oa)),b===Y&&(a.substr(kd,8)===pa?(b=pa,kd+=8):(b=Y,0===qd&&d(qa)),b===Y&&(a.substr(kd,9)===ra?(b=ra,kd+=9):(b=Y,0===qd&&d(sa)),b===Y&&(a.substr(kd,5)===ta?(b=ta,kd+=5):(b=Y,0===qd&&d(ua)),b===Y&&(a.substr(kd,18)===va?(b=va,kd+=18):(b=Y,0===qd&&d(wa)),b===Y&&(a.substr(kd,10)===xa?(b=xa,kd+=10):(b=Y,0===qd&&d(ya)),b===Y&&(a.substr(kd,17)===za?(b=za,kd+=17):(b=Y,0===qd&&d(Aa)),b===Y&&(a.substr(kd,9)===Ba?(b=Ba,kd+=9):(b=Y,0===qd&&d(Ca)),b===Y&&(a.substr(kd,9)===Da?(b=Da,kd+=9):(b=Y,0===qd&&d(Ea)),b===Y&&(a.substr(kd,6)===Fa?(b=Fa,kd+=6):(b=Y,0===qd&&d(Ga)),b===Y&&(a.substr(kd,17)===Ha?(b=Ha,kd+=17):(b=Y,0===qd&&d(Ia)),b===Y&&(a.substr(kd,9)===Ja?(b=Ja,kd+=9):(b=Y,0===qd&&d(Ka)),b===Y&&(a.substr(kd,4)===La?(b=La,kd+=4):(b=Y,0===qd&&d(Ma)))))))))))))),b}function n(){var b,c,e,f,g,h,i,j;return b=kd,c=M(),c!==Y?(e=O(),e!==Y?(40===a.charCodeAt(kd)?(f=Na,kd++):(f=Y,0===qd&&d(Oa)),f!==Y?(g=O(),g!==Y?(41===a.charCodeAt(kd)?(h=Pa,kd++):(h=Y,0===qd&&d(Qa)),h!==Y?(ld=b,c=Ra(c),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,a.substr(kd,22)===Sa?(c=Sa,kd+=22):(c=Y,0===qd&&d(Ta)),c!==Y?(e=O(),e!==Y?(40===a.charCodeAt(kd)?(f=Na,kd++):(f=Y,0===qd&&d(Oa)),f!==Y?(g=O(),g!==Y?(h=F(),h!==Y?(i=O(),i!==Y?(41===a.charCodeAt(kd)?(j=Pa,kd++):(j=Y,0===qd&&d(Qa)),j!==Y?(ld=b,c=Ua(c,h),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,c=L(),c!==Y&&(ld=b,c=Va(c)),b=c)),b}function o(){var b,c,e,f,g,h;return b=kd,91===a.charCodeAt(kd)?(c=Wa,kd++):(c=Y,0===qd&&d(Xa)),c!==Y?(e=O(),e!==Y?(f=s(),f!==Y?(g=O(),g!==Y?(93===a.charCodeAt(kd)?(h=Ya,kd++):(h=Y,0===qd&&d(Za)),h!==Y?(ld=b,c=$a(f),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b}function p(){var b,c,e,f;return b=kd,a.substr(kd,2)===fa?(c=fa,kd+=2):(c=Y,0===qd&&d(ga)),c!==Y?(e=O(),e!==Y?(f=j(),f!==Y?(ld=b,c=_a(f),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b}function q(){var b,c;return b=kd,a.substr(kd,2)===ab?(c=ab,kd+=2):(c=Y,0===qd&&d(bb)),c===Y&&(46===a.charCodeAt(kd)?(c=cb,kd++):(c=Y,0===qd&&d(db))),c!==Y&&(ld=b,c=eb(c)),b=c}function r(){var b,c;return b=kd,64===a.charCodeAt(kd)?(c=fb,kd++):(c=Y,0===qd&&d(gb)),c===Y&&(c=da),c!==Y&&(ld=b,c=hb(c)),b=c}function s(){var a,b;return a=kd,b=y(),b!==Y&&(ld=a,b=$a(b)),a=b}function t(){var b,c,e,f,g,h;return b=kd,c=K(),c!==Y&&(ld=b,c=ib(c)),b=c,b===Y&&(b=kd,40===a.charCodeAt(kd)?(c=Na,kd++):(c=Y,0===qd&&d(Oa)),c!==Y?(e=O(),e!==Y?(f=s(),f!==Y?(g=O(),g!==Y?(41===a.charCodeAt(kd)?(h=Pa,kd++):(h=Y,0===qd&&d(Qa)),h!==Y?(ld=b,c=$a(f),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,c=F(),c!==Y&&(ld=b,c=jb(c)),b=c,b===Y&&(b=kd,c=G(),c!==Y&&(ld=b,c=kb(c)),b=c,b===Y&&(b=u())))),b}function u(){var b,c,e,f,g,h,i,j,k,l,m,n,o;if(b=kd,c=J(),c!==Y)if(e=O(),e!==Y)if(40===a.charCodeAt(kd)?(f=Na,kd++):(f=Y,0===qd&&d(Oa)),f!==Y){if(g=kd,h=O(),h!==Y)if(i=s(),i!==Y){for(j=[],k=kd,l=O(),l!==Y?(44===a.charCodeAt(kd)?(m=lb,kd++):(m=Y,0===qd&&d(mb)),m!==Y?(n=O(),n!==Y?(o=s(),o!==Y?(l=[l,m,n,o],k=l):(kd=k,k=_)):(kd=k,k=_)):(kd=k,k=_)):(kd=k,k=_);k!==Y;)j.push(k),k=kd,l=O(),l!==Y?(44===a.charCodeAt(kd)?(m=lb,kd++):(m=Y,0===qd&&d(mb)),m!==Y?(n=O(),n!==Y?(o=s(),o!==Y?(l=[l,m,n,o],k=l):(kd=k,k=_)):(kd=k,k=_)):(kd=k,k=_)):(kd=k,k=_);j!==Y?(h=[h,i,j],g=h):(kd=g,g=_)}else kd=g,g=_;else kd=g,g=_;g===Y&&(g=da),g!==Y?(h=O(),h!==Y?(41===a.charCodeAt(kd)?(i=Pa,kd++):(i=Y,0===qd&&d(Qa)),i!==Y?(ld=b,c=nb(c,g),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)}else kd=b,b=_;else kd=b,b=_;else kd=b,b=_;return b}function v(){var b,c,e,f,g,h,i,j;if(b=kd,c=w(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(124===a.charCodeAt(kd)?(h=ob,kd++):(h=Y,0===qd&&d(pb)),h!==Y?(i=O(),i!==Y?(j=w(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(124===a.charCodeAt(kd)?(h=ob,kd++):(h=Y,0===qd&&d(pb)),h!==Y?(i=O(),i!==Y?(j=w(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function w(){var b,c,e,f,h,i,k;return b=kd,c=x(),c!==Y?(e=kd,f=O(),f!==Y?(a.substr(kd,2)===fa?(h=fa,kd+=2):(h=Y,0===qd&&d(ga)),h===Y&&(47===a.charCodeAt(kd)?(h=ba,kd++):(h=Y,0===qd&&d(ca))),h!==Y?(i=O(),i!==Y?(k=j(),k!==Y?(f=[f,h,i,k],e=f):(kd=e,e=_)):(kd=e,e=_)):(kd=e,e=_)):(kd=e,e=_),e===Y&&(e=da),e!==Y?(ld=b,c=rb(c,e),b=c):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,c=g(),c!==Y&&(ld=b,c=sb(c)),b=c),b}function x(){var a,b,c,d,e,f;if(a=kd,b=t(),b!==Y){for(c=[],d=kd,e=O(),e!==Y?(f=o(),f!==Y?(e=[e,f],d=e):(kd=d,d=_)):(kd=d,d=_);d!==Y;)c.push(d),d=kd,e=O(),e!==Y?(f=o(),f!==Y?(e=[e,f],d=e):(kd=d,d=_)):(kd=d,d=_);c!==Y?(ld=a,b=tb(b,c),a=b):(kd=a,a=_)}else kd=a,a=_;return a}function y(){var b,c,e,f,g,h,i,j;if(b=kd,c=z(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(a.substr(kd,2)===ub?(h=ub,kd+=2):(h=Y,0===qd&&d(vb)),h!==Y?(i=O(),i!==Y?(j=z(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(a.substr(kd,2)===ub?(h=ub,kd+=2):(h=Y,0===qd&&d(vb)),h!==Y?(i=O(),i!==Y?(j=z(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function z(){var b,c,e,f,g,h,i,j;if(b=kd,c=A(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(a.substr(kd,3)===wb?(h=wb,kd+=3):(h=Y,0===qd&&d(xb)),h!==Y?(i=O(),i!==Y?(j=A(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(a.substr(kd,3)===wb?(h=wb,kd+=3):(h=Y,0===qd&&d(xb)),h!==Y?(i=O(),i!==Y?(j=A(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function A(){var b,c,e,f,g,h,i,j;if(b=kd,c=B(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(61===a.charCodeAt(kd)?(h=yb,kd++):(h=Y,0===qd&&d(zb)),h===Y&&(a.substr(kd,2)===Ab?(h=Ab,kd+=2):(h=Y,0===qd&&d(Bb))),h!==Y?(i=O(),i!==Y?(j=B(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(61===a.charCodeAt(kd)?(h=yb,kd++):(h=Y,0===qd&&d(zb)),h===Y&&(a.substr(kd,2)===Ab?(h=Ab,kd+=2):(h=Y,0===qd&&d(Bb))),h!==Y?(i=O(),i!==Y?(j=B(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function B(){var b,c,e,f,g,h,i,j;if(b=kd,c=C(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(a.substr(kd,2)===Cb?(h=Cb,kd+=2):(h=Y,0===qd&&d(Db)),h===Y&&(60===a.charCodeAt(kd)?(h=Eb,kd++):(h=Y,0===qd&&d(Fb)),h===Y&&(a.substr(kd,2)===Gb?(h=Gb,kd+=2):(h=Y,0===qd&&d(Hb)),h===Y&&(62===a.charCodeAt(kd)?(h=Ib,kd++):(h=Y,0===qd&&d(Jb))))),h!==Y?(i=O(),i!==Y?(j=C(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(a.substr(kd,2)===Cb?(h=Cb,kd+=2):(h=Y,0===qd&&d(Db)),h===Y&&(60===a.charCodeAt(kd)?(h=Eb,kd++):(h=Y,0===qd&&d(Fb)),h===Y&&(a.substr(kd,2)===Gb?(h=Gb,kd+=2):(h=Y,0===qd&&d(Hb)),h===Y&&(62===a.charCodeAt(kd)?(h=Ib,kd++):(h=Y,0===qd&&d(Jb))))),h!==Y?(i=O(),i!==Y?(j=C(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function C(){var b,c,e,f,g,h,i,j;if(b=kd,c=D(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(43===a.charCodeAt(kd)?(h=Kb,kd++):(h=Y,0===qd&&d(Lb)),h===Y&&(45===a.charCodeAt(kd)?(h=Mb,kd++):(h=Y,0===qd&&d(Nb))),h!==Y?(i=O(),i!==Y?(j=D(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(43===a.charCodeAt(kd)?(h=Kb,kd++):(h=Y,0===qd&&d(Lb)),h===Y&&(45===a.charCodeAt(kd)?(h=Mb,kd++):(h=Y,0===qd&&d(Nb))),h!==Y?(i=O(),i!==Y?(j=D(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function D(){var b,c,e,f,g,h,i,j;if(b=kd,c=E(),c!==Y){for(e=[],f=kd,g=O(),g!==Y?(h=I(),h===Y&&(a.substr(kd,3)===Ob?(h=Ob,kd+=3):(h=Y,0===qd&&d(Pb)),h===Y&&(a.substr(kd,3)===Qb?(h=Qb,kd+=3):(h=Y,0===qd&&d(Rb)))),h!==Y?(i=O(),i!==Y?(j=E(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);f!==Y;)e.push(f),f=kd,g=O(),g!==Y?(h=I(),h===Y&&(a.substr(kd,3)===Ob?(h=Ob,kd+=3):(h=Y,0===qd&&d(Pb)),h===Y&&(a.substr(kd,3)===Qb?(h=Qb,kd+=3):(h=Y,0===qd&&d(Rb)))),h!==Y?(i=O(),i!==Y?(j=E(),j!==Y?(g=[g,h,i,j],f=g):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_)):(kd=f,f=_);e!==Y?(ld=b,c=qb(c,e),b=c):(kd=b,b=_)}else kd=b,b=_;return b}function E(){var b,c,e,f;return b=kd,c=v(),c!==Y&&(ld=b,c=$a(c)),b=c,b===Y&&(b=kd,45===a.charCodeAt(kd)?(c=Mb,kd++):(c=Y,0===qd&&d(Nb)),c!==Y?(e=O(),e!==Y?(f=E(),f!==Y?(ld=b,c=Sb(f),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_)),b}function F(){var b,c,e,f;if(b=kd,34===a.charCodeAt(kd)?(c=Tb,kd++):(c=Y,0===qd&&d(Ub)),c!==Y){for(e=[],Vb.test(a.charAt(kd))?(f=a.charAt(kd),kd++):(f=Y,0===qd&&d(Wb));f!==Y;)e.push(f),Vb.test(a.charAt(kd))?(f=a.charAt(kd),kd++):(f=Y,0===qd&&d(Wb));e!==Y?(34===a.charCodeAt(kd)?(f=Tb,kd++):(f=Y,0===qd&&d(Ub)),f!==Y?(ld=b,c=Xb(e),b=c):(kd=b,b=_)):(kd=b,b=_)}else kd=b,b=_;if(b===Y)if(b=kd,39===a.charCodeAt(kd)?(c=Yb,kd++):(c=Y,0===qd&&d(Zb)),c!==Y){for(e=[],$b.test(a.charAt(kd))?(f=a.charAt(kd),kd++):(f=Y,0===qd&&d(_b));f!==Y;)e.push(f),$b.test(a.charAt(kd))?(f=a.charAt(kd),kd++):(f=Y,0===qd&&d(_b));e!==Y?(39===a.charCodeAt(kd)?(f=Yb,kd++):(f=Y,0===qd&&d(Zb)),f!==Y?(ld=b,c=Xb(e),b=c):(kd=b,b=_)):(kd=b,b=_)}else kd=b,b=_;return b}function G(){var b,c,e,f,g;return b=kd,c=H(),c!==Y?(e=kd,46===a.charCodeAt(kd)?(f=cb,kd++):(f=Y,0===qd&&d(db)),f!==Y?(g=H(),g===Y&&(g=da),g!==Y?(f=[f,g],e=f):(kd=e,e=_)):(kd=e,e=_),e===Y&&(e=da),e!==Y?(ld=b,c=ac(c,e),b=c):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,46===a.charCodeAt(kd)?(c=cb,kd++):(c=Y,0===qd&&d(db)),c!==Y?(e=H(),e!==Y?(ld=b,c=bc(e),b=c):(kd=b,b=_)):(kd=b,b=_)),b}function H(){var b,c,e;if(b=kd,c=[],cc.test(a.charAt(kd))?(e=a.charAt(kd),kd++):(e=Y,0===qd&&d(dc)),e!==Y)for(;e!==Y;)c.push(e),cc.test(a.charAt(kd))?(e=a.charAt(kd),kd++):(e=Y,0===qd&&d(dc));else c=_;return c!==Y&&(ld=b,c=ec(c)),b=c}function I(){var b;return 42===a.charCodeAt(kd)?(b=fc,kd++):(b=Y,0===qd&&d(gc)),b}function J(){var a,b,c;return a=kd,b=P(),b!==Y?(ld=kd,c=hc(b),c=c?ic:_,c!==Y?(ld=a,b=jc(b),a=b):(kd=a,a=_)):(kd=a,a=_),a}function K(){var b,c,e;return b=kd,36===a.charCodeAt(kd)?(c=kc,kd++):(c=Y,0===qd&&d(lc)),c!==Y?(e=P(),e!==Y?(ld=b,c=mc(e),b=c):(kd=b,b=_)):(kd=b,b=_),b}function L(){var b,c,e,f;return b=kd,42===a.charCodeAt(kd)?(c=fc,kd++):(c=Y,0===qd&&d(gc)),c!==Y&&(ld=b,c=nc()),b=c,b===Y&&(b=kd,c=S(),c!==Y?(58===a.charCodeAt(kd)?(e=oc,kd++):(e=Y,0===qd&&d(pc)),e!==Y?(42===a.charCodeAt(kd)?(f=fc,kd++):(f=Y,0===qd&&d(gc)),f!==Y?(ld=b,c=qc(c),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b===Y&&(b=kd,c=P(),c!==Y&&(ld=b,c=rc(c)),b=c)),b}function M(){var b;return a.substr(kd,7)===sc?(b=sc,kd+=7):(b=Y,0===qd&&d(tc)),b===Y&&(a.substr(kd,4)===uc?(b=uc,kd+=4):(b=Y,0===qd&&d(vc)),b===Y&&(a.substr(kd,22)===Sa?(b=Sa,kd+=22):(b=Y,0===qd&&d(Ta)),b===Y&&(a.substr(kd,4)===wc?(b=wc,kd+=4):(b=Y,0===qd&&d(xc))))),b}function N(){var b,c;if(b=[],yc.test(a.charAt(kd))?(c=a.charAt(kd),kd++):(c=Y,0===qd&&d(zc)),c!==Y)for(;c!==Y;)b.push(c),yc.test(a.charAt(kd))?(c=a.charAt(kd),kd++):(c=Y,0===qd&&d(zc));else b=_;return b}function O(){var a;return a=N(),a===Y&&(a=da),a}function P(){var a,b;return a=kd,b=Q(),b===Y&&(b=R()),b!==Y&&(ld=a,b=Ac(b)),a=b}function Q(){var b,c,e,f;return b=kd,c=S(),c!==Y?(58===a.charCodeAt(kd)?(e=oc,kd++):(e=Y,0===qd&&d(pc)),e!==Y?(f=S(),f!==Y?(ld=b,c=Bc(c,f),b=c):(kd=b,b=_)):(kd=b,b=_)):(kd=b,b=_),b}function R(){var a,b;return a=kd,b=S(),b!==Y&&(ld=a,b=Cc(b)),a=b}function S(){var a;return a=V()}function T(){var b;return Dc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Ec)),b===Y&&(95===a.charCodeAt(kd)?(b=Fc,kd++):(b=Y,0===qd&&d(Gc)),b===Y&&(Hc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Ic)),b===Y&&(Jc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Kc)),b===Y&&(Lc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Mc)),b===Y&&(Nc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Oc)),b===Y&&(Pc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Qc)),b===Y&&(Rc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Sc)),b===Y&&(Tc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Uc)),b===Y&&(Vc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Wc)),b===Y&&(Xc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(Yc)),b===Y&&(Zc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d($c)),b===Y&&(_c.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(ad)),b===Y&&(bd.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(cd))))))))))))))),b}function U(){var b;return b=T(),b===Y&&(45===a.charCodeAt(kd)?(b=Mb,kd++):(b=Y,0===qd&&d(Nb)),b===Y&&(46===a.charCodeAt(kd)?(b=cb,kd++):(b=Y,0===qd&&d(db)),b===Y&&(cc.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(dc)),b===Y&&(dd.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(ed)),b===Y&&(fd.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(gd)),b===Y&&(hd.test(a.charAt(kd))?(b=a.charAt(kd),kd++):(b=Y,0===qd&&d(id)))))))),b}function V(){var a,b,c,d;if(a=kd,b=T(),b!==Y){for(c=[],d=U();d!==Y;)c.push(d),d=U();c!==Y?(ld=a,b=jd(b,c),a=b):(kd=a,a=_)}else kd=a,a=_;return a}var W,X=arguments.length>1?arguments[1]:{},Y={},Z={XPath:f},$=f,_=Y,aa=function(a){return{tree:a,nsPrefixes:ud}},ba="/",ca={type:"literal",value:"/",description:'"/"'},da=null,ea=function(a){return{type:"/",args:[null,a?a[1]:null]}},fa="//",ga={type:"literal",value:"//",description:'"//"'},ha=function(a,b){var c;for(c=0;c<b.length;c++)a=xd(b[c][1],a,b[c][3]);return a},ia=function(a,b,c){return td({type:"step",args:[a,b]},a,c,1)},ja="::",ka={type:"literal",value:"::",description:'"::"'},la=function(a){return a},ma=function(a){return a.length?a:"child"},na="ancestor-or-self",oa={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},pa="ancestor",qa={type:"literal",value:"ancestor",description:'"ancestor"'},ra="attribute",sa={type:"literal",value:"attribute",description:'"attribute"'},ta="child",ua={type:"literal",value:"child",description:'"child"'},va="descendant-or-self",wa={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},xa="descendant",ya={type:"literal",value:"descendant",description:'"descendant"'},za="following-sibling",Aa={type:"literal",value:"following-sibling",description:'"following-sibling"'},Ba="following",Ca={type:"literal",value:"following",description:'"following"'},Da="namespace",Ea={type:"literal",value:"namespace",description:'"namespace"'},Fa="parent",Ga={type:"literal",value:"parent",description:'"parent"'},Ha="preceding-sibling",Ia={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},Ja="preceding",Ka={type:"literal",value:"preceding",description:'"preceding"'},La="self",Ma={type:"literal",value:"self",description:'"self"'},Na="(",Oa={type:"literal",value:"(",description:'"("'},Pa=")",Qa={type:"literal",value:")",description:'")"'},Ra=function(a){return{type:"nodeType",args:[a,[]]}},Sa="processing-instruction",Ta={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},Ua=function(a,b){return{type:"nodeType",args:[a,[b]]}},Va=function(a){return a},Wa="[",Xa={type:"literal",value:"[",description:'"["'},Ya="]",Za={type:"literal",value:"]",description:'"]"'},$a=function(a){return a},_a=function(a){return xd("//",null,a)},ab="..",bb={type:"literal",value:"..",description:'".."'},cb=".",db={type:"literal",value:".",description:'"."'},eb=function(a){var b={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==a&&(b.args[0]="parent"),b},fb="@",gb={type:"literal",value:"@",description:'"@"'},hb=function(a){return a?"attribute":""},ib=function(a){return a},jb=function(a){return a},kb=function(a){return a},lb=",",mb={type:"literal",value:",",description:'","'},nb=function(a,b){var c,d=[];if(b)for(d.push(b[1]),c=0;c<b[2].length;c++)d.push(b[2][c][3]);return{type:"function",args:[a,d]}},ob="|",pb={type:"literal",value:"|",description:'"|"'},qb=function(a,b){return sd(a,b,1,3)},rb=function(a,b){return b?xd(b[1],a,b[3]):a},sb=function(a){return a},tb=function(a,b){return td(a,"child",b,1)},ub="or",vb={type:"literal",value:"or",description:'"or"'},wb="and",xb={type:"literal",value:"and",description:'"and"'},yb="=",zb={type:"literal",value:"=",description:'"="'},Ab="!=",Bb={type:"literal",value:"!=",description:'"!="'},Cb="<=",Db={type:"literal",value:"<=",description:'"<="'},Eb="<",Fb={type:"literal",value:"<",description:'"<"'},Gb=">=",Hb={type:"literal",value:">=",description:'">="'},Ib=">",Jb={type:"literal",value:">",description:'">"'},Kb="+",Lb={type:"literal",value:"+",description:'"+"'},Mb="-",Nb={type:"literal",value:"-",description:'"-"'},Ob="div",Pb={type:"literal",value:"div",description:'"div"'},Qb="mod",Rb={type:"literal",value:"mod",description:'"mod"'},Sb=function(a){return{type:"*",args:[{type:"number",args:[-1]},a]}},Tb='"',Ub={type:"literal",value:'"',description:'"\\""'},Vb=/^[^"]/,Wb={type:"class",value:'[^"]',description:'[^"]'},Xb=function(a){return{type:"string",args:[a.join("")]}},Yb="'",Zb={type:"literal",value:"'",description:'"\'"'},$b=/^[^']/,_b={type:"class",value:"[^']",description:"[^']"},ac=function(a,b){return{type:"number",args:[b?parseFloat(a+"."+b[1]):parseInt(a)]}},bc=function(a){return{type:"number",args:[parseFloat("."+a)]}},cc=/^[0-9]/,dc={type:"class",value:"[0-9]",description:"[0-9]"},ec=function(a){return a.join("")},fc="*",gc={type:"literal",value:"*",description:'"*"'},hc=function(a){var b;if(null===rd.args[0])for(b=0;b<wd.length;b++)if(rd.args[1]==wd[b])return!1;return!0},ic=void 0,jc=function(a){return""===a.args[0]?a={type:a.type,args:[null,a.args[1]]}:vd(a.args[0]),a},kc="$",lc={type:"literal",value:"$",description:'"$"'},mc=function(a){return vd(a.args[0]),{type:"$",args:[a]}},nc=function(){return{type:"name",args:[null,null]}},oc=":",pc={type:"literal",value:":",description:'":"'},qc=function(a){return vd(a),{type:"name",args:[a,null]}},rc=function(a){return vd(a.args[0]),a},sc="comment",tc={type:"literal",value:"comment",description:'"comment"'},uc="text",vc={type:"literal",value:"text",description:'"text"'},wc="node",xc={type:"literal",value:"node",description:'"node"'},yc=/^[ \t\r\n]/,zc={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Ac=function(a){return rd=a,a},Bc=function(a,b){return{type:"name",args:[a,b]}},Cc=function(a){return{type:"name",args:[null,a]}},Dc=/^[A-Z]/,Ec={type:"class",value:"[A-Z]",description:"[A-Z]"},Fc="_",Gc={type:"literal",value:"_",description:'"_"'},Hc=/^[a-z]/,Ic={type:"class",value:"[a-z]",description:"[a-z]"},Jc=/^[\xC0-\xD6]/,Kc={type:"class",value:"[\\xC0-\\xD6]",description:"[\\xC0-\\xD6]"},Lc=/^[\xD8-\xF6]/,Mc={type:"class",value:"[\\xD8-\\xF6]",description:"[\\xD8-\\xF6]"},Nc=/^[\xF8-\u02FF]/,Oc={type:"class",value:"[\\xF8-\\u02FF]",description:"[\\xF8-\\u02FF]"},Pc=/^[\u0370-\u037D]/,Qc={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Rc=/^[\u037F-\u1FFF]/,Sc={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Tc=/^[\u200C-\u200D]/,Uc={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},Vc=/^[\u2070-\u218F]/,Wc={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},Xc=/^[\u2C00-\u2FEF]/,Yc={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},Zc=/^[\u3001-\uD7FF]/,$c={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},_c=/^[\uF900-\uFDCF]/,ad={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},bd=/^[\uFDF0-\uFFFD]/,cd={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},dd=/^[\xB7]/,ed={type:"class",value:"[\\xB7]",description:"[\\xB7]"},fd=/^[\u0300-\u036F]/,gd={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},hd=/^[\u203F-\u2040]/,id={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},jd=function(a,b){return a+b.join("")},kd=0,ld=0,md=0,nd={line:1,column:1,seenCR:!1},od=0,pd=[],qd=0;if("startRule"in X){if(!(X.startRule in Z))throw new Error("Can't start parsing from rule \""+X.startRule+'".');$=Z[X.startRule]}var rd,sd=function(a,b,c,d){var e,f,g={type:"",args:[]};for(g.args.push(a),e=0;e<b.length;e++){switch(typeof c){case"string":g.type=c;break;case"object":for(g.type=b[e][c[0]],f=1;f<c.length;f++)g.type=g.type[c[f]];break;default:g.type=b[e][c]}g.args.push("undefined"==typeof d?b[e]:b[e][d]),g={type:"",args:[g]}}return g.args[0]},td=function(a,b,c,d){var e=[];if(c.length<1)return a;for(i=0;i<c.length;i++)e.push(c[i][d]);return{type:"predicate",args:[b,a,e]}},ud=[],vd=function(a){var b,c=!1;if(null!==a){for(b=0;b<ud.length;b++)if(ud[b]===a){c=!0;break}c||ud.push(a)}},wd=["comment","text","processing-instruction","node"],xd=function(a,b,c){return"/"==a?{type:"/",args:[b,c]}:{type:"/",args:[{type:"/",args:[b,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},c]}};if(W=$(),W!==Y&&kd===a.length)return W;throw W!==Y&&kd<a.length&&d({type:"end",description:"end of input"}),e(null,pd,od)}return a(b,Error),{SyntaxError:b,parse:c}}(),function(a,c){"function"==typeof define&&define.amd?define([],c):"object"==typeof b&&b.exports?b.exports=c():a.returnExports=c()}(this,function(){return d})},{}],6:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],7:[function(a,b,c){!function(c){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],c):c("undefined"!=typeof b&&b.exports?a("jquery"):jQuery)}(function(a){function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=k),void 0!==b.click&&void 0===b.tap&&(b.tap=b.click),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(C);e||(e=new c(this,b),d.data(C,e))})}function c(b,c){function d(b){if(!(ja()||a(b.target).closest(c.excludedElements,Sa).length>0)){var d,e=b.originalEvent?b.originalEvent:b,f=e.touches,g=f?f[0]:e;return Ta=v,f?Ua=f.length:c.preventDefaultEvents!==!1&&b.preventDefault(),Ia=0,Ja=null,Ka=null,Qa=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Ra=qa(),ha(),la(0,g),!f||Ua===c.fingers||c.fingers===t||R()?(Wa=za(),2==Ua&&(la(1,f[1]),Ma=Na=ta(Va[0].start,Va[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=J(e,Ta))):d=!1,d===!1?(Ta=y,J(e,Ta),d):(c.hold&&(ab=setTimeout(a.proxy(function(){Sa.trigger("hold",[e.target]),c.hold&&(d=c.hold.call(Sa,e,e.target))},this),c.longTapThreshold)),ka(!0),null)}}function D(a){var b=a.originalEvent?a.originalEvent:a;if(Ta!==x&&Ta!==y&&!ia()){var d,e=b.touches,f=e?e[0]:b,g=ma(f);if(Xa=za(),e&&(Ua=e.length),c.hold&&clearTimeout(ab),Ta=w,2==Ua&&(0==Ma?(la(1,e[1]),Ma=Na=ta(Va[0].start,Va[1].start)):(ma(e[1]),Na=ta(Va[0].end,Va[1].end),Qa=va(Va[0].end,Va[1].end)),Oa=ua(Ma,Na),Pa=Math.abs(Ma-Na)),Ua===c.fingers||c.fingers===t||!e||R()){if(Ja=ya(g.start,g.end),Ka=ya(g.last,g.end),P(a,Ka),Ia=wa(g.start,g.end),La=sa(),oa(Ja,Ia),d=J(b,Ta),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var h=!0;if(c.triggerOnTouchLeave){var i=Aa(this);h=Ba(g.end,i)}!c.triggerOnTouchEnd&&h?Ta=I(w):c.triggerOnTouchLeave&&!h&&(Ta=I(x)),Ta!=y&&Ta!=x||J(b,Ta)}}else Ta=y,J(b,Ta);d===!1&&(Ta=y,J(b,Ta))}}function E(a){var b=a.originalEvent?a.originalEvent:a,d=b.touches;if(d){if(d.length&&!ia())return ga(b),!0;if(d.length&&ia())return!0}return ia()&&(Ua=Za),Xa=za(),La=sa(),M()||!L()?(Ta=y,J(b,Ta)):c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&Ta===w?(c.preventDefaultEvents!==!1&&a.preventDefault(),Ta=x,J(b,Ta)):!c.triggerOnTouchEnd&&Y()?(Ta=x,K(b,Ta,o)):Ta===w&&(Ta=y,J(b,Ta)),ka(!1),null}function F(){Ua=0,Xa=0,Wa=0,Ma=0,Na=0,Oa=1,ha(),ka(!1)}function G(a){var b=a.originalEvent?a.originalEvent:a;c.triggerOnTouchLeave&&(Ta=I(x),J(b,Ta))}function H(){Sa.unbind(Da,d),Sa.unbind(Ha,F),Sa.unbind(Ea,D),Sa.unbind(Fa,E),Ga&&Sa.unbind(Ga,G),ka(!1)}function I(a){var b=a,d=O(),e=L(),f=M();return!d||f?b=y:!e||a!=w||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==x&&c.triggerOnTouchLeave&&(b=y):b=x,b}function J(a,b){var c,d=a.touches;return(V()||U())&&(c=K(a,b,m)),(S()||R())&&c!==!1&&(c=K(a,b,n)),ea()&&c!==!1?c=K(a,b,p):fa()&&c!==!1?c=K(a,b,q):da()&&c!==!1&&(c=K(a,b,o)),b===y&&(U()&&(c=K(a,b,m)),R()&&(c=K(a,b,n)),F(a)),b===x&&(d?d.length||F(a):F(a)),c}function K(b,d,k){var l;if(k==m){if(Sa.trigger("swipeStatus",[d,Ja||null,Ia||0,La||0,Ua,Va,Ka]),c.swipeStatus&&(l=c.swipeStatus.call(Sa,b,d,Ja||null,Ia||0,La||0,Ua,Va,Ka),l===!1))return!1;if(d==x&&T()){if(clearTimeout(_a),clearTimeout(ab),Sa.trigger("swipe",[Ja,Ia,La,Ua,Va,Ka]),c.swipe&&(l=c.swipe.call(Sa,b,Ja,Ia,La,Ua,Va,Ka),l===!1))return!1;switch(Ja){case e:Sa.trigger("swipeLeft",[Ja,Ia,La,Ua,Va,Ka]),c.swipeLeft&&(l=c.swipeLeft.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case f:Sa.trigger("swipeRight",[Ja,Ia,La,Ua,Va,Ka]),c.swipeRight&&(l=c.swipeRight.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case g:Sa.trigger("swipeUp",[Ja,Ia,La,Ua,Va,Ka]),c.swipeUp&&(l=c.swipeUp.call(Sa,b,Ja,Ia,La,Ua,Va,Ka));break;case h:Sa.trigger("swipeDown",[Ja,Ia,La,Ua,Va,Ka]),c.swipeDown&&(l=c.swipeDown.call(Sa,b,Ja,Ia,La,Ua,Va,Ka))}}}if(k==n){if(Sa.trigger("pinchStatus",[d,Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchStatus&&(l=c.pinchStatus.call(Sa,b,d,Qa||null,Pa||0,La||0,Ua,Oa,Va),l===!1))return!1;if(d==x&&Q())switch(Qa){case i:Sa.trigger("pinchIn",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchIn&&(l=c.pinchIn.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va));
break;case j:Sa.trigger("pinchOut",[Qa||null,Pa||0,La||0,Ua,Oa,Va]),c.pinchOut&&(l=c.pinchOut.call(Sa,b,Qa||null,Pa||0,La||0,Ua,Oa,Va))}}return k==o?d!==y&&d!==x||(clearTimeout(_a),clearTimeout(ab),Z()&&!aa()?($a=za(),_a=setTimeout(a.proxy(function(){$a=null,Sa.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sa,b,b.target))},this),c.doubleTapThreshold)):($a=null,Sa.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sa,b,b.target)))):k==p?d!==y&&d!==x||(clearTimeout(_a),clearTimeout(ab),$a=null,Sa.trigger("doubletap",[b.target]),c.doubleTap&&(l=c.doubleTap.call(Sa,b,b.target))):k==q&&(d!==y&&d!==x||(clearTimeout(_a),$a=null,Sa.trigger("longtap",[b.target]),c.longTap&&(l=c.longTap.call(Sa,b,b.target)))),l}function L(){var a=!0;return null!==c.threshold&&(a=Ia>=c.threshold),a}function M(){var a=!1;return null!==c.cancelThreshold&&null!==Ja&&(a=pa(Ja)-Ia>=c.cancelThreshold),a}function N(){return null!==c.pinchThreshold?Pa>=c.pinchThreshold:!0}function O(){var a;return a=c.maxTimeThreshold?!(La>=c.maxTimeThreshold):!0}function P(a,b){if(c.preventDefaultEvents!==!1)if(c.allowPageScroll===k)a.preventDefault();else{var d=c.allowPageScroll===l;switch(b){case e:(c.swipeLeft&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case f:(c.swipeRight&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case g:(c.swipeUp&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault();break;case h:(c.swipeDown&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault()}}}function Q(){var a=W(),b=X(),c=N();return a&&b&&c}function R(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function S(){return!(!Q()||!R())}function T(){var a=O(),b=L(),c=W(),d=X(),e=M(),f=!e&&d&&c&&b&&a;return f}function U(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function V(){return!(!T()||!U())}function W(){return Ua===c.fingers||c.fingers===t||!z}function X(){return 0!==Va[0].end.x}function Y(){return!!c.tap}function Z(){return!!c.doubleTap}function $(){return!!c.longTap}function _(){if(null==$a)return!1;var a=za();return Z()&&a-$a<=c.doubleTapThreshold}function aa(){return _()}function ba(){return(1===Ua||!z)&&(isNaN(Ia)||Ia<c.threshold)}function ca(){return La>c.longTapThreshold&&u>Ia}function da(){return!(!ba()||!Y())}function ea(){return!(!_()||!Z())}function fa(){return!(!ca()||!$())}function ga(a){Ya=za(),Za=a.touches.length+1}function ha(){Ya=0,Za=0}function ia(){var a=!1;if(Ya){var b=za()-Ya;b<=c.fingerReleaseThreshold&&(a=!0)}return a}function ja(){return!(Sa.data(C+"_intouch")!==!0)}function ka(a){Sa&&(a===!0?(Sa.bind(Ea,D),Sa.bind(Fa,E),Ga&&Sa.bind(Ga,G)):(Sa.unbind(Ea,D,!1),Sa.unbind(Fa,E,!1),Ga&&Sa.unbind(Ga,G,!1)),Sa.data(C+"_intouch",a===!0))}function la(a,b){var c={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return c.start.x=c.last.x=c.end.x=b.pageX||b.clientX,c.start.y=c.last.y=c.end.y=b.pageY||b.clientY,Va[a]=c,c}function ma(a){var b=void 0!==a.identifier?a.identifier:0,c=na(b);return null===c&&(c=la(b,a)),c.last.x=c.end.x,c.last.y=c.end.y,c.end.x=a.pageX||a.clientX,c.end.y=a.pageY||a.clientY,c}function na(a){return Va[a]||null}function oa(a,b){b=Math.max(b,pa(a)),Ra[a].distance=b}function pa(a){return Ra[a]?Ra[a].distance:void 0}function qa(){var a={};return a[e]=ra(e),a[f]=ra(f),a[g]=ra(g),a[h]=ra(h),a}function ra(a){return{direction:a,distance:0}}function sa(){return Xa-Wa}function ta(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function ua(a,b){var c=b/a*1;return c.toFixed(2)}function va(){return 1>Oa?j:i}function wa(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function xa(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return 0>f&&(f=360-Math.abs(f)),f}function ya(a,b){var c=xa(a,b);return 45>=c&&c>=0?e:360>=c&&c>=315?e:c>=135&&225>=c?f:c>45&&135>c?h:g}function za(){var a=new Date;return a.getTime()}function Aa(b){b=a(b);var c=b.offset(),d={left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()};return d}function Ba(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var c=a.extend({},c),Ca=z||B||!c.fallbackToMouseEvents,Da=Ca?B?A?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ea=Ca?B?A?"MSPointerMove":"pointermove":"touchmove":"mousemove",Fa=Ca?B?A?"MSPointerUp":"pointerup":"touchend":"mouseup",Ga=Ca?B?"mouseleave":null:"mouseleave",Ha=B?A?"MSPointerCancel":"pointercancel":"touchcancel",Ia=0,Ja=null,Ka=null,La=0,Ma=0,Na=0,Oa=1,Pa=0,Qa=0,Ra=null,Sa=a(b),Ta="start",Ua=0,Va={},Wa=0,Xa=0,Ya=0,Za=0,$a=0,_a=null,ab=null;try{Sa.bind(Da,d),Sa.bind(Ha,F)}catch(bb){a.error("events not supported "+Da+","+Ha+" on jQuery.swipe")}this.enable=function(){return Sa.bind(Da,d),Sa.bind(Ha,F),Sa},this.disable=function(){return H(),Sa},this.destroy=function(){H(),Sa.data(C,null),Sa=null},this.option=function(b,d){if("object"==typeof b)c=a.extend(c,b);else if(void 0!==c[b]){if(void 0===d)return c[b];c[b]=d}else{if(!b)return c;a.error("Option "+b+" does not exist on jQuery.swipe.options")}return null}}var d="1.6.15",e="left",f="right",g="up",h="down",i="in",j="out",k="none",l="auto",m="swipe",n="pinch",o="tap",p="doubletap",q="longtap",r="horizontal",s="vertical",t="all",u=10,v="start",w="move",x="end",y="cancel",z="ontouchstart"in window,A=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!z,B=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!z,C="TouchSwipe",D={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};a.fn.swipe=function(c){var d=a(this),e=d.data(C);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(e&&"object"==typeof c)e.option.apply(this,arguments);else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.version=d,a.fn.swipe.defaults=D,a.fn.swipe.phases={PHASE_START:v,PHASE_MOVE:w,PHASE_END:x,PHASE_CANCEL:y},a.fn.swipe.directions={LEFT:e,RIGHT:f,UP:g,DOWN:h,IN:i,OUT:j},a.fn.swipe.pageScroll={NONE:k,HORIZONTAL:r,VERTICAL:s,AUTO:l},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:t}})},{jquery:9}],8:[function(a,b,c){!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof c?a("jquery"):jQuery)}(function(a,b){a.fn.getXPath=function(a,b){var c,d=[],e="",f=this.first(),g=f.prop("nodeName"),h=f.parent(),i=h.prop("nodeName");for(a=a||"#document",b=b||!1,b&&(c=f.siblings(g).addBack(),e=c.length>1?"["+(c.index(f)+1)+"]":""),d.push(g+e);1==h.length&&i!==a&&"#document"!==i;)b&&(c=h.siblings(i).addBack(),e=c.length>1?"["+(c.index(h)+1)+"]":""),d.push(i+e),h=h.parent(),i=h.prop("nodeName");return"/"+d.reverse().join("/")},a.fn.xfind=function(a){var b,c,d;if(a=a.replace(/\/\//g," "),a=a.replace(/^\//,""),a=a.replace(/\/\.$/,""),a=a.replace(/\//g,">"),a=a.replace(/\[([^@].*?)\]/g,function(a,b){return":has("+b+")"}),a.indexOf(">..")>=0){for(b=a.split(/>\.\.>?/g),c=jQuery(b[0],this),d=1;d<b.length;d++)c=c.parent(b[d]);return c.get()}return a=a.replace(/\./gi,"\\."),this.find(a)}})},{jquery:9}],9:[function(a,b,c){!function(a,c){"object"==typeof b&&"object"==typeof b.exports?b.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=_.type(a);return"function"===c||_.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c}catch(e){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.4",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==_.type(a)||a.nodeType||_.isWindow(a)?!1:!a.constructor||X.call(a.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue;
}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(f.namespace)||(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||_.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),
_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):_.isFunction(a)?this.each(function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==za&&"boolean"!==c||(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)}}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(Y.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return b&&!b.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,!a&&w||(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return _.isFunction(a)?this.each(function(b){_(this).wrapInner(a.call(this,b))}):this.each(function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;return Y.cors||Fb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_})},{}],10:[function(a,b,c){!function(a,c,d){var e=a.L,f={};f.version="0.7.7","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return a.L=e,this},a.L=f,f.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=f.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,d,g,h){return b=f.bind(b,d),g&&e===c?void b():e.call(a,b,h)},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=f.extend({},d.options,a.options)),f.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){f.extend(this.prototype,a)},f.Class.mergeOptions=function(a){f.extend(this.prototype.options,a)},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var g="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m=this[g]=this[g]||{},n=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[g];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[g])return this;if(!a)return this.clearAllEventListeners();if(f.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;
var d,e,h,i,j,k,l,m,n,o=this[g],p=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=f.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,e,h,i,j=f.Util.extend({},b,{type:a,target:this}),k=this[g];if(k[a])for(c=k[a].slice(),d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=f.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var b="ActiveXObject"in a,e=b&&!c.addEventListener,g=navigator.userAgent.toLowerCase(),h=-1!==g.indexOf("webkit"),i=-1!==g.indexOf("chrome"),j=-1!==g.indexOf("phantom"),k=-1!==g.indexOf("android"),l=-1!==g.search("android [23]"),m=-1!==g.indexOf("gecko"),n=typeof orientation!=d+"",o=!a.PointerEvent&&a.MSPointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=c.documentElement,s=b&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&(p||"ontouchstart"in a||a.DocumentTouch&&c instanceof a.DocumentTouch);f.Browser={ie:b,ielt9:e,webkit:h,gecko:m&&!h&&!a.opera&&!b,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=f.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b];if(!d&&a.currentStyle&&(d=a.currentStyle[b]),(!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},getViewportOffset:function(a){var b,d=0,e=0,g=a,h=c.body,i=c.documentElement;do{if(d+=g.offsetTop||0,e+=g.offsetLeft||0,d+=parseInt(f.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(f.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=f.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===b)break;if("fixed"===b){d+=h.scrollTop||i.scrollTop||0,e+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===b&&!g.offsetLeft){var j=f.DomUtil.getStyle(g,"width"),k=f.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();"none"===j&&"none"===k||(e+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,e-=g.scrollLeft||0,g=g.parentNode}while(g);return new f.Point(e,d)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(c.body,"direction")),f.DomUtil._docIsLtr},create:function(a,b,d){var e=c.createElement(a);return e.className=b,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==d)return a.classList.contains(b);var c=f.DomUtil._getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==d)for(var c=f.Util.splitWords(b),e=0,g=c.length;g>e;e++)a.classList.add(c[e]);else if(!f.DomUtil.hasClass(a,b)){var h=f.DomUtil._getClass(a);f.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==d?a.classList.remove(b):f.DomUtil._setClass(a,f.Util.trim((" "+f.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===d?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===d?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},getTranslateString:function(a){var b=f.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=f.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&f.Browser.any3d?a.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in c)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(a,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(a,"selectstart",f.DomEvent.preventDefault)}});else{var b=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(b){var a=c.documentElement.style;this._userSelect=a[b],a[b]="none"}},enableTextSelection:function(){b&&(c.documentElement.style[b]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(a,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(a,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(a,b,c){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,c!==d&&(this.alt=parseFloat(c))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(a){if(!a)return!1;a=f.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=f.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=f.latLng(a);var b=6378137,c=f.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,e=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(e/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new f.LatLng(this.lat,c)}},f.latLng=function(a,b){return a instanceof f.LatLng?a:f.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new f.LatLng(a[0],a[1],a[2]):null:a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===d?null:new f.LatLng(a,b)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=f.latLng(a);return a=null!==b?b:f.latLngBounds(a),a instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new f.LatLng(a.lat,a.lng),this._northEast=new f.LatLng(a.lat,a.lng)):a instanceof f.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof f.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return!a||a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new f.Point(e,g)},unproject:function(a){var b=f.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new f.LatLng(d,c)}},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)}},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return f.point(b,b)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===d?this.getZoom():b,this._resetView(f.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d));e=b.maxZoom?Math.min(b.maxZoom,e):e;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return this.setView(j,e,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(f.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=f.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=f.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?f.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),g=d.subtract(e);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=d}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===d?this._layersMinZoom===d?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===d?this._layersMaxZoom===d?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a);var d,e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=f.point(c||[0,0]);do e++,d=this.project(j,e).subtract(this.project(i,e)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=e);return k&&b?null:b?e:e-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new f.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,b),f.DomUtil.addClass(a.shadowPane,b),f.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return f.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var e=this._zoom!==b;d||(this.fire("movestart"),e&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(e||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(c=Math.max(c,f.options.maxZoom))}a===d?this._layersMaxZoom=this._layersMinZoom=d:(this._layersMaxZoom=c,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){b=b||"on",f.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=e.length;d>c;c++)f.DomEvent[b](this._container,e[c],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!f.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&f.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),e=this.layerPointToLatLng(d);this.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),g=new f.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new f.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),e=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-e.x),h=this._rebound(d.y,-e.y);return new f.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),f.map=function(a,b){return new f.Map(a,b)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*e,i=d*b,j=g/e,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-e*Math.log(m),new f.Point(h,i)},unproject:function(a){for(var b,c=f.LatLng.RAD_TO_DEG,d=this.R_MAJOR,e=this.R_MINOR,g=a.x*c/d,h=e/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new f.LatLng(k*c,g)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=f.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new f.Transformation(c,.5,-c,.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(a,b){b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=f.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-(1/0));for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(f.Browser.ielt9)for(a in b)f.DomUtil.setOpacity(b[a],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",b,this._container),this._tileContainer=f.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var e=f.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(e),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(e)}}},_addTilesFromCenterOut:function(a){var b,d,e,g=[],h=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(d=a.min.x;d<=a.max.x;d++)e=new f.Point(d,b),this._tileShouldBeLoaded(e)&&g.push(e);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h);
});var j=c.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;i>d;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=this._getTileSize(),e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(f.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),f.Browser.android||(b.onload=null,b.src=f.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();f.DomUtil.setPosition(d,c,f.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return f.Util.template(this._url,f.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=f.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==d&&f.DomUtil.setOpacity(a,this.options.opacity),f.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&f.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(c[e]=b[e]);this.wmsParams=c,f.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),e=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(e,a.z)),i=this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=f.Util.template(this._url,{s:this._getSubdomain(a)});return j+f.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(a){f.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=f.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=f.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),f.tileLayer.canvas=function(a){return new f.TileLayer.Canvas(a)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&f.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),e=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(e,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);f.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({options:{className:""},initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,e=f.point(d[b+"Size"]);c="shadow"===b?f.point(d.shadowAnchor||d.iconAnchor):f.point(d.iconAnchor),!c&&e&&(c=e.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||c.createElement("img"),b.src=a,b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];f.Browser.retina&&"icon"===a&&(a+="-2x");var c=f.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),f.Icon.Default.imagePath=function(){var a,b,d,e,f,g=c.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,b=g.length;b>a;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),g=!1;e!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt)),f.DomUtil.addClass(e,d),a.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),a.riseOnHover&&f.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&f.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(a,"leaflet-clickable"),f.DomEvent.on(a,"click",this._onMouseClick,this),f.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)f.DomEvent.on(a,b[c],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&f.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&f.DomEvent.preventDefault(a),"mousedown"!==a.type?f.DomEvent.stopPropagation(a):f.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;return d.html!==!1?b.innerHTML=d.html:b.innerHTML="",d.bgPos&&(b.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){f.setOptions(this,a),this._source=b,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&f.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=f.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=f.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",f.DomEvent.disableClickPropagation(a),f.DomEvent.on(a,"click",this._onCloseButtonClick,this));var e=this._wrapper=f.DomUtil.create("div",b+"-content-wrapper",d);f.DomEvent.disableClickPropagation(e),this._contentNode=f.DomUtil.create("div",b+"-content",e),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(e,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",b+"-tip-container",d),this._tip=f.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=f.point(this.options.offset);b&&f.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);f.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new f.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(f.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(d),g=f.point(this.options.autoPanPadding),h=f.point(this.options.autoPanPaddingTopLeft||g),i=f.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;e.x+c+i.x>j.x&&(k=e.x+c-j.x+i.x),e.x-k-h.x<0&&(k=e.x-h.x),e.y+b+i.y>j.y&&(l=e.y+b-j.y+i.y),e.y-l-h.y<0&&(l=e.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof f.Popup)){var d=a;a=new f.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=f.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(f.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=f.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof f.Popup?(f.setOptions(a,b),this._popup=a,a._source=this):this._popup=new f.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),"off"in a&&a.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof f.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=f.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:function(){var b=f.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){f.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return f.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var a=f.Path.CLIP_PADDING,b=this.getSize(),c=f.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),e=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new f.Bounds(d,e)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!c.createElementNS||!c.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return c.createElementNS(f.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!f.Browser.svg&&f.Browser.vml||f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)f.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this._map&&this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),e=b.layerPointToLatLng(d);this.fire(a.type,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&f.DomEvent.preventDefault(a),"mousemove"!==a.type&&f.DomEvent.stopPropagation(a)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,e=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;f.Browser.mobileWebkit&&h.removeChild(g),f.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",e),g.setAttribute("viewBox",[b.x,b.y,d,e].join(" ")),f.Browser.mobileWebkit&&h.appendChild(g)}}}),f.Path.include({bindPopup:function(a,b){return a instanceof f.Popup?this._popup=a:(this._popup&&!b||(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(d){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");f.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=f.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=c.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return f.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),
this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color),a.lineCap&&(this._ctx.lineCap=a.lineCap),a.lineJoin&&(this._ctx.lineJoin=a.lineJoin)},_drawPath:function(){var a,b,c,d,e,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,d=this._parts[a].length;d>b;b++)e=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](e.x,e.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill(b.fillRule||"evenodd")),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(a){this._containsPoint(a.layerPoint)&&this.fire(a.type,a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),f.Map.include(f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var a,b=this._pathRoot;b||(b=this._pathRoot=c.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;f.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;c>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var e=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new f.Point(a.x+e*(i.y-a.y)/g,i.y):4&c?new f.Point(a.x+e*(h.y-a.y)/g,h.y):2&c?new f.Point(i.x,a.y+g*(i.x-a.x)/e):1&c?new f.Point(h.x,a.y+g*(h.x-a.x)/e):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-g)*i+(a.y-h)*j)/k,e>1?(g=c.x,h=c.y):e>0&&(g+=i*e,h+=j*e)),i=a.x-g,j=a.y-h,d?i*i+j*j:new f.Point(g,h)}},f.Polyline=f.Path.extend({initialize:function(a,b){f.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(f.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,e=this._parts,g=null,h=0,i=e.length;i>h;h++)for(var j=e[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=f.LineUtil._sqClosestPointOnSegment(a,b,c,!0);d>m&&(d=m,g=f.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,e=b?a:[];for(c=0,d=a.length;d>c;c++){if(f.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;e[c]=f.latLng(a[c])}return e},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=f.Path.VML,d=0,e=a.length,g="";e>d;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,e=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=f.LineUtil;for(a=0,b=0;e-1>a;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),c[1]===d[a+1]&&a!==e-2||(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=f.LineUtil,c=0,d=a.length;d>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b){var c,d,e,g,h,i,j,k,l,m=[1,4,2,8],n=f.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,e=j-1;j>d;e=d++)h=a[d],i=a[e],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(a,b){f.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;c>b;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;d>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;d>c;c++){var e=f.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);e.length&&b.push(e)}this._parts=b}},_getPathPartStr:function(a){var b=f.Polyline.prototype._getPathPartStr.call(this,a);return b+(f.Browser.svg?"z":"x")}}),f.polygon=function(a,b){return new f.Polygon(a,b)},function(){function a(a){return f.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}f.MultiPolyline=a(f.Polyline),f.MultiPolygon=a(f.Polygon),f.multiPolyline=function(a,b){return new f.MultiPolyline(a,b)},f.multiPolygon=function(a,b){return new f.MultiPolygon(a,b)}}(),f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.Circle=f.Path.extend({initialize:function(a,b,c){f.Path.prototype.initialize.call(this,c),this._latlng=f.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new f.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){f.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return f.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(a,b){var c,d,e,g,h,i,j,k=this.options.weight/2;for(f.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],d=0,h=j.length,e=h-1;h>d;e=d++)if((b||0!==d)&&(i=f.LineUtil.pointToSegmentDistance(a,j[e],j[d]),k>=i))return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(a){var b,c,d,e,g,h,i,j,k=!1;if(f.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(e=0,i=this._parts.length;i>e;e++)for(b=this._parts[e],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=f.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(e[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=f.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=f.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(f.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b,c,d){var e,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return e=c(k),b?b(a,e):new f.Marker(e);case"MultiPoint":for(h=0,i=k.length;i>h;h++)e=c(k[h]),l.push(b?b(a,e):new f.Marker(e));return new f.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new f.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new f.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new f.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new f.MultiPolygon(g,d);case"GeometryCollection":for(h=0,i=j.geometries.length;i>h;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new f.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==d&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(f.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var h={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(h),f.Circle.include(h),f.CircleMarker.include(h),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var a,b,c,d=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=f.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:a,coordinates:b})}}f.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var e=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(e?b.geometry:f.GeoJSON.asFeature(b)))}),e?f.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),f.geoJson=function(a,b){return new f.GeoJSON(a,b)},f.DomEvent={addListener:function(a,b,c,d){var e,g,h,i=f.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(e=function(b){return c.call(d||a,b||f.DomEvent._getEvent())},f.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,e,i):(f.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,e,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",e,!1),a.addEventListener(b,e,!1)):"mouseenter"===b||"mouseleave"===b?(g=e,h="mouseenter"===b?"mouseover":"mouseout",e=function(b){return f.DomEvent._checkMouse(a,b)?g(b):void 0},a.addEventListener(h,e,!1)):"click"===b&&f.Browser.android?(g=e,e=function(a){return f.DomEvent._filterClick(a,g)},a.addEventListener(b,e,!1)):a.addEventListener(b,e,!1):"attachEvent"in a&&a.attachEvent("on"+b,e),a[j]=e,this))},removeListener:function(a,b,c){var d=f.stamp(c),e="_leaflet_"+b+d,g=a[e];return g?(f.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,f.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=f.DomEvent.stopPropagation;return f.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=f.DomEvent.stopPropagation,c=f.Draggable.START.length-1;c>=0;c--)f.DomEvent.on(a,f.Draggable.START[c],b);return f.DomEvent.on(a,"click",f.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new f.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new f.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){f.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,b(a))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(f.DomEvent.stopPropagation(a),!f.Draggable._disabled&&(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),!this._moving))){var b=a.touches?a.touches[0]:a;this._startPoint=new f.Point(b.clientX,b.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var b=a.touches&&1===a.touches.length?a.touches[0]:a,d=new f.Point(b.clientX,b.clientY),e=d.subtract(this._startPoint);(e.x||e.y)&&(f.Browser.touch&&Math.abs(e.x)+Math.abs(e.y)<3||(f.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(e),f.DomUtil.addClass(c.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,f.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){f.DomUtil.removeClass(c.body,"leaflet-dragging"),this._lastTarget&&(f.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[a],this._onMove).off(c,f.Draggable.END[a],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,e=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),e)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),f.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),c),f.DomEvent.preventDefault(a),f.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(f.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(f.Browser.pointer){var c=o.indexOf(a.pointerId);if(-1===c)return;o.splice(c,1)}if(j){if(f.Browser.pointer){var d,e={};for(var g in i)d=i[g],"function"==typeof d?e[g]=d.bind(i):e[g]=d;i=e}i.type="dblclick",b(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=e,a[l+n+d]=g;var p=f.Browser.pointer?c.documentElement:a;return a.addEventListener(m,e,!1),p.addEventListener(n,g,!1),f.Browser.pointer&&p.addEventListener(f.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+b],!1),(f.Browser.pointer?c.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+b],!1),f.Browser.pointer&&c.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,a[d+this._touchend+b],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,b,d,e){var g="_leaflet_",h=this._pointers,i=function(a){"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&f.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+e]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};c.documentElement.addEventListener(this.POINTER_UP,j,!1),c.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2),this._startDist=d.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),b._panAnim&&b._panAnim.stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!b.options.bounceAtZoomLimits&&(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1)||(this._moved||(f.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(a)))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,f.DomUtil.removeClass(a._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(e+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,b,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a);
}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),f.DomEvent.on(c,"touchmove",this._onMove,this).on(c,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,"touchmove",this._onMove,this).off(c,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void f.DomEvent.on(c,"mousemove",this._onMouseMove,this).on(c,"mouseup",this._onMouseUp,this).on(c,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),e=d.subtract(b),g=new f.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));f.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(e.x)-4)+"px",c.style.height=Math.max(0,Math.abs(e.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,"mousemove",this._onMouseMove).off(c,"mouseup",this._onMouseUp).off(c,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new f.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),f.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;f.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}f.DomEvent.stop(a)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=f.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&f.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,e){var g=c+a+" "+c+e;b[a+e]=f.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=f.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e,g){var h=f.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=f.DomEvent.stopPropagation;return f.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",f.DomEvent.preventDefault).on(h,"click",e,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){f.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=f.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(b,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=f.DomUtil.create("form",a+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",f.Browser.touch?f.DomEvent.on(d,"click",f.DomEvent.stop).on(d,"click",this._expand,this):f.DomEvent.on(d,"focus",this._expand,this),f.DomEvent.on(c,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",a+"-base",c),this._separator=f.DomUtil.create("div",a+"-separator",c),this._overlaysList=f.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=f.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[f.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(d+=' checked="checked"'),d+="/>";var e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var b,d=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=c.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e),b.layerId=f.stamp(a.layer),f.DomEvent.on(b,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name,d.appendChild(b),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[f.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",f.DomEvent.on(a,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(a,b),f.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,e=this._el,g=a.getComputedStyle(e);if(f.Browser.any3d){if(d=g[f.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new f.Point(b,c,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(a,b,c){if(b=b===d?this._zoom:this._limitZoom(b),a=this._limitCenter(f.latLng(a),b,this.options.maxBounds),c=c||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));f.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return c.animate===!0||this.getSize().contains(e)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0):!1},_animateZoom:function(a,b,c,d,e,g,h){h||(this._animatingZoom=!0),f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,f.Draggable&&(f.Draggable._disabled=!0),f.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:e,backwards:g}),setTimeout(f.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),f.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)},this))}}:{}),f.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=f.DomUtil.TRANSFORM,d=a.delta?f.DomUtil.getTranslateString(a.delta):b.style[c],e=f.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?e+" "+d:d+" "+e},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),f.Util.falseFn(b.offsetWidth);var c=this._map.getZoom();(c>this.options.maxZoom||c<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&.5>d?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[f.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,e=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=e.length;c>b;b++)d=e[b],d.complete||(d.onload=f.Util.falseFn,d.onerror=f.Util.falseFn,d.src=f.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=f.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=180*a.coords.accuracy/40075017,g=e/Math.cos(f.LatLng.DEG_TO_RAD*b),h=f.latLngBounds([b-e,c-g],[b+e,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document)},{}],11:[function(a,b,c){!function(a,d){"use strict";"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.MergeXML=d()}(this,function(){return function(a){var b,c,d,e,f,g,h,i,j,k="_",l=1,m=3,n=8,o=7,p=this;p.Init=function(){return p.dom=null,p.nsp={},p.count=0,i[1]=!1,b>0&&(p.error={code:"",text:""}),b>0},p.AddFile=function(a){var b;return b=a&&a.target?a.target.result?p.AddSource(a.target.result):z("emf"):z("nof")},p.AddSource=function(a){var c,d;if("object"==typeof a)d=p.Get(1,a)?a:!1,d&&(1===b&&!window.DOMParser||2===b&&!d.selectSingleNode("/"))&&(d=null);else try{d=q(a)}catch(e){d=!1}if(null===d)c=z("nos");else if(d===!1)c=z("inv");else if(d===!0)p.nsp=v(p.dom.documentElement),p.count=1,c=p.dom;else if(s(d)){if(t(d,"/"),i[1]===!0){var f=p.dom.createTextNode("\r\n");p.dom.documentElement.appendChild(f)}p.count++,c=p.dom}else c=!1;return c};var q=function(a){var e,f;return 1===b?p.dom?(f=d.parseFromString(a,"text/xml"),e=r(f)?f:!1):(p.dom=d.parseFromString(a,"text/xml"),e=!!r(p.dom)):p.dom?(f=new ActiveXObject(c),f.async=!1,e=f.loadXML(a)?f:!1):(p.dom=new ActiveXObject(c),p.dom.async=!1,p.dom.setProperty("SelectionLanguage","XPath"),e=!!p.dom.loadXML(a)),e},r=function(a){return 0===a.getElementsByTagNameNS(e,"parsererror").length},s=function(a){var c=!0;if(a.inputEncoding!==p.dom.inputEncoding||a.xmlEncoding!==p.dom.xmlEncoding)c=z("enc");else if(a.documentElement.namespaceURI!==p.dom.documentElement.namespaceURI)c=z("nse");else if(a.documentElement.nodeName!==p.dom.documentElement.nodeName)if(i[0]){if(!i[1]){var d=p.dom.inputEncoding?p.dom.inputEncoding:p.dom.xmlEncoding?p.dom.xmlEncoding:"utf-8",e=p.dom.xmlVersion?p.dom.xmlVersion:"1.0",f='<?xml version="'+e+'" encoding="'+d+'"?>\r\n<'+i[0]+">\r\n</"+i[0]+">",h=q(f);if(h){var k=p.dom.documentElement.cloneNode(!0);h.documentElement.appendChild(k),k=h.createTextNode("\r\n"),h.documentElement.appendChild(k),p.dom=h,i[1]=!0}else c=z("jne"),i[1]=null}}else c=z("dif");if(c){var l=v(a.documentElement);for(var m in l)p.nsp[m]||(p.dom.documentElement.setAttribute("xmlns:"+m,l[m]),p.nsp[m]=l[m]);j?1===b?g=w:x():g=null}return c},t=function(a,b){for(var c=0;c<a.childNodes.length;c++){var d,e=a.childNodes[c],f=u(a.childNodes,e,b,c),g=p.Query(f);if(e.nodeType===l){var i=!0;if(null===g||g.namespaceURI!==e.namespaceURI)d=e.cloneNode(!0),g=p.Query(b),g.appendChild(d);else if(y(g.getAttribute("stay"),h)!==!1&&(i=!1),i)try{for(var j=0;j<e.attributes.length;j++)g.setAttribute(e.attributes[j].nodeName,e.attributes[j].nodeValue)}catch(k){}e.hasChildNodes()&&i&&t(e,f)}else e.nodeType!==m&&e.nodeType!==n||(null===g||g.nodeType!==e.nodeType?(g=p.Query(b),d=e.nodeType===m?p.dom.createTextNode(e.nodeValue):p.dom.createComment(e.nodeValue),g.appendChild(d)):g.nodeValue=e.nodeValue)}},u=function(a,c,d,e){var f,g,h=0;if(c.nodeType===l){for(g=0;e>=g;g++)(j&&a[g].nodeType===c.nodeType&&a[g].nodeName===c.nodeName||!j&&a[g].nodeType!==o)&&h++;if(j){var i=!1,q=v(c);for(var r in q)r!==k&&(p.nsp[r]=q[r],i=2===b);i&&x(),f=c.prefix?c.prefix+":":p.nsp[k]?k+":":"",f+=c.localName?c.localName:c.baseName}else f="node()"}else if(c.nodeType===m||c.nodeType===n){for(g=0;e>=g;g++)a[g].nodeType===c.nodeType&&h++;f=c.nodeType===m?"text()":"comment()"}else f=d;return h&&(f=d+("/"===d.slice(-1)?"":"/")+f+"["+h+"]"),f},v=function(a){for(var b={},c=a.attributes,d=0;d<c.length;++d){var e=c[d].name.split(":");if("xmlns"===e[0]){var f=e[1]?e[1]:k;b[f]=c[d].value}}return b};p.Query=function(a){var c;i[1]&&(a="/"+p.dom.documentElement.nodeName+("/"===a?"":a));try{1===b?(c=f.evaluate(a,p.dom,g,XPathResult.FIRST_ORDERED_NODE_TYPE,null),c=c.singleNodeValue):c=p.dom.selectSingleNode(a)}catch(d){c=null}return c};var w=function(a){return p.nsp[a]||null},x=function(){var a="";for(var b in p.nsp)a+=" xmlns:"+b+"='"+p.nsp[b]+"'";a&&p.dom.setProperty("SelectionNamespaces",a.substr(1))},y=function(a,b){var c=!1;for(var d in a)if(a[d]===b){c=d;break}return c};p.Get=function(a,b){var c;if(a&&!b&&(b=p.dom),a)if(b)if(b.xml)c=b.xml;else try{c=(new XMLSerializer).serializeToString(b)}catch(d){c=null}else c="";else c=p.dom;if(c&&2===a){if(i[1]){var e=c.indexOf("<"+i[0]);c=c.substr(0,e)+"\r\n"+c.substr(e)}c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;"),c=c.replace(/(\r\n|\n|\r)/g,"<br>")}return c};var z=function(a){var b={nod:"XML DOM is not supported in this browser",nox:"xPath is not supported in this browser",nos:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return p.error.code=b[a]?a:"und",p.error.text=b[p.error.code],!1},A=function(){for(var a,b=!1,g=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],h=g.length,i=0;h>i;i++)try{var j=new ActiveXObject(g[i]);if(j.async=!1,b=!0,j.loadXML("<x></x>")&&j.selectSingleNode("/"))break}catch(k){}if(b)h>i?(c=g[i],a=2):a="nox";else if(window.DOMParser)if(window.XPathEvaluator){d=new DOMParser;var k=d.parseFromString("Invalid","text/xml");e=k.getElementsByTagName("parsererror")[0].namespaceURI,f=new XPathEvaluator,a=1}else a="nox";else a="nod";return a};"object"!=typeof a&&(a={}),h="undefined"==typeof a.stay?["all"]:a.stay?"object"==typeof a.stay&&a.stay instanceof Array?a.stay:[a.stay]:[],i="undefined"==typeof a.join?["root"]:[a.join?String(a.join):!1],j="undefined"==typeof a.updn?!0:a.updn,b=A(),"string"==typeof b&&(p.error={},z(b),b=0),p.Init()}})},{}],12:[function(a,b,c){(function(a){!function(a){"use strict";if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c&&"object"==typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var d="undefined"!=typeof window?window:self,e=d.Q;d.Q=a(),d.Q.noConflict=function(){return d.Q=e,this}}}(function(){"use strict";function b(a){return function(){return X.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===da(a)||a instanceof T}function e(a,b){if(Q&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(ea)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+ea+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);
if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===S&&d>=U&&ja>=d}function j(){if(Q)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return S=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return a instanceof p?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Z(c,function(b,c){l.nextTick(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=aa(m.prototype),f=aa(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=Y(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):l.nextTick(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Z(d,function(b,c){l.nextTick(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=aa(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return a instanceof p}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){fa.length=0,ga.length=0,ia||(ia=!0)}function y(b,c){ia&&("object"==typeof a&&"function"==typeof a.emit&&l.nextTick.runAfter(function(){-1!==$(ga,b)&&(a.emit("unhandledRejection",c,b),ha.push(b))}),ga.push(b),c&&"undefined"!=typeof c.stack?fa.push(c.stack):fa.push("(no stack) "+c))}function z(b){if(ia){var c=$(ga,b);-1!==c&&("object"==typeof a&&"function"==typeof a.emit&&l.nextTick.runAfter(function(){var d=$(ha,b);-1!==d&&(a.emit("rejectionHandled",fa[c],b),ha.splice(d,1))}),ga.splice(c,1),fa.splice(c,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return ca(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return l.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?l(g.value):q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?l(h.value):A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new T(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Z(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){if(0===a.length)return l.resolve();var b=l.defer(),c=0;return Z(a,function(d,e,f){function g(a){b.resolve(a)}function h(){c--,0===c&&b.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function i(a){b.notify({index:f,value:a})}var j=a[f];c++,q(j,g,h,i)},void 0),b.promise}function M(a){return q(a,function(a){return a=_(a,l),q(K(_(a,function(a){return q(a,V,V)})),function(){return a})})}function N(a){return l(a).allSettled()}function O(a,b){return l(a).then(void 0,void 0,b)}function P(a,b){return l(a).nodeify(b)}var Q=!1;try{throw new Error}catch(R){Q=!!R.stack}var S,T,U=j(),V=function(){},W=function(){function b(){for(var a,b;d.next;)d=d.next,a=d.task,d.task=void 0,b=d.domain,b&&(d.domain=void 0,b.enter()),c(a,b);for(;i.length;)a=i.pop(),c(a);f=!1}function c(a,c){try{a()}catch(d){if(h)throw c&&c.exit(),setTimeout(b,0),c&&c.enter(),d;setTimeout(function(){throw d},0)}c&&c.exit()}var d={task:void 0,next:null},e=d,f=!1,g=void 0,h=!1,i=[];if(W=function(b){e=e.next={task:b,domain:h&&a.domain,next:null},f||(f=!0,g())},"object"==typeof a&&"[object process]"===a.toString()&&a.nextTick)h=!0,g=function(){a.nextTick(b)};else if("function"==typeof setImmediate)g="undefined"!=typeof window?setImmediate.bind(window,b):function(){setImmediate(b)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=function(){g=k,j.port1.onmessage=b,b()};var k=function(){j.port2.postMessage(0)};g=function(){setTimeout(b,0),k()}}else g=function(){setTimeout(b,0)};return W.runAfter=function(a){i.push(a),f||(f=!0,g())},W}(),X=Function.call,Y=b(Array.prototype.slice),Z=b(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),$=b(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),_=b(Array.prototype.map||function(a,b){var c=this,d=[];return Z(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),aa=Object.create||function(a){function b(){}return b.prototype=a,new b},ba=b(Object.prototype.hasOwnProperty),ca=Object.keys||function(a){var b=[];for(var c in a)ba(a,c)&&b.push(c);return b},da=b(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var ea="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1,"object"==typeof a&&a&&a.env&&a.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(Y(arguments,1)):a.resolve(c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return l.nextTick(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.tap=function(a,b){return l(a).tap(b)},p.prototype.tap=function(a){return a=l(a),this.then(function(b){return a.fcall(b).thenResolve(b)})},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var fa=[],ga=[],ha=[],ia=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return fa.slice()},l.stopUnhandledRejectionTracking=function(){x(),ia=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return l.nextTick(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,Y(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,Y(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,Y(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(a){var b=l(a),c=Y(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(Y(arguments))])}},p.prototype.fbind=function(){var a=this,b=Y(arguments);return function(){return a.dispatch("apply",[this,b.concat(Y(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.any=L,p.prototype.any=function(){return L(this)},l.allResolved=k(M,"allResolved","allSettled"),p.prototype.allResolved=function(){return M(this)},l.allSettled=N,p.prototype.allSettled=function(){return this.then(function(a){return K(_(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=O,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(b,c,d){var f=function(a){l.nextTick(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(f=a.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=Y(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=Y(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=Y(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=Y(arguments,1);return function(){var c=b.concat(Y(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=Y(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=Y(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(Y(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=Y(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=Y(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=Y(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=Y(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=P,p.prototype.nodeify=function(a){return a?void this.then(function(b){l.nextTick(function(){a(null,b)})},function(b){l.nextTick(function(){a(b)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ja=j();return l})}).call(this,a("_process"))},{_process:6}],13:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){function c(a){j=g(a),this.$=j,this.$nonRepeats={}}var d,h,i,j,k,l,m,n=[];this.init=function(){return k=g(a).clone().appendTo("<original></original>"),d=new e(b),n=n.concat(d.init()),i=new c(a),l=g(a).find(".or-repeat").length>0,n=n.concat(i.init()),window.scrollTo&&window.scrollTo(0,0),n},this.ex=function(a,b,c,e,f){return d.evaluate(a,b,c,e,f)},this.getModel=function(){return d},this.getInstanceID=function(){return d.getInstanceID()},this.getInstanceName=function(){return d.getInstanceName()},this.getView=function(){return i},this.getEncryptionKey=function(){return i.$.data("base64rsapublickey")},this.getDataStr=function(){return d.getStr()},this.getRecordName=function(){return i.recordName.get()},this.setRecordName=function(a){return i.recordName.set(a)},this.setEditStatus=function(a){return i.editStatus.set(a)},this.getEditStatus=function(){return i.editStatus.get()},this.getSurveyName=function(){return j.find("#form-title").text()},this.resetView=function(){g("#form-languages").remove(),j.replaceWith(k)},this.resetHTML=this.resetView,this.validate=function(){return i.validateAll()},this.isValid=function(){return i.isValid()},m=function(a,b,c,e,f){var h,i,k,l="",m=a.match(/jr:choice-name\(([^,]+),\s?'(.*?)'\)/);return m?(h=d.evaluate(m[1],b,c,e,f),i=m[2].trim(),k=j.find('[name="'+i+'"]'),k.length>0&&"select"===k.prop("nodeName").toLowerCase()?l=k.find('[value="'+h+'"]').text():k.length>0&&"input"===k.prop("nodeName").toLowerCase()&&(l=k.filter(function(){return g(this).attr("value")===h}).siblings(".option-label.active").text()),a.replace(m[0],'"'+l+'"')):a},c.prototype.init=function(){var a=this;if("undefined"==typeof d||!(d instanceof e))return console.error("variable data needs to be defined as instance of FormModel");try{return this.preloads.init(this),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calcUpdate(),this.langs.init(),this.repeat.init(this),this.itemsetUpdate(),this.setAllVals(),f.init(),this.branchUpdate(),this.pages.init(),this.outputUpdate(),this.setEventHandlers(),this.editStatus.set(!1),setTimeout(function(){a.progress.update()},0),[]}catch(b){return[b.name+": "+b.message]}},c.prototype.pages={active:!1,$current:[],$activePages:g(),init:function(){if(j.hasClass("pages")){var a=j.find(".note, .question, .trigger, .or-appearance-field-list").filter(function(){return 0===g(this).parent().closest(".or-appearance-field-list").length}).attr("role","page");(a.length>1||a.eq(0).hasClass("or-repeat"))&&(this.$formFooter=g(".form-footer"),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnLast=this.$formFooter.find(".last-page"),this.updateAllActive(a),this.toggleButtons(0),this.setButtonHandlers(),this.setRepeatHandlers(),this.setBranchHandlers(),this.setSwipeHandlers(),this.active=!0),this.flipToFirst(),j.show()}},setButtonHandlers:function(){var a=this;this.$btnFirst.off(".pagemode").on("click.pagemode",function(){return a.flipToFirst(),!1}),this.$btnPrev.off(".pagemode").on("click.pagemode",function(){return a.prev(),!1}),this.$btnNext.off(".pagemode").on("click.pagemode",function(){return a.next(),!1}),this.$btnLast.off(".pagemode").on("click.pagemode",function(){return a.flipToLast(),!1})},setSwipeHandlers:function(){var a=this,b=g(".main");b.swipe("destroy"),b.swipe({allowPageScroll:"vertical",threshold:150,swipeLeft:function(){a.next()},swipeRight:function(){a.prev()}})},setRepeatHandlers:function(){var a=this;j.off("addrepeat.pagemode").on("addrepeat.pagemode",function(b){a.updateAllActive(),g(b.target).removeClass("current contains-current").find(".current").removeClass("current"),a.flipToPageContaining(g(b.target))}).off("removerepeat.pagemode").on("removerepeat.pagemode",function(b){0===a.$current.closest("html").length&&(a.updateAllActive(),a.flipToPageContaining(g(b.target)))})},setBranchHandlers:function(){var a=this;j.off("changebranch.pagemode").on("changebranch.pagemode",function(){a.updateAllActive(),a.toggleButtons()})},getCurrent:function(){return this.$current},updateAllActive:function(a){a=a||g('.or [role="page"]'),this.$activePages=a.filter(function(){return 0===g(this).closest(".disabled").length})},getAllActive:function(){return this.$activePages},getPrev:function(a){return this.$activePages[a-1]},getNext:function(a){return this.$activePages[a+1]},getCurrentIndex:function(){return this.$activePages.index(this.$current)},next:function(){var a,b;this.updateAllActive(),b=this.getCurrentIndex(),a=this.getNext(b),a&&this.flipTo(a,b+1)},prev:function(){var a,b;this.updateAllActive(),b=this.getCurrentIndex(),a=this.getPrev(b),a&&this.flipTo(a,b-1)},setToCurrent:function(a){var b=g(a);b.addClass("current hidden"),this.$current=b.removeClass("hidden").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").addClass("contains-current").end()},flipTo:function(a,b){this.$current.length>0&&1===this.$current.closest("html").length?this.$current[0]!==a&&(this.$current.removeClass("current fade-out").parentsUntil(".or",".or-group, .or-group-data, .or-repeat").removeClass("contains-current"),this.setToCurrent(a),this.focusOnFirstQuestion(a),this.toggleButtons(b)):(this.setToCurrent(a),this.focusOnFirstQuestion(a),this.toggleButtons(b)),window.scrollTo&&window.scrollTo(0,0),g(a).trigger("pageflip.enketo")},flipToFirst:function(){this.updateAllActive(),this.flipTo(this.$activePages[0])},flipToLast:function(){this.updateAllActive(),this.flipTo(this.$activePages.last()[0])},flipToPageContaining:function(a){var b;b=a.closest('[role="page"]'),b=0===b.length?a.find('[role="page"]'):b,this.flipTo(b[0])},focusOnFirstQuestion:function(a){g(a).find(".question:not(.disabled)").filter(function(){return 0===g(this).parentsUntil(".or",".disabled").length}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus")},toggleButtons:function(a){var b=a||this.getCurrentIndex(),c=this.getNext(b),d=this.getPrev(b);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!c),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!d),this.$formFooter.toggleClass("end",!c)}},c.prototype.input={getWrapNodes:function(a){var b=this.getInputType(a.eq(0));return"fieldset"===b?a:a.closest(".question, .note")},getProps:function(a){return 1!==a.length?console.error("getProps(): no input node provided or multiple"):{path:this.getName(a),ind:this.getIndex(a),inputType:this.getInputType(a),xmlType:this.getXmlType(a),constraint:this.getConstraint(a),calculation:this.getCalculation(a),relevant:this.getRelevant(a),val:this.getVal(a),required:this.isRequired(a),enabled:this.isEnabled(a),multiple:this.isMultiple(a)}},getInputType:function(a){var b;return 1!==a.length?"":(b=a.prop("nodeName").toLowerCase(),"input"===b?a.attr("type").length>0?a.attr("type").toLowerCase():console.error("<input> node has no type"):"select"===b?"select":"textarea"===b?"textarea":"fieldset"===b||"section"===b?"fieldset":console.error("unexpected input node type provided"))},getConstraint:function(a){return a.attr("data-constraint")},getRelevant:function(a){return a.attr("data-relevant")},getCalculation:function(a){return a.attr("data-calculate")},getXmlType:function(a){return 1!==a.length?console.error("getXMLType(): no input node provided or multiple"):a.attr("data-type-xml")},getName:function(a){var b;return 1!==a.length?console.error("getName(): no input node provided or multiple"):(b=a.attr("data-name")||a.attr("name"),b||console.error("input node has no name"))},getIndex:function(a){var b,c,d,e;return 1!==a.length?console.error("getIndex(): no input node provided or multiple"):(b=this.getInputType(a),c=this.getName(a),d=this.getWrapNodes(a),e="radio"===b&&c!==a.attr("name")?this.getWrapNodes(j.find('[data-name="'+c+'"]')):"fieldset"===b&&a.hasClass("or-repeat")?this.getWrapNodes(j.find('.or-repeat[name="'+c+'"]')):"fieldset"===b&&a.hasClass("or-group")?this.getWrapNodes(j.find('.or-group[name="'+c+'"]')):this.getWrapNodes(j.find('[name="'+c+'"]')),e.index(d))},isMultiple:function(a){return"checkbox"===this.getInputType(a)||void 0!==a.attr("multiple")},isEnabled:function(a){return!(a.prop("disabled")||a.parentsUntil(".or",".disabled").length>0)},isRequired:function(a){return void 0!==a.attr("required")&&0===a.parentsUntil(".or",".or-appearance-label").length},getVal:function(a){var b,c,d=[];return 1!==a.length?console.error("getVal(): no inputNode provided or multiple"):(b=this.getInputType(a),c=this.getName(a),"radio"===b?this.getWrapNodes(a).find("input:checked").val()||"":"checkbox"===b?(this.getWrapNodes(a).find('input[name="'+c+'"]:checked').each(function(){d.push(g(this).val())}),d):a.val()?g.isArray(a.val())?a.val().join(" ").trim():a.val().trim():"")},setVal:function(a,b,c){var e,f;if(b=b||0,"radio"===this.getInputType(j.find('[data-name="'+a+'"]').eq(0)))f="radio",e=this.getWrapNodes(j.find('[data-name="'+a+'"]')).eq(b).find('[data-name="'+a+'"]');else{if(e=this.getWrapNodes(j.find('[name="'+a+'"]')).eq(b).find('[name="'+a+'"]'),f=this.getInputType(e.eq(0)),"file"===f)return e.eq(0).attr("data-loaded-file-name",c),!1;"date"!==f&&"datetime"!==f||(c=d.node(a,b).convert(c,f))}this.isMultiple(e.eq(0))===!0?c=c.split(" "):"radio"===f&&(c=[c]),e.is("[readonly]")&&e.toggleClass("has-value",!!c),e.val(c)}},c.prototype.setAllVals=function(a,b){var c,e,f,h=this,i=a&&a.attr("name")?a.attr("name"):null;b="undefined"!=typeof b?b:null,d.node(i,b).get().find("*").filter(function(){var a=g(this);return 0===a.children().length&&a.text()}).each(function(){var a=g(this);try{f=a.text(),e=a.getXPath("instance"),c=d.node(e).get().index(this),h.input.setVal(e,c,f)}catch(b){console.error(b),n.push("Could not load input field value with name: "+e+" and value: "+f)}})},c.prototype.langs={init:function(){var a,b=this,c=j.find("#form-languages"),d=g(".form-language-selector"),e=c.attr("data-default-lang")||c.find("option").eq(0).attr("value"),f=c.find('[value="'+e+'"]').attr("data-dir")||"ltr";c.detach().appendTo(d).val(e),j.attr("dir",f),c.find("option").length<2||(d.removeClass("hide"),c.change(function(c){c.preventDefault(),a=g(this).val(),b.setAll(a)}))},setAll:function(a){var b=this,c=g("#form-languages").find('[value="'+a+'"]').attr("data-dir")||"ltr";j.attr("dir",c).find("[lang]").removeClass("active").filter('[lang="'+a+'"], [lang=""]').filter(function(){var a=g(this);return!a.hasClass("or-form-short")||a.hasClass("or-form-short")&&0===a.siblings(".or-form-long").length}).addClass("active"),j.find("select").each(function(){b.setSelect(g(this))}),j.trigger("changelanguage")},setSelect:function(a){var b,c,d;a.children("option").not('[value=""]').each(function(){var a=g(this);c=a.text(),b=a.attr("value"),d=a.parent("select").siblings(".or-option-translations").children('.active[data-option-value="'+b+'"]').text().trim(),d="undefined"!=typeof d&&d.length>0?d:c,a.text(d)})}},c.prototype.editStatus={set:function(a){a&&a!==j.data("edited")&&j.trigger("edited.enketo"),j.data("edited",a)},get:function(){return!!j.data("edited")}},c.prototype.recordName={set:function(a){j.attr("name",a)},get:function(){return j.attr("name")}},c.prototype.getNodesToUpdate=function(a,b,c){var d,e=null,f=[],h=this;return c=c||{},b=b||"",this.$nonRepeats[a]||(this.$nonRepeats[a]=j.find(b+"["+a+"]").parentsUntil(".or",".calculation, .question, .note, .trigger").filter(function(){return 0===g(this).closest(".or-repeat").length})),"undefined"!=typeof c.repeatPath&&c.repeatIndex>=0&&(e=j.find('.or-repeat[name="'+c.repeatPath+'"]').eq(c.repeatIndex)),d=e?this.$nonRepeats[a].add(e):j,c.nodes&&0!==c.nodes.length?(c.nodes.forEach(function(c){f=f.concat(h.getQuerySelectorsForLogic(b,a,c))}),f=f.concat(h.getQuerySelectorsForLogic(b,a,"*"))):f=f.concat([b+"["+a+"]"]),d.find(f.join())},c.prototype.getQuerySelectorsForLogic=function(a,b,c){return[a+"["+b+'*="/'+c+' "]',a+"["+b+'*="/'+c+')"]',a+"["+b+'*="/'+c+',"]',a+"["+b+'$="/'+c+'"]',a+"["+b+'*="/'+c+']"]']},c.prototype.branchUpdate=function(a){function b(a,b,c){var e=d.evaluate(a,"boolean",b,c);return e}function c(a,b){b===!0?h(a):i(a)}function e(a){return!a.hasClass("disabled")&&!a.hasClass("pre-init")}function h(a){var b;e(a)||(v=!0,a.removeClass("disabled pre-init"),f.enable(a),b=a.prop("nodeName").toLowerCase(),"label"===b?a.children("input, select, textarea").prop("disabled",!1):"fieldset"===b?(a.prop("disabled",!1),a.find('*:not(.or-branch) input[type="file"]:not([data-relevant])').prop("disabled",!0).prop("disabled",!1)):a.find("fieldset, input, select, textarea").prop("disabled",!1))}function i(a){var b=a.prop("nodeName").toLowerCase(),c=a.hasClass("pre-init");(c||e(a))&&(v=!0,a.addClass("disabled"),c?a.removeClass("pre-init"):(a.clearInputs("change"),f.disable(a),a.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function(){w.setValid(g(this))})),"label"===b?a.children("input, select, textarea").prop("disabled",!0):"fieldset"===b?a.prop("disabled",!0):a.find("fieldset, input, select, textarea").prop("disabled",!0))}var k,m,n,o,p,q,r,s,t={},u=[],v=!1,w=this;r=this.getNodesToUpdate("data-relevant","",a),s=!!(l&&j.find(".or-repeat.clone").length>0),r.each(function(){var a=g(this);if(-1===g.inArray(a.attr("name"),u)){if(m=a.closest(".or-branch"),k={},q=null,k.relevant=w.input.getRelevant(a),k.path=w.input.getName(a),1!==m.length)return void(0===a.parentsUntil(".or","#or-calculated-items").length&&console.error("could not find branch node for ",g(this)));o=!!(s&&m.parentsUntil(".or",".or-repeat").length>0),p=!!(s&&m.parentsUntil(".or",".or-repeat.clone").length>0),k.ind=p?w.input.getIndex(a):0,-1===k.relevant.indexOf("..")&&(q=o?k.relevant+"__"+k.path.substring(0,k.path.lastIndexOf("/"))+"__"+k.ind:k.relevant),q&&"undefined"!=typeof t[q]?n=t[q]:(n=b(k.relevant,k.path,k.ind),t[q]=n),o||u.push(g(this).attr("name")),c(m,n)}}),v&&this.$.trigger("changebranch")},c.prototype.itemsetUpdate=function(a){var b,c,e,f,h=this,i={};f=this.getNodesToUpdate("data-items-path",".itemset-template",a),b=!!(l&&j.find(".or-repeat.clone").length>0),f.each(function(){var a,f,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(o=g(this),!o.parentsUntil(".or",".or-branch").parentsUntil(".or",".disabled").length){if(p={},q=o.data(),r=o.prop("nodeName").toLowerCase(),s="label"===r?o.children("input").eq(0):o.parent("select"),t=o.closest("label, select").siblings(".itemset-labels"),u=o.attr("data-items-path"),v=t.attr("data-label-type"),w=t.attr("data-label-ref"),x=t.attr("data-value-ref"),m=h.input.getName(s),c=!!(b&&s.parentsUntil(".or",".or-repeat").length>0),e=!!(b&&s.parentsUntil(".or",".or-repeat.clone").length>0),l=e?h.input.getIndex(s):0,"undefined"!=typeof i[u])k=i[u];else{var y=!0;k=g(d.evaluate(u,"nodes",m,l,y)),c||(i[u]=k)}p.length=k.length,p.text=k.text(),p.length===q.length&&p.text===q.text||(o.data(p),o.closest(".question").clearInputs("change").find(r).not(o).remove(),o.parent("select").siblings(".or-option-translations").empty(),k.each(function(){var b=g(this);n=b.children(w).text(),a=g("<root/>"),o.clone().appendTo(a).removeClass("itemset-template").addClass("itemset").removeAttr("data-items-path"),f="itext"===v&&t.find('[data-itext-id="'+n+'"]').length>0?t.find('[data-itext-id="'+n+'"]').clone():g('<span class="option-label active" lang="">'+n+"</span>"),j=b.children(x).text(),a.find("[value]").attr("value",j),"label"===r?(a.find("input").after(f),t.before(a.find(":first"))):"option"===r&&(1===f.length&&a.find("option").text(f.text()),f.attr("data-option-value",j).attr("data-itext-id","").appendTo(t.siblings(".or-option-translations")),o.siblings().addBack().last().after(a.find(":first")))}),"select"===s.prop("nodeName").toLowerCase()&&(h.langs.setSelect(s),s.trigger("changeoption")))}})},c.prototype.outputUpdate=function(a){var b,c,e,f,h,i,k,m,n,o={},p="",q=this;n=this.getNodesToUpdate("data-value",".or-output",a),c=l&&j.find(".or-repeat.clone").length>0,n.each(function(){i=g(this),i.closest(".or-branch").parent().closest(".disabled").length||(b=i.attr("data-value"),h=i.closest(".question, .note, .or-group").find("[name]").eq(0),k=h.length?q.input.getName(h):void 0,e=c&&i.parentsUntil(".or",".or-repeat").length>0,f=e&&i.parentsUntil(".or",".or-repeat.clone").length>0,m=f?q.input.getIndex(h):0,"undefined"!=typeof o[b]?p=o[b]:(p=d.evaluate(b,"string",k,m,!0),e||(o[b]=p)),i.text!==p&&i.text(p))})},c.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){var a=j.find('[name$="/meta/instanceID"][data-calculate]');a.length>0&&a.removeAttr("data-calculate")},c.prototype.calcUpdate=function(a){var b,c=this;a=a||{},b=this.getNodesToUpdate("data-calculate","",a),b=b.add(this.getNodesToUpdate("data-relevant","[data-calculate]",a)),b.each(function(){function b(a){o=m(o,"string",l,a),e=s&&o?d.evaluate(o,"string",l,a):"",h.setIndex(a),f=h.setVal(e,q,p),c.input.setVal(l,a,e)}var e,f,h,i,j,k,l,n,o,p,q,r,s,t;t=g(this),l=c.input.getName(t),n=-1!==l.lastIndexOf("/")?l.substring(l.lastIndexOf("/")+1):l,o=c.input.getCalculation(t),p=c.input.getXmlType(t),q=c.input.getConstraint(t),r=c.input.getRelevant(t),s=r?d.evaluate(r,"boolean",l):!0,h=d.node(l),i=h.get(),i.length>1&&a.repeatPath&&-1!==l.indexOf(a.repeatPath)?(j=d.node(a.repeatPath,a.repeatIndex).get().find(n),k=g(i).index(j),b(k)):1===i.length?(k=0,b(k)):i.each(function(a){b(a)})})},c.prototype.preloads={init:function(a){var b,c,e,f,h,i,k,l,m,n,o=this;
j.find("#or-preload-items input").each(function(){n=g(this),l=a.input.getProps(n),b=n.attr("data-preload").toLowerCase(),c=n.attr("data-preload-params").toLowerCase(),"undefined"!=typeof o[b]?(k=d.node(l.path,l.index),f=k.getVal()[0],h=o[b]({param:c,curVal:f,dataNode:k}),k.setVal(h,null,l.xmlType)):console.log('Preload "'+b+'" not supported. May or may not be a big deal.')}),i=d.node("/*/meta/*"),i.get().each(function(){if(b=null,e=g(this).prop("nodeName"),k=d.node("/*/meta/"+e),f=k.getVal()[0],0===j.find('#or-preload-items input[name$="/meta/'+e+'"][data-preload]').length)switch(e){case"instanceID":b="instance",m="string",c="";break;case"timeStart":b="timestamp",m="datetime",c="start";break;case"timeEnd":b="timestamp",m="datetime",c="end";break;case"deviceID":b="property",m="string",c="deviceid";break;case"userID":b="property",m="string",c="username"}b&&k.setVal(o[b]({param:c,curVal:f,dataNode:k}),null,m)})},timestamp:function(a){var b;return"start"===a.param?a.curVal.length>0?a.curVal:d.evaluate("now()","string"):"end"===a.param?(j.on("beforesave",function(){b=d.evaluate("now()","string"),a.dataNode.setVal(b,null,"datetime")}),d.evaluate("now()","string")):"error - unknown timestamp parameter"},date:function(a){var b,c,e,f;return 0===a.curVal.length?(b=new Date(d.evaluate("today()","string")),c=b.getFullYear().toString().pad(4),e=(b.getMonth()+1).toString().pad(2),f=b.getDate().toString().pad(2),c+"-"+e+"-"+f):a.curVal},property:function(a){var b,c,d;if(b=function(a,b,c,d){if(h)return h[a];for(b=document.cookie.split("; "),h={},d=b.length-1;d>=0;d--)c=b[d].split("="),c[1]=decodeURIComponent(c[1]),"s:"===c[1].substr(0,2)&&(c[1]=c[1].slice(2),c[1]=c[1].slice(0,c[1].lastIndexOf("."))),h[c[0]]=decodeURIComponent(c[1]);return h[a]},0===a.curVal.length){switch(c="no "+a.param+" property in enketo",a.param){case"deviceid":d=b("__enketo_meta_deviceid")||"Error: could not determine deviceID";break;case"username":d=b("__enketo_meta_uid");break;default:d=c}return d}return a.curVal},context:function(a){return 0===a.curVal.length?"application"===a.param?"enketo":a.param+" not supported in enketo":a.curVal},patient:function(a){return 0===a.curVal.length?"patient preload not supported in enketo":a.curVal},user:function(a){return 0===a.curVal.length?"user preload item not supported in enketo yet":a.curVal},uid:function(a){return 0===a.curVal.length?"no uid yet in enketo":a.curVal},instance:function(a){var b=a.curVal.length>0?a.curVal:d.evaluate('concat("uuid:", uuid())',"string");return j.data({instanceID:b}),b}},c.prototype.repeat={init:function(a){var b,c,e,f,h,i,k,l=this;this.formO=a,j.find(".or-repeat").prepend('<span class="repeat-number"></span>'),j.find(".or-repeat:not([data-repeat-fixed])").append('<div class="repeat-buttons"><button type="button" class="btn btn-default repeat"><i class="icon icon-plus"> </i></button><button type="button" disabled class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>'),j.on("click","button.repeat:enabled",function(){return l.clone(g(this).closest(".or-repeat")),!1}),j.on("click","button.remove:enabled",function(){return l.remove(g(this).closest(".or-repeat.clone")),!1}),h=function(a,m){c=a.attr("data-repeat-count")||"",b=c.length>0?parseInt(d.node(c).getVal()[0],10):0,k=j.find('.or-repeat[name="'+a.attr("name")+'"]').index(a),i=d.node(a.attr("name"),k).get(),e=i.siblings(i.prop("nodeName")).addBack().length,f=b>e?b:e,f>1&&l.clone(a.siblings().addBack().last(),f-1,!0),a.siblings(".or-repeat").addBack().find(".or-repeat").filter(function(){return g(this).parentsUntil(".or",".or-repeat").length===m}).each(function(){h(g(this),m+1)})},j.find(".or-repeat").filter(function(){return 0===g(this).parentsUntil(".or",".or-repeat").length}).each(function(){h(g(this),1)})},clone:function(a,b,c){var e,h,i,k,l,m,n,o,p=this;if(b=b||1,1!==a.length)return console.error("Nothing to clone"),!1;for(e=a.siblings(".or-repeat"),h=a.hasClass("clone")?e.not(".clone").eq(0):a,i=h.clone(!0,!0),o=h.attr("name"),i.addClass("clone").find(".clone").remove(),i.find(".invalid-required, .invalid-constraint").find("input, select, textarea").each(function(){p.formO.setValid(g(this))}),m=j.find('.or-repeat[name="'+o+'"]').index(a),i.clearInputs(""),n=b+m;n>m;m++)i.find(".option-wrapper").each(this.fixRadioNames),c||f.destroy(i),i.insertAfter(a),o.length>0&&m>=0&&d.cloneRepeat(o,m),i.trigger("addrepeat",m+1),l=i.find('[type="radio"],[type="checkbox"]'),l.parent("label").removeAttr("data-checked"),l.filter(":checked").parent("label").attr("data-checked","true"),c?p.formO.calcUpdate({repeatPath:o,repeatIndex:m+1}):f.init(i),e=e.add(i),i=i.clone();return k=e.add(a).add(e.find(".or-repeat")),this.numberRepeats(k),this.toggleButtons(k),!0},remove:function(a){var b=600,c=this,e=a.prev(".or-repeat"),f=a.attr("name"),g=j.find('.or-repeat[name="'+f+'"]').index(a),h=a.siblings(".or-repeat");a.hide(b,function(){a.remove(),c.numberRepeats(h),c.toggleButtons(h),e.trigger("removerepeat"),d.node(f,g).remove()})},fixRadioNames:function(a,b){g(b).find('input[type="radio"]').attr("name",Math.floor(1e7*Math.random()+1))},toggleButtons:function(a){var b,c;a=a&&0!==a.length?a:j,a.each(function(){b=g(this),c=b.siblings(".or-repeat").addBack(),c.children(".repeat-buttons").find("button.repeat, button.remove").prop("disabled",!0),c.last().children(".repeat-buttons").find("button.repeat").prop("disabled",!1),c.children(".repeat-buttons").find("button.remove").not(":first").prop("disabled",!1)})},numberRepeats:function(a){a.each(function(){var a,b,c,d=g(this);0===d.prev(".or-repeat").length&&(a=g(this).siblings(".or-repeat"),b=a.length+1,b>1?(d.find(".repeat-number").text("1"),c=2,a.each(function(){g(this).find(".repeat-number").eq(0).text(c),c++})):d.find(".repeat-number").eq(0).empty())})}},c.prototype.setEventHandlers=function(){var a=this;j.attr("onsubmit","return false;"),j.on("blur",'input:not([type="text"], [type="radio"], [type="checkbox"])',function(){var a=g(this);"undefined"!=typeof a.prop("validity").badInput&&a.prop("validity").badInput&&a.val("")}),j.on("change.file validate","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(b){a.validateInput(b.type,g(this)),"change"===b.type&&j.trigger("valuechange.enketo")}),j.on("focus fakefocus","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(b){a.progress.update(b.target)}),j.on("focus blur fakefocus fakeblur","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(b){var c=g(this),d=a.input.getProps(c),e=c.closest(".question"),f=e.find("legend").eq(0),h=e.hasClass("invalid-required")||e.hasClass("invalid-constraint"),i=c.parentsUntil(".or",".or-appearance-list-nolabel").length>0,j=e.find(".required-subtle"),k=g('<span class="required-subtle" style="color: transparent;">Required</span>');"focusin"===b.type||"fakefocus"===b.type?(e.addClass("focus"),d.required&&0===j.length&&!i&&(j=g(k),f.length>0?f.append(j):j.insertBefore(this),h||j.show(function(){g(this).removeAttr("style")}))):"focusout"!==b.type&&"fakeblur"!==b.type||(e.removeClass("focus"),d.required&&d.val.length>0?j.remove():h||j.removeAttr("style"))}),d.$.on("dataupdate",function(b,c){a.calcUpdate(c),a.branchUpdate(c),a.outputUpdate(c),a.itemsetUpdate(c),a.editStatus.set(!0)}),j.on("addrepeat",function(b,c){var d=g(b.target);a.setAllVals(d,c),a.calcUpdate({repeatPath:d.attr("name"),repeatIndex:c}),a.progress.update()}),j.on("removerepeat",function(){a.progress.update()}),j.on("changelanguage",function(){a.outputUpdate()})},c.prototype.setValid=function(a,b){var c=b?"invalid-"+b:"invalid-constraint invalid-required";this.input.getWrapNodes(a).removeClass(c)},c.prototype.setInvalid=function(a,b){b=b||"constraint",this.input.getWrapNodes(a).addClass("invalid-"+b).find(".required-subtle").attr("style","color: transparent;")},c.prototype.validateAll=function(){var a,b=this;j.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){b.setValid(g(this))});var c=j.find(".question").map(function(){var a=g(this).find("input:not(.ignore):not(:disabled), select:not(.ignore):not(:disabled), textarea:not(.ignore):not(:disabled)");return 0===a.length?Promise.resolve():b.validateInput("validate",a.eq(0))}).toArray();return Promise.all(c).then(function(){return a=j.find(".invalid-required, .invalid-constraint").eq(0),a.length>0&&window.scrollTo&&(this.pages.active&&this.pages.flipToPageContaining(a),window.scrollTo(0,a.offset().top-50)),0===a.length})},c.prototype.progress={status:0,lastChanged:null,$all:null,updateTotal:function(){this.$all=j.find(".question").not(".disabled").filter(function(){return 0===g(this).parentsUntil(".or",".disabled").length})},update:function(a){var b;this.$all&&a||this.updateTotal(),this.lastChanged=a||this.lastChanged,b=Math.round(100*(this.$all.index(g(this.lastChanged).closest(".question"))+1)/this.$all.length),b>0&&b!==this.status&&(this.status=b,j.trigger("progressupdate.enketo",b))},get:function(){return this.status}},c.prototype.isValid=function(){return!(j.find(".invalid-required, .invalid-constraint").length>0)},c.prototype.addPageBreaks=function(){},c.prototype.validateInput=function(a,b){var c,e,f,g=this,h={path:g.input.getName(b),inputType:g.input.getInputType(b),xmlType:g.input.getXmlType(b),enabled:g.input.isEnabled(b),constraint:g.input.getConstraint(b),val:g.input.getVal(b),required:g.input.isRequired(b)},i=function(){return f||(h.ind=g.input.getIndex(b),f=d.node(h.path,h.ind)),f};if(h.val.length>0&&"file"===h.inputType&&b[0].files[0]&&b[0].files[0].size>0&&(h.val=b[0].files[0].name),"validate"===a)c=h.enabled&&"hidden"!==h.inputType&&(h.constraint||"string"!==h.xmlType&&"select"!==h.xmlType&&"select1"!==h.xmlType&&"binary"!==h.xmlType)?i().validate(h.constraint,h.xmlType):Promise.resolve(!0);else{var j=i();j.setVal(h.val,h.constraint,h.xmlType),c=j.validate(h.constraint,h.xmlType).then(function(a){return a!==!1||"geotrace"!==h.xmlType&&"geoshape"!==h.xmlType?a:null})}return e=!(h.enabled&&"hidden"!==h.inputType&&h.required&&0===i().getVal()[0].length),e===!1?(g.setValid(b,"constraint"),"validate"===a&&g.setInvalid(b,"required")):(g.setValid(b,"required"),c=c.then(function(a){"undefined"!=typeof a&&a===!1?g.setInvalid(b,"constraint"):null!==a&&g.setValid(b,"constraint")})),c}}var e=a("./FormModel"),f=a("./widgets-controller"),g=a("jquery");a("./plugins"),a("./extend"),a("jquery-touchswipe"),c.exports=d})},{"./FormModel":15,"./extend":18,"./plugins":20,"./widgets-controller":23,jquery:9,"jquery-touchswipe":7}],14:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a){this.message=a||"unknown",this.name="FormLogicError",this.stack=(new Error).stack}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,c.exports=d})},{}],15:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d=a("mergexml/mergexml"),e=a("./utils"),f=a("jquery"),g=a("./FormLogicError");a("extended-xpath"),a("openrosa-xpath-extensions");a("./plugins"),a("./extend"),a("jquery-xpath-basic");var h,i,j;h=function(a,b){"string"==typeof a&&(a={modelStr:a}),a.external=a.external||[],a.submitted="undefined"!=typeof a.submitted?a.submitted:!0,b=b||{},b.full="undefined"!=typeof b.full?b.full:!0,this.convertedExpressions={},this.templates={},this.loadErrors=[],this.INSTANCE=/instance\([\'|\"]([^\/:\s]+)[\'|\"]\)/g,this.OPENROSA=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^\)])/,this.data=a,this.options=b},h.prototype.init=function(){var a,b,c,d=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns\=("|')[^\s\>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{a="model",this.xml=f.parseXML(this.data.modelStr),this.data.external.forEach(function(e){a='instance "'+e.id+'"'||"instance unknown",b=d.xml.getElementById(e.id),c=b.querySelector("root"),c&&b.removeChild(c),b.appendChild(f.parseXML(e.xmlStr).firstChild)})}catch(e){console.error(e),this.loadErrors.push("Error trying to parse XML "+a+". "+e.message)}if(this.xml){try{this.$=f(this.xml),this.hasInstance=!!this.xml.querySelector("model > instance")||!1,this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.$.find("model > instance[src]:empty").each(function(a,b){d.loadErrors.push('External instance "'+f(b).attr("id")+'" is empty.')}),this.trimValues(),this.cloneAllTemplates(),this.extractTemplates()}catch(e){console.error(e),this.loadErrors.push(e.name+": "+e.message)}try{a="record",this.data.instanceStr&&(this.mergeXml(this.data.instanceStr),this.data.submitted&&this.deprecateId())}catch(e){console.error(e),this.loadErrors.push("Error trying to parse XML "+a+". "+e.message)}}return this.loadErrors},h.prototype.node=function(a,b,c){return new i(a,b,c,this)},h.prototype.mergeXml=function(a){var b,c,e,g,h=this;if(a){if(e=this.xml.querySelector("instance"),g=this.xml.querySelector("instance > *"),!g)throw new Error("Model is corrupt. It does not contain a childnode of instance");if(f(f.parseXML(a)).find("*").each(function(){var a,b=f(this),c=b.prop("nodeName");try{var d=b.siblings(c);d.length>0&&0===b.prev(c).length&&(a=b.getXPath("instance"),d.each(function(b){h.cloneRepeat(a,b,!0)}))}catch(e){console.log("Ignored error:",e)}}),c=new d({join:!1}),b=(new XMLSerializer).serializeToString(g),c.AddSource(b),c.AddSource(a),c.error.code)throw new Error(c.error.text);this.xml.querySelector("instance").removeChild(g),g=this.xml.adoptNode(c.Get(0).documentElement,!0),e.appendChild(g),this.rootElement=g}},h.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).get().each(function(){this.textContent=this.textContent.trim()})},h.prototype.deprecateId=function(){var a,b,c,d,e;if(a=this.xml.querySelectorAll("* > meta > instanceID"),1!==a.length)throw new Error("Invalid primary instance. Found "+a.length+" instanceID nodes but expected 1.");if(b=a[0],c=this.xml.querySelectorAll("* > meta > deprecatedID"),c.length>1)throw new Error("Invalid primary instance. Found "+c.length+" deprecatedID nodes but expected 1.");d=c[0],d||(d=f.parseXML("<deprecatedID/>").documentElement,this.xml.adoptNode(d),e=this.xml.querySelector("* > meta"),e.appendChild(d)),d.textContent=b.textContent,b.textContent=""},h.prototype.bindJsEvaluator=a("./XPathEvaluatorBinding"),h.prototype.getInstanceID=function(){return this.node("/*/meta/instanceID").getVal()[0]},h.prototype.getInstanceName=function(){return this.node("/*/meta/instanceName").getVal()[0]},h.prototype.cloneRepeat=function(a,b,c){var d,e,g,h,i=this.templates[a]||this.node(a,0).get(),j=this;e=i.prop("nodeName"),d=this.node(a,b).get(),i[0]&&1===d.length&&0===d.nextAll(e).length?(h=i.clone().insertAfter(d),c?h.find("*").text(""):(g=[i.prop("nodeName")],i.find("*").each(function(){g.push(f(this).prop("nodeName"))}),this.$.trigger("dataupdate",{nodes:g,repeatPath:a,repeatIndex:j.node(a,b).determineIndex(h)}))):0===d.nextAll(e).length&&console.error("Could not find template node and/or node to insert the clone after")},h.prototype.extractTemplates=function(){var a=this;this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@jr:template]","nodes",null,null,!0).reverse().forEach(function(b){var c=f(b);a.templates[c.getXPath("instance")]=c.removeAttr("template").removeAttr("jr:template").remove()})},h.prototype.getTemplatePath=function(a){var b,c=this;return a.split("/").some(function(a,d,e){return b=e.slice(0,e.length-d).join("/"),c.templates[b]}),b||void 0},h.prototype.cloneAllTemplates=function(){var a=this;this.evaluate("/model/instance[1]/*//*[@template] | /model/instance[1]/*//*[@jr:template]","nodes",null,null,!0).forEach(function(b){var c=b.nodeName,d=f(b).getXPath("instance"),e=a.evaluate("ancestor::"+c+"[@template] | ancestor::"+c+"[@jr:template]","nodes",d,0,!0);0===e.length&&0===f(b).siblings(c).length&&f(b).clone().insertAfter(f(b)).find("*").addBack().removeAttr("template").removeAttr("jr:template")})},h.prototype.get=function(){return this.$||null},h.prototype.getXML=function(){return this.xml||null},h.prototype.getStr=function(){var a=(new XMLSerializer).serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return a=a.replace(/\t/g,""),a=a.replace(/\s(data-)(xmlns\=("|')[^\s\>]+("|'))/g," $2")},h.prototype.makeBugCompliant=function(a,b,c){var d,e,f,g,h,i,j,k;for(g=this.node(b,c).get(),k=g.parents().add(g),d=k.length-1;d>=0;d--)h=k.eq(d),i=h.prop("nodeName").replace(/\./g,"\\."),j=h.siblings(i).not("[template]"),"instance"!==i.toLowerCase()&&"model"!==i.toLowerCase()&&j.length>0&&(e=h.getXPath("instance"),f=j.add(h).index(h),new RegExp(e+"\\[").test(a)||(a=a.replace(new RegExp(e,"g"),e+"["+(f+1)+"]")));return a},h.prototype.nsResolver={lookupNamespaceURI:function(a){var b={jr:"http://openrosa.org/javarosa",xsd:"http://www.w3.org/2001/XMLSchema",orx:"http://openrosa.org/xforms/",cc:"http://commcarehq.org/xforms"};return b[a]||null}},h.prototype.shiftRoot=function(a){return this.hasInstance&&(a=a.replace(/^(\/(?!model\/)[^\/][^\/\s]*\/)/g,"/model/instance[1]$1"),a=a.replace(/([^a-zA-Z0-9\.\]\)\/\*_-])(\/(?!model\/)[^\/][^\/\s]*\/)/g,"$1/model/instance[1]$2")),a},h.prototype.replaceInstanceFn=function(a){var b,c=this;return a.replace(this.INSTANCE,function(a,d){if(b='/model/instance[@id="'+d+'"]',c.evaluate(b,"nodes",null,null,!0).length)return b;throw new g('instance "'+d+'" does not exist in model')})},h.prototype.replaceCurrentFn=function(a){return a=a.replace(/current\(\)\/\./g,"."),a=a.replace(/current\(\)/g,"")},h.prototype.replaceIndexedRepeatFn=function(a,b,c){var d=this,f=e.parseFunctionFromExpression(a,"indexed-repeat");return f.length?(f.forEach(function(e){var f,h,i,j=e[1];if(j.length%2!==1)throw new g("indexed repeat with incorrect number of parameters found: "+e[0]);for(h=j[0],f=j.length-1;f>1;f-=2)i=isNaN(j[f])?d.evaluate(j[f],"number",b,c,!0):j[f],h=h.replace(j[f-1],j[f-1]+"[position() = "+i+"]");a=a.replace(e[0],h)}),a):a},h.prototype.replacePullDataFn=function(a,b,c){var d=this,f=e.parseFunctionFromExpression(a,"pulldata");return f.length?(f.forEach(function(f){var h,i,j=f[1];if(4!==j.length)throw new g("pulldata with incorrect number of parameters found: "+f[0]);j[1]=e.stripQuotes(j[1]),j[2]=e.stripQuotes(j[2]),h=d.evaluate(j[3],"string",b,c,!0),h=""===h||isNaN(h)?"'"+h+"'":h,i="instance("+j[0]+")/root/item["+j[2]+" = "+h+"]/"+j[1],a=a.replace(f[0],i)}),a):a},h.prototype.evaluate=function(a,b,c,d,e){var f,h,i,j,k,l,m,n,o,p,q,r;q=a,e=e||!1,b=b||"any",d=d||0,i=this.xml,o=null,c?(m=this.node(c).get(),o=m.length,h=m.eq(d)[0]):h=this.rootElement,p=[a,c,d,o].join("|"),a=this.replaceIndexedRepeatFn(a,c,d),a=this.replacePullDataFn(a,c,d),r=q===a,this.convertedExpressions[p]?a=this.convertedExpressions[p]:(a=a,a=a.trim(),a=this.shiftRoot(a),a=this.replaceInstanceFn(a),a=this.replaceCurrentFn(a),o&&o>1&&(a=this.makeBugCompliant(a,c,d)),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&quot;/g,'"'),r&&(this.convertedExpressions[p]=a)),k={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],7:["nodes","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]};for(j in k)if(k.hasOwnProperty(j)){if(j=Number(j),k[j][0]===b)break;j=0}if(e&&"undefined"!=typeof i.evaluate&&!this.OPENROSA.test(a))try{l=i.evaluate(a,h,this.nsResolver,j,null)}catch(s){console.log("%cWell native XPath evaluation did not work... No worries, worth a shot, the expression probably contained unknown OpenRosa functions or errors:","color:orange",a)}if(!l)try{"undefined"==typeof i.jsEvaluate&&this.bindJsEvaluator(),l=i.jsEvaluate(a,h,this.nsResolver,j,null)}catch(s){throw new g("Could not evaluate: "+a+", message: "+s.message)}if(l){if(0===j){for(j in k)if(k.hasOwnProperty(j)&&(j=Number(j),j===Number(l.resultType)&&j>0&&4>j)){n=l[k[j][2]];break}console.error("Expression: "+a+" did not return any boolean, string or number value as expected")}else if(7===j)for(n=[],f=0;f<l.snapshotLength;f++)n.push(l.snapshotItem(f));else n=l[k[j][2]];return n}},i=function(a,b,c,d){var e=d.hasInstance?"/model/instance[1]//*":"//*";this.model=d,this.originalSelector=a,this.selector="string"==typeof a&&a.length>0?a:e,c="undefined"!=typeof c&&null!==c?c:{},this.filter=c,this.filter.onlyLeaf="undefined"!=typeof c.onlyLeaf?c.onlyLeaf:!1,this.filter.noEmpty="undefined"!=typeof c.noEmpty?c.noEmpty:!1,this.index=b},i.prototype.get=function(){var a,b;return this.nodes||(this.nodes=this.model.evaluate(this.selector,"nodes",null,null,!0)),a=this.filter.noEmpty===!0?f(this.nodes).filter(function(){var a=f(this);return b=a.text(),0===a.children().length&&b.trim().length>0}):this.filter.onlyLeaf===!0?f(this.nodes).filter(function(){return 0===f(this).children().length}):f(this.nodes),"undefined"!=typeof this.index&&null!==this.index?a.eq(this.index):a},i.prototype.setIndex=function(a){this.index=a},i.prototype.setVal=function(a,b,c){var d,e,g,h;return e=this.getVal()[0],g="undefined"!=typeof a&&null!==a?f.isArray(a)?a.join(" "):a.toString():"",g=this.convert(g,c),d=this.get(),1===d.length&&f.trim(g.toString())!==f.trim(e.toString())&&(d.text(g),h=this.getClosestRepeat(),h.nodes=[d.prop("nodeName")],this.model.$.trigger("dataupdate",h),"binary"===c&&(g.length>0?d.attr("type","file"):d.removeAttr("type"))),d.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):0===d.length?(console.log("Data node: "+this.selector+" with null-based index: "+this.index+" not found. Ignored."),null):null},i.prototype.getVal=function(){var a=[];return this.get().each(function(){a.push(f(this).text())}),a},i.prototype.determineIndex=function(a){var b,c,d;return a=a||this.get(),1===a.length?(b=a.prop("nodeName"),c=a.getXPath("instance"),d=this.model.$.find(b).filter(function(){return c===f(this).getXPath("instance")}),1===d.length?null:d.index(a)):(console.error("no node, or multiple nodes, provided to nodeset.determineIndex"),-1)},i.prototype.getClosestRepeat=function(){for(var a=this.get(),b=a.prop("nodeName");0===a.siblings(b).length&&"instance"!==b;)a=a.parent(),b=a.prop("nodeName");return"instance"===b?{}:{repeatPath:a.getXPath("instance"),repeatIndex:this.determineIndex(a)}},i.prototype.remove=function(){var a,b,c,d,e;a=this.get(),a.length>0?(b=[a.prop("nodeName")],a.find("*").each(function(){c=f(this),b.push(c.prop("nodeName"))}),d=a.getXPath("instance"),e=this.determineIndex(a),a.remove(),this.nodes=null,this.model.$.trigger("dataupdate",{updatedNodes:b,repeatPath:d,repeatIndex:e})):console.error("could not find node "+this.selector+" with index "+this.index+" to remove ")},i.prototype.convert=function(a,b){return""===a.toString()?a:"undefined"!=typeof b&&null!==b&&"undefined"!=typeof j[b.toLowerCase()]&&"undefined"!=typeof j[b.toLowerCase()].convert?j[b.toLowerCase()].convert(a):a},i.prototype.validate=function(a,b){var c;return b&&"undefined"!=typeof j[b.toLowerCase()]||(b="string"),a||"string"!==b&&"select"!==b&&"select1"!==b&&"binary"!==b?(c=this.getVal()[0],""===c.toString()?Promise.resolve(!0):Promise.resolve().then(function(){return j[b.toLowerCase()].validate(c)}).then(function(b){var c="undefined"!=typeof a&&null!==a&&a.length>0?this.model.evaluate(a,"boolean",this.originalSelector,this.index):!0;return b&&c})):Promise.resolve(!0)},j={string:{validate:function(){return!0}},select:{validate:function(){return!0}},select1:{validate:function(){return!0}},decimal:{validate:function(a){return!isNaN(a-0)&&null!==a},convert:function(a){return"NaN"===a?"":a}},"int":{validate:function(a){return!isNaN(a-0)&&null!==a&&Math.round(a).toString()===a.toString()},convert:function(a){return"NaN"===a?"":a}},date:{validate:function(a){var b=/([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/,c=b.exec(a);return c&&6===c.length?"Invalid Date"!==new Date(Number(c[1]),Number(c[3])-1,Number(c[5])).toString():!1},convert:function(a){var b=/([0-9]{4})([\-]|[\/])([0-9]{2})([\-]|[\/])([0-9]{2})/,c=b.exec(a),d=new Date(a);return"Invalid Date"===new Date(a).toString()&&c&&Number(c[1])>0&&Number(c[3])>=0&&Number(c[3])<12&&Number(c[5])<32&&(d=new Date(Number(c[1]),Number(c[3])-1,Number(c[5]))),d.getUTCFullYear().toString().pad(4)+"-"+(d.getUTCMonth()+1).toString().pad(2)+"-"+d.getUTCDate().toString().pad(2)}},datetime:{validate:function(a){return"Invalid Date"!==new Date(a.toString()).toString()||"Invalid Date"!==new Date(this.convert(a.toString())).toString()},convert:function(a){var b,c=/([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2}):([0-9]{2})$/,d=/([0-9]{4}\-[0-9]{2}\-[0-9]{2})([T]|[\s])([0-9]){2}:([0-9]){2}([0-9:.]*)(\+|\-)([0-9]{2})$/;return"Invalid Date"!==new Date(a).toString()&&c.test(a)?a:"Invalid Date"===new Date(a).toString()&&d.test(a)?a+":00":(b=new Date(a),"Invalid Date"!==b.toString()?b.toISOLocalString():b.toString())}},time:{validate:function(a){var b=new Date,c=a.toString().split(":");return c.length<2?!1:(c[2]=c[2]?Number(c[2].toString().split(".")[0]):0,c[0]<24&&c[0]>=0&&c[1]<60&&c[1]>=0&&c[2]<60&&c[2]>=0&&"Invalid Date"!==b.toString())},convert:function(a){var b=a.toString().split(":");return f.each(b,function(a,c){b[a]=c.toString().pad(2)}),b.join(":")}},barcode:{validate:function(){return!0}},geopoint:{validate:function(a){var b=a.toString().trim().split(" ");return""!==b[0]&&b[0]>=-90&&b[0]<=90&&""!==b[1]&&b[1]>=-180&&b[1]<=180&&("undefined"==typeof b[2]||!isNaN(b[2]))&&("undefined"==typeof b[3]||!isNaN(b[3])&&b[3]>=0)},convert:function(a){return f.trim(a.toString())}},geotrace:{validate:function(a){var b=a.toString().split(";");return b.length>=2&&b.every(function(a){return j.geopoint.validate(a)})},convert:function(a){return a.toString().trim()}},geoshape:{validate:function(a){console.debug("validating geoshape, this: ",this);var b=a.toString().split(";");return b.length>=4&&b[0]===b[b.length-1]&&b.every(function(a){return j.geopoint.validate(a)})},convert:function(a){return a.toString().trim()}},binary:{validate:function(){return!0}}},h.prototype.types=j,c.exports=h})},{"./FormLogicError":14,"./XPathEvaluatorBinding":17,"./extend":18,"./plugins":20,"./utils":22,"extended-xpath":"extended-xpath",jquery:9,"jquery-xpath-basic":8,"mergexml/mergexml":11,"openrosa-xpath-extensions":"openrosa-xpath-extensions"}],16:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d=a("jquery"),e=function(a,b,c){this.element=a,this.options=b||{},this.namespace=this.namespace||"somewidget",this.options.touch="undefined"!=typeof this.options.touch?this.options.touch:!1,this.event=c||null};e.prototype={destroy:function(a){d(a).removeData(this.namespace).off("."+this.namespace).show().next(".widget").remove()},disable:function(){},enable:function(){},update:function(){}},c.exports=e})},{jquery:9}],17:[function(a,b,c){var d=a("enketo-xpathjs");b.exports=function(){var a=new d.XPathEvaluator;d.bindDomLevel3XPath(this.xml,{window:{JsXPathException:!0,JsXPathExpression:!0,JsXPathNSResolver:!0,JsXPathResult:!0,JsXPathNamespace:!0},document:{jsCreateExpression:function(){return a.createExpression.apply(a,arguments)},jsCreateNSResolver:function(){return a.createNSResolver.apply(a,arguments)},jsEvaluate:function(){return a.evaluate.apply(a,arguments)}}})}},{"enketo-xpathjs":5}],18:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a){String.prototype.pad=function(a){for(var b=this;b.length<a;)b="0"+b;return b},Date.prototype.toISOLocalString=function(){var a={},b=function(a){return 10>a?"0"+a:a};return"Invalid Date"===this.toString()?this.toString():(a.minstotal=this.getTimezoneOffset(),a.direction=a.minstotal<0?"+":"-",a.hrspart=b(Math.abs(Math.floor(a.minstotal/60))),a.minspart=b(Math.abs(Math.floor(a.minstotal%60))),new Date(this.getTime()-60*a.minstotal*1e3).toISOString().replace("Z",a.direction+a.hrspart+":"+a.minspart))}})},{}],19:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(){var a=i.defer();return k?a.resolve(!0):a.reject(new Error("FileReader not supported.")),a.promise}function e(){return k}function f(){return!1}function g(a){var b,c,d=i.defer();return a?"string"==typeof a||("object"==typeof a?_isTooLarge(a)?(b=new Error("File too large (max "+Math.round(100*_getMaxSize()/1048576)/100+" Mb)"),d.reject(b)):(c=new FileReader,c.onload=function(a){d.resolve(a.target.result)},c.onerror=function(a){d.reject(b)},c.readAsDataURL(a)):d.reject(new Error("Unknown error occurred"))):d.resolve(null),d.promise}function h(){var a,b=[];return j('form.or input[type="file"]').each(function(){a=this.files[0],a&&b.push(a)}),b}var i=a("q"),j=a("jquery"),k="undefined"!=typeof FileReader,l="";c.exports={isSupported:e,notSupportedAdvisoryMsg:l,isWaitingForPermissions:f,init:d,getFileUrl:g,getCurrentFiles:h}})},{jquery:9,q:12}],20:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d=a("jquery");d.fn.clearInputs=function(a){return a=a||"edit",this.each(function(){d(this).find(".file-preview").remove(),d(this).find("input, select, textarea").not(".ignore").each(function(){var b=d(this),c=b.attr("type");switch("SELECT"===b.prop("nodeName").toUpperCase()&&(c="select"),"TEXTAREA"===b.prop("nodeName").toUpperCase()&&(c="textarea"),c){case"date":case"datetime":case"time":case"number":case"search":case"color":case"range":case"url":case"email":case"password":case"text":case"file":b.removeAttr("data-previous-file-name data-loaded-file-name");case"hidden":case"textarea":""!==b.val()&&b.val("").trigger(a);break;case"radio":case"checkbox":b.prop("checked")&&(b.prop("checked",!1),b.trigger(a));break;case"select":b[0].selectedIndex>=0&&(b[0].selectedIndex=-1,b.trigger(a));break;default:console.error("Unrecognized input type found when trying to reset",this)}})})},d.fn.reverse=[].reverse})},{jquery:9}],21:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d={inputtypes:{}},e=["date","datetime","time"];e.forEach(function(a){var b=document.createElement("input");b.setAttribute("type",a),d.inputtypes[a]="text"!==b.type}),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(d.touch=!0,document.documentElement.classList.add("touch")):d.touch=!1,c.exports=d})},{}],22:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g,h,i=new RegExp(b+"\\s*\\(","g"),j=[];if(!a||!b)return j;for(;null!==(d=i.exec(a));){for(e=1,h=[],f=d.index,c=i.lastIndex,g=c;0!==e;)c++,"("===a[c]?e++:")"===a[c]?e--:","===a[c]&&1===e&&(h.push(a.substring(g,c).trim()),g=c+1);h.push(a.substring(g,c).trim()),j.push([a.substring(f,c+1),h])}return j}function e(a){return/^".+"$/.test(a)||/^'.+'$/.test(a)?a.substring(1,a.length-1):a}c.exports={parseFunctionFromExpression:d,stripQuotes:e}})},{}],23:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m=a("text!enketo-config"),n=a("./support"),o=a("jquery"),p=a("widgets").filter(function(a){
return a.selector});"string"==typeof m&&(m=JSON.parse(m)),e=function(a){d=o("form.or"),a=a||d,p.forEach(function(b){j(b,a)})},f=function(a){for(var b,c,d=0;d<p.length;d++)b=p[d],b.name&&(c=i(a,b.selector),c[b.name]("enable"))},g=function(a){for(var b,c,d=0;d<p.length;d++)b=p[d],b.name&&(c=i(a,b.selector),c[b.name]("disable"))},h=function(a){for(var b,c,d=0;d<p.length;d++)b=p[d],b.name&&(c=i(a,b.selector),c[b.name]("destroy"))},i=function(a,b){return b?"form"===b?d:a.find(b):o()},j=function(a,b){var c;return a.options=a.options||{},a.options.touch=n.touch,a.name?(c=i(b,a.selector),void(c.length&&(c[a.name](a.options),k(a,c),l(a,c)))):console.error("widget doesn't have a name")},k=function(a,b){b.length>0&&d.on("changelanguage",function(){b[a.name]("update")})},l=function(a,b){b.length>0&&"select"===b.prop("nodeName").toLowerCase()&&d.on("changeoption","select",function(){o(this)[a.name]("update")})},c.exports={init:e,enable:f,disable:g,destroy:h}})},{"./support":21,jquery:9,"text!enketo-config":"text!enketo-config",widgets:"widgets"}],24:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("bootstrap-datepicker/dist/js/bootstrap-datepicker");var h="datepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this,b=g(this.element).parent("label"),c=b.hasClass("or-appearance-year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:b.hasClass("or-appearance-month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"day"},d=this._createFakeDateInput(c.format);this._setManualHandler(d),this._setFocusHandler(d),this._setResetHandler(d),d.datepicker({format:c.format,autoclose:!0,todayHighlight:!0,startView:c.startView,minViewMode:c.minViewMode}).on("changeDate",function(){var b=g(this).val();"decade"===c.startView&&4===b.length?b+="-01-01":"year"===c.startView&&b.length<8&&(b+="-01"),g(a.element).val(b).trigger("change").blur()})},d.prototype._createFakeDateInput=function(a){var b=g(this.element),c=g('<div class="widget date"><input class="ignore input-small" readonly="readonly" type="text" value="'+b.val()+'" placeholder="'+a+'" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),d=c.find("input");return b.hide().after(c),d},d.prototype._setManualHandler=function(a){},d.prototype._setResetHandler=function(a){a.next(".btn-reset").on("click",function(){a.val("").trigger("changeDate").datepicker("update")})},d.prototype._setFocusHandler=function(a){var b=this;a.on("focus blur",function(a){g(b.element).trigger("fake"+a.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h),i=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;e||"object"!=typeof a||a.touch&&f.inputtypes.date&&!i.test(navigator.userAgent)?e&&"string"==typeof a&&e[a](this):c.data(h,e=new d(this,a,b))})},c.exports={name:h,selector:'input[type="date"]:not([readonly])'}})},{"../../js/Widget":16,"../../js/support":21,"bootstrap-datepicker/dist/js/bootstrap-datepicker":2,jquery:9}],25:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("../../js/extend"),a("bootstrap-datepicker/dist/js/bootstrap-datepicker"),a("bootstrap-timepicker/js/bootstrap-timepicker");var h="datetimepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){function a(){if(h.val().length>0&&i.val().length>0){var a=h.val().split("-"),c=i.val().split(":");b.val(new Date(a[0],a[1]-1,a[2],c[0],c[1]).toISOLocalString()).trigger("change").blur()}else b.val("").trigger("change").blur()}var b=g(this.element),c=b.val().length>0?new Date(b.val()).toISOLocalString():"",d=c.split("T"),e=d[0],f=d[1]&&d[1].length>4?d[1].substring(0,5):"",h=this._createFakeDateInput(e),i=this._createFakeTimeInput(f);b.hide().after('<div class="datetimepicker widget" />'),b.siblings(".datetimepicker").append(h.closest(".date")).append(i.closest(".bootstrap-timepicker")),h.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),i.timepicker({defaultTime:f.length>0?"value":"current",showMeridian:!1}).val(f).closest(".widget").find("input").addClass("ignore"),this._setManualHandler(h),this._setFocusHandler(h.add(i)),h.on("change changeDate",function(){return a(),!1}),i.on("change",function(){return a(),!1}),i.next(".btn-reset").on("click",function(){h.val("").trigger("change").datepicker("update"),i.val("").trigger("change")})},d.prototype._createFakeDateInput=function(a){var b=g('<div class="date"><input class="ignore input-small" type="text" readonly="readonly" value="'+a+'" placeholder="yyyy-mm-dd"/></div>'),c=b.find("input");return c},d.prototype._createFakeTimeInput=function(a){var b=g('<div class="bootstrap-timepicker"><input class="ignore timepicker-default input-small" readonly="readonly" type="text" value="'+a+'" placeholder="hh:mm"/><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),c=b.find("input");return c},d.prototype._setManualHandler=function(){},d.prototype._setFocusHandler=function(a){var b=this;a.on("focus blur",function(a){g(b.element).trigger("fake"+a.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h),i=/GT-P31[0-9]{2}.+AppleWebKit\/534\.30/;e||"object"!=typeof a||a.touch&&f.inputtypes.datetime&&!i.test(navigator.userAgent)?e&&"string"==typeof a&&e[a](this):c.data(h,e=new d(this,a,b))})},c.exports={name:h,selector:'input[type="datetime"]:not([readonly])'}})},{"../../js/Widget":16,"../../js/extend":18,"../../js/support":21,"bootstrap-datepicker/dist/js/bootstrap-datepicker":2,"bootstrap-timepicker/js/bootstrap-timepicker":4,jquery:9}],26:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery");a("bootstrap-slider-basic");var g="distresspicker";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a="decimal"===f(this.element).attr("data-type-xml")?.1:1,b=Number(this.element.value)||-1;f(this.element).slider({reversed:!0,min:-1,max:10,orientation:"vertical",step:a,value:b}),this.$widget=f(this.element).next(".widget"),this.$slider=this.$widget.find(".slider"),this._addBulb(),this._addScale(),this._setChangeHandler()},d.prototype._addBulb=function(){this.$slider.append('<div class="bulb"><div class="inner"></div></div>')},d.prototype._addScale=function(){for(var a=f('<div class="scale"></div>'),b=10;b>=-1;b--)a.append('<div class="number"><div class="value">'+b+"</div></div>");this.$slider.prepend(a)},d.prototype._setChangeHandler=function(){f(this.element).on("slideStop."+this.namespace,function(a){-1===Number(this.value)&&(this.value=""),f(this).trigger("change")})},d.prototype.disable=function(){console.log("disableing",this.element),f(this.element).slider("disable").slider("setValue",this.element.value)},d.prototype.enable=function(){f(this.element).slider("enable")},f.fn[g]=function(a,b){return this.each(function(){var c=f(this),e=f(this).data(g);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,e=new d(this,a,b))})},c.exports={name:g,selector:'.or-appearance-distress input[type="number"]'}})},{"../../js/Widget":16,"bootstrap-slider-basic":3,jquery:9}],27:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){c&&(c.stopPropagation(),c.preventDefault()),this.namespace=h,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g=a("../../js/file-manager"),h="filepicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=e(this.element),b=a.attr("data-loaded-file-name"),c=this;if(this.mediaType=a.attr("accept"),a.attr("disabled","disabled").addClass("transparent").parent().addClass("with-media clearfix"),this.$widget=e('<div class="widget file-picker"><div class="fake-file-input"></div><div class="file-feedback"></div><div class="file-preview"></div></div>').insertAfter(a),this.$feedback=this.$widget.find(".file-feedback"),this.$preview=this.$widget.find(".file-preview"),this.$fakeInput=this.$widget.find(".fake-file-input"),b&&this._showFileName(b,this.mediaType),!g||!g.isSupported()){var d=g.notSupportedAdvisoryMsg?g.notSupportedAdvisoryMsg:"";return void this._showFeedback("Media questions are not supported in this browser. "+d,"warning")}g.isWaitingForPermissions()&&this._showFeedback("Waiting for user permissions.","warning"),g.init().then(function(){c._showFeedback(),c._changeListener(),a.removeAttr("disabled"),b&&g.getFileUrl(b).then(function(a){c._showPreview(a,c.mediaType)})["catch"](function(){c._showFeedback('File "'+b+'" could not be found (leave unchanged if already submitted and you want to preserve it).',"error")})})["catch"](function(a){c._showFeedback(a.message,"error")})},d.prototype._getMaxSubmissionSize=function(){var a=e(document).data("maxSubmissionSize");return a||5242880},d.prototype._changeListener=function(){var a=this;e(this.element).on("change.propagate."+this.namespace,function(b){var c,d,f=e(this),h=f.attr("data-loaded-file-name");return"propagate"===b.namespace?(f.trigger("change.file"),!1):(b.stopImmediatePropagation(),c=this.files[0],d=a._getFileName(c),void g.getFileUrl(c).then(function(b){a._showPreview(b,a.mediaType),a._showFeedback(""),a._showFileName(d),h&&h!==d&&f.removeAttr("data-loaded-file-name"),f.trigger("change.propagate")})["catch"](function(b){f.val("").trigger("change.propagate"),a._showFileName(""),a._showPreview(null),a._showFeedback(b.message,"error")}))})},d.prototype._getFileName=function(a){return"object"==typeof a&&a.name?a.name:""},d.prototype._showFileName=function(a){this.$fakeInput.text(a)},d.prototype._showFeedback=function(a,b){a=a||"",b=b||"",this.$feedback.text(a).attr("class","file-feedback "+b)},d.prototype._showPreview=function(a,b){var c;switch(this.$widget.find(".file-preview").empty(),b){case"image/*":c=e("<img />");break;case"audio/*":c=e('<audio controls="controls"/>');break;case"video/*":c=e('<video controls="controls"/>');break;default:c=e("<span>No preview for this mediatype</span>")}a&&this.$preview.append(c.attr("src",a))},e.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(h);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(h,f=new d(this,a,b))})},c.exports={name:h,selector:'input[type="file"]'}})},{"../../js/Widget":16,"../../js/file-manager":19,jquery:9}],28:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=l,h.call(this,a,b),this._init()}var e,f,g=a("jquery"),h=a("../../js/Widget"),i=a("text!enketo-config"),j=a("leaflet"),k=a("q"),l="geopicker",m=15,n=i&&i.maps&&i.maps.length>0?i.maps:[{name:"streets",maxzoom:24,tiles:["http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png"],attribution:'Tiles courtesy of <a href="http://hot.openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}],o="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}",p=i.googleApiKey||i.google_api_key,q=j.divIcon({iconSize:24,className:"enketo-geopoint-marker"}),r=j.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker"}),s=j.divIcon({iconSize:16,className:"enketo-geopoint-circle-marker-active"});d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=g(this.element).val().trim(),b=this;this.$form=g(this.element).closest("form.or"),this.$question=g(this.element).closest(".question"),this.mapId=Math.round(1e7*Math.random()),this.props=this._getProps(),this._addDomElements(),this.currentIndex=0,this.points=[],a&&g(this.element).val().trim().split(";").forEach(function(a,c){b.points[c]=a.trim().split(" "),b.points[c].forEach(function(a,b,c){c[b]=Number(a)})}),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",function(a){var c=b.$lat.val()?Number(b.$lat.val()):"",d=b.$lng.val()?Number(b.$lng.val()):"",e=b.$alt.val()?Number(b.$alt.val()):"",f=b.$acc.val()?Number(b.$acc.val()):"",g={lat:c,lng:d};a.stopImmediatePropagation(),"bymap"!==a.namespace&&"bysearch"!==a.namespace&&b.polyline&&!b.containsEmptyPoints(b.points,b.currentIndex)&&b.updatedPolylineWouldIntersect(g,b.currentIndex)?(b._showIntersectError(),b._updateInputs(b.points[b.currentIndex],"nochange")):(b._editPoint([c,d,e,f]),"bysearch"!==a.namespace&&b.$search&&b.$search.val(""))}),this.$kmlInput.on("change",function(a){var c=b.$points.find(".addpoint"),d=g(this).prev(".paste-progress").removeClass("hide"),e=a.target.value,f=b._convertKmlCoordinatesToLeafletCoordinates(e);a.target.value="",setTimeout(function(){f.forEach(function(a,d){b._updateInputs(a),d<f.length-1&&c.click()}),d.remove(),b._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",function(a){var c=b.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return b._switchInputType(c),!1}),g(this.element).on("change",function(){b.$kmlInput.prop("disabled",!!this.value)}),this.$points.on("click",".point",function(){return b._setCurrent(b.$points.find(".point").index(g(this))),b._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",function(){return b._addPoint(),!1}),this.$widget.find(".close-chain-btn").on("click",function(){return b._closePolygon(),!1}),this.$widget.find(".btn-remove").on("click",function(){b.points.length<2?b._updateInputs([]):window.confirm("This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?")&&b._removePoint()}),this.$map.find(".show-map-btn").on("click",function(){return b.$widget.find(".search-bar").removeClass("hide-search"),b.$widget.addClass("full-screen"),b._updateMap(),!1}),this.$form.on("pageflip.enketo.map"+this.mapId,function(a){b.map&&g.contains(a.target,b.element)&&(b.map.invalidateSize(),b.$form.off("pageflip.enketo.map"+b.mapId))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){b.$widget.toggleClass("hide-input"),g(this).toggleClass("open",b.$widget.hasClass("hide-input")),b.map&&b.map.invalidateSize(!1)}).toggleClass("open",b.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",function(){return b.$widget.find(".search-bar").addClass("hide-search"),b.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container"),b.map&&(b.map.remove(),b.map=null,b.polygon=null,b.polyline=null),!1}),this.$widget.on("focus blur","input",function(a){g(b.element).trigger(a.type)}),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),a?this.points.forEach(function(a,c){b._addPointBtn(c+1)}):this._addPoint(),a?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&navigator.geolocation.getCurrentPosition(function(a){b._updateMap([a.coords.latitude,a.coords.longitude],m)}))},d.prototype._switchInputType=function(a){"kml"===a?this.$inputGroup.addClass("kml-input-mode"):"points"===a&&this.$inputGroup.removeClass("kml-input-mode")},d.prototype._getProps=function(){var a=[],b=this.options.touch!==!0||this.options.touch===!0&&g(this.element).closest(".or-appearance-maps").length>0;return b&&(a=g(this.element).closest(".question").attr("class").split(" ").filter(function(a){return"or-appearance-maps"!==a&&/or-appearance-/.test(a)}),a.forEach(function(b,c){a[c]=b.substring(14)})),{detect:!!navigator.geolocation,map:b,search:b,appearances:a,type:this.element.attributes["data-type-xml"].value,touch:this.options.touch,wide:this.$question.width()/this.$question.closest("form.or").width()>.8}},d.prototype._addPointBtn=function(a){this.$points.find(".addpoint").before('<a href="#" class="point"> </a>')},d.prototype._addDomElements=function(){var a='<div class="map-canvas-wrapper"><div class=map-canvas id="map'+this.mapId+'"></div></div>',b='<div class="points"><button type="button" class="addpoint">+</button></div>',c='<a href="#" class="toggle-input-type-btn"><span class="kml-input">KML</span><span class="points-input">points</span></a><label class="geo kml">KML coordinates<progress class="paste-progress hide"></progress><textarea class="ignore" name="kml" placeholder="paste KML coordinates here"></textarea><span class="disabled-msg">remove all points to enable</span></label>',d='<button type="button" class="close-chain-btn btn btn-default btn-xs">close polygon</button>',e='<button type="button" class="show-map-btn btn btn-default">Map</button>';if(this.$widget=g('<div class="geopicker widget"><div class="search-bar hide-search no-map no-detect"><button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button><button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button><div class="input-group"><input class="geo ignore" name="search" type="text" placeholder="search for place or address" disabled="disabled"/><button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button></div></div><div class="geo-inputs"><label class="geo lat">latitude (x.y &deg;)<input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/></label><label class="geo long">longitude (x.y &deg;)<input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/></label><label class="geo alt">altitude (m)<input class="ignore" name="alt" type="number" step="0.1" /></label><label class="geo acc">accuracy (m)<input class="ignore" name="acc" type="number" step="0.1" /></label><button type="button" class="btn-icon-only btn-remove"><span class="icon icon-trash"> </span></button></div></div>'),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(a),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn"> </button>')):this.$map=g(),this.props.touch&&this.props.map&&this.$map.append(e),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),"geopoint"!==this.props.type){this.$points=g(b),this.$widget.prepend(this.$points),"geoshape"===this.props.type&&this.$inputGroup.append(d);var f=g(c);this.$kmlInput=f.find('[name="kml"]'),this.$inputGroup.prepend(f)}else this.$points=g(),this.$kmlInput=g();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),g(this.element).hide().after(this.$widget).parent().addClass("clearfix")},d.prototype._updateValue=function(){var a=g(this.element).val(),b="",c=this;return this._markAsValid(),this.points.forEach(function(a,d,e){var f,g="number"==typeof a[0]?a[0]:"number"==typeof a.lat?a.lat:null,h="number"==typeof a[1]?a[1]:"number"==typeof a.lng?a.lng:null,i="number"==typeof a[2]?a[2]:0,j="number"==typeof a[3]?a[3]:0;f=g&&h?g+" "+h+" "+i+" "+j:"",c._isValidGeopoint(f)||""===f&&d===e.length-1||c._markAsInvalid(d),""!==f||d!==e.length-1?(b+=f,d!==e.length-1&&(b+=";")):b=b.substring(0,b.lastIndexOf(";"))}),a!==b?(g(this.element).val(b).trigger("change"),!0):!1},d.prototype._isValidGeopoint=function(a){var b;return a?(b=a.toString().split(" "),""!==b[0]&&b[0]>=-90&&b[0]<=90&&""!==b[1]&&b[1]>=-180&&b[1]<=180&&("undefined"==typeof b[2]||!isNaN(b[2]))&&("undefined"==typeof b[3]||!isNaN(b[3])&&b[3]>=0)):!1},d.prototype._isValidLatLngList=function(a){var b=this;return a.every(function(a,c,d){return b._isValidLatLng(a)||""===a.join()&&c===d.length-1})},d.prototype._isValidLatLng=function(a){var b,c;return b="number"==typeof a[0]?a[0]:"number"==typeof a.lat?a.lat:null,c="number"==typeof a[1]?a[1]:"number"==typeof a.lng?a.lng:null,null!==b&&null!==c&&b>=-90&&90>=b&&c>=-180&&180>=c},d.prototype._markAsInvalid=function(a){this.$points.find(".point").eq(a).addClass("has-error")},d.prototype._markAsValid=function(){this.$points.find(".point").removeClass("has-error")},d.prototype._setCurrent=function(a){this.currentIndex=a,this.$points.find(".point").removeClass("active").eq(a).addClass("active"),this._updateInputs(this.points[a],""),!this.map||this.props.touch&&!this._inFullScreenMode()||this._updateMarkers()},d.prototype._enableDetection=function(){var a=this,b={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(function(c){return c.preventDefault(),navigator.geolocation.getCurrentPosition(function(b){var c={lat:Math.round(1e6*b.coords.latitude)/1e6,lng:Math.round(1e6*b.coords.longitude)/1e6};a.polyline&&a.updatedPolylineWouldIntersect(c,a.currentIndex)?a._showIntersectError():(a._updateInputs([c.lat,c.lng,b.coords.altitude,b.coords.accuracy]),a.currentIndex===a.points.length-1&&"geopoint"!==a.props.type&&a._addPoint())},function(){console.error("error occurred trying to obtain position")},b),!1})},d.prototype._enableSearch=function(){var a=this;o=p?o.replace("{api_key}",p):o.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(b){var c=g(this).val();b.stopImmediatePropagation(),c&&(c=c.split(/\s+/).join("+"),g.get(o.replace("{address}",c),function(b){var d;b.results&&b.results.length>0&&b.results[0].geometry&&b.results[0].geometry.location?(d=b.results[0].geometry.location,a._updateMap([d.lat,d.lng],m),a.$search.closest(".input-group").removeClass("has-error")):(a.$search.closest(".input-group").addClass("has-error"),console.log('Location "'+c+'" not found'))},"json").fail(function(){a.$search.closest(".input-group").addClass("has-error"),console.log("Error. Geocoding service may not be available or app is offline")}).always(function(){}))})},d.prototype._dynamicMapAvailable=function(){return!!this.map},d.prototype._inFullScreenMode=function(){return this.$widget.hasClass("full-screen")},d.prototype._updateMap=function(a,b){var c=this;this.props.map&&(b||(b=this.map?this.map.getZoom()||m:m),a&&(this.lastLatLng=a,this.lastZoom=b),this.props.touch&&!this._inFullScreenMode()||(this.map?c._updateDynamicMapView(a,b):this._addDynamicMap().then(function(){c._updateDynamicMapView(a,b)})))},d.prototype._addDynamicMap=function(){var a=this;return this._getLayers().then(function(b){var c=k.defer(),d={layers:a._getDefaultLayer(b)};return a.map=j.map("map"+a.mapId,d).on("click",function(b){var c=b.latlng,d=a.$lat.val()&&a.$lng.val()?a.points.length:a.currentIndex;c.lat=Math.round(1e6*c.lat)/1e6,c.lng=Math.round(1e6*c.lng)/1e6,"geopoint"!==a.props.type&&!a.containsEmptyPoints(a.points,d)&&a.updatedPolylineWouldIntersect(c,d)?a._showIntersectError():a.$lat.val()&&a.$lng.val()&&"geopoint"!==a.props.type?a.$lat.val()&&a.$lng.val()&&(a._addPoint(),a._updateInputs(c,"change.bymap")):a._updateInputs(c,"change.bymap")}),a.map.attributionControl.setPrefix(""),b.length>1&&j.control.layers(a._getBaseLayers(b),null).addTo(a.map),a.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),a.map.on("baselayerchange",function(){a.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")}),c.resolve(),c.promise})},d.prototype._updateDynamicMapView=function(a,b){a?this.map.setView(a,b||m):(this._updatePolyline(),this._updateMarkers(),1===this.points.length&&""===this.points[0].toString()&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||m):this.map.setView(j.latLng(0,0),b||m)))},d.prototype._showIntersectError=function(){alert("Borders cannot intersect!")},d.prototype._getLayers=function(){var a=this,b=[];return n.forEach(function(c,d){"string"==typeof c.tiles&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(c.tiles)?b.push(a._getGoogleTileLayer(c,d)):c.tiles?b.push(a._getLeafletTileLayer(c,d)):console.error("Configuration error for map tiles. Not a valid tile layer: ",c)}),k.all(b)},d.prototype._getLeafletTileLayer=function(a,b){var c,d=this._getTileOptions(a,b),e=k.defer();return a.tileIndex=void 0===a.tileIndex?Math.round(100*Math.random())%a.tiles.length:a.tileIndex,c=a.tiles[a.tileIndex],e.resolve(j.tileLayer(c,d)),e.promise},d.prototype._getGoogleTileLayer=function(a,b){var c=k.defer(),d=this._getTileOptions(a,b),e=a.tiles.substring(7);return this._loadGoogleMapsScript().then(function(){c.resolve(new j.Google(e,d))}),c.promise},d.prototype._getTileOptions=function(a,b){var c=a.name||"map-"+(b+1);return{id:a.id||c,maxZoom:a.maxzoom||18,minZoom:a.minzoom||0,name:c,attribution:a.attribution||""}},d.prototype._loadGoogleMapsScript=function(){var a,b;return e||(f=k.defer(),window.gmapsLoaded=function(){delete window.gmapsLoaded,f.resolve()},a=p?"&key="+p:"",b="http://maps.google.com/maps/api/js?v=3.exp"+a+"&sensor=false&libraries=places&callback=gmapsLoaded",g.getScript(b),e=!0),f.promise},d.prototype._getDefaultLayer=function(a){var b,c=this;return a.reverse().some(function(a){return b=a,c.props.appearances.some(function(b){return b===a.options.name})}),b},d.prototype._getBaseLayers=function(a){var b={};return a.forEach(function(a){b[a.options.name]=a}),b},d.prototype._updateMarkers=function(){var a=[],b=[],c=this;this.markerLayer&&this.markerLayer.clearLayers(),this.points.length<2&&""===this.points[0].join()||(this.points.forEach(function(d,e){var f="geopoint"===c.props.type?q:e===c.currentIndex?s:r;c._isValidLatLng(d)?(a.push(d),b.push(j.marker(d,{icon:f,clickable:!0,draggable:!0,alt:e,opacity:.9}).on("click",function(a){0===a.target.options.alt&&"geoshape"===c.props.type?c._closePolygon():c._setCurrent(a.target.options.alt)}).on("dragend",function(a){var b=a.target.getLatLng(),d=a.target.options.alt;b.lat=Math.round(1e6*b.lat)/1e6,b.lng=Math.round(1e6*b.lng)/1e6,c.polyline&&c.updatedPolylineWouldIntersect(b,d)?(c._showIntersectError(),c._updateMarkers()):(c._setCurrent(d),c._updateInputs(b,"change.bymap"),c._updateMap())}))):console.debug("this latLng was not considered valid",d)}),b.length>0&&(this.markerLayer=j.layerGroup(b).addTo(this.map),1!==this.points.length&&this._isValidLatLngList(this.points)||this.map.setView(a[0],this.lastZoom||m)))},d.prototype._updatePolyline=function(){var a,b=this;if("geopoint"!==this.props.type){if(this.points.length<2||!this._isValidLatLngList(this.points))return this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,void(this.polygon=null);"geoshape"===this.props.type&&this._updatePolygon(),a=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),this.polyline?this.polyline.setLatLngs(a):(this.polyline=j.polyline(a,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(function(){b.map.fitBounds(b.polyline.getBounds())},0)}},d.prototype._updatePolygon=function(){var a;"geopoint"!==this.props.type&&"geotrace"!==this.props.type&&(a=""!==this.points[this.points.length-1].join("")?this.points:this.points.slice(0,this.points.length-1),this.polygon?this.polygon.setLatLngs(a):(this.polygon=j.polygon(a,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(a))},d.prototype._updateArea=function(a){var b,c;a.length>2?(b=j.GeometryUtil.geodesicArea(a),c=j.GeometryUtil.readableArea(b),j.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(c).openOn(this.map)):this.map.closePopup()},d.prototype._addPoint=function(){this._addPointBtn(this.points.length+1),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()},d.prototype._editPoint=function(a){var b;return this.points[this.currentIndex]=a,b=this._updateValue(),b&&this._updateMap(),b},d.prototype._removePoint=function(){var a=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),"undefined"==typeof this.points[this.currentIndex]&&(a=this.currentIndex-1),this._setCurrent(a),this._updateMap()},d.prototype._closePolygon=function(){var a=this.points[this.points.length-1];if(!(this.points.length<3||3===this.points.length&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(a)))return this._isValidLatLng(a)?(console.log("current last point is valid, so will create a new one to use to close"),this._addPoint()):(console.log("current last point is not a valid point, so will use this as closing point"),this.currentIndex=this.points.length-1),this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex)?this._showIntersectError():void this._updateInputs(this.points[0])},d.prototype._updateInputs=function(a,b){var c=a[0]||a.lat||"",d=a[1]||a.lng||"",e=a[2]||a.alt||"",f=a[3]||a.acc||"";b="undefined"!=typeof b?b:"change",this.$lat.val(c||""),this.$lng.val(d||""),this.$alt.val(e||""),this.$acc.val(f||"").trigger(b)},d.prototype._convertKmlCoordinatesToLeafletCoordinates=function(a){var b=[],c=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/,d=c.test(a);return a=d?a.match(c)[1]:a,a.trim().split(/\s+/).forEach(function(a){var c=[];a.split(",").forEach(function(a,b){var d=Number(a);0===b?c[1]=d:1===b?c[0]=d:2===b&&(c[2]=d)}),b.push(c)}),b},d.prototype.disable=function(){this.$map.hide(),this.$widget.find(".btn").addClass("disabled")},d.prototype.enable=function(){this.$map.show(),this.$widget.find(".btn").removeClass("disabled"),this.map&&this.map.invalidateSize()},d.prototype.containsEmptyPoints=function(a,b){return a.some(function(a,c){return!(c===b||a[0]&&a[1])})},d.prototype.updatedPolylineWouldIntersect=function(a,b){var c,d,e,f=[];return this.points<3?!1:(g.extend(!0,f,this.points),f[b]=[a[0]||a.lat,a[1]||a.lng],c=""!==f[f.length-1].join("")?f:f.slice(0,f.length-1),c[0][0]===c[c.length-1][0]&&c[0][1]===c[c.length-1][1]&&(c=c.slice(0,c.length-1)),d=j.polyline(c,{color:"white"}),this.map.addLayer(d),e=d.intersects(),this.map.removeLayer(d),e)},j.GeometryUtil=j.extend(j.GeometryUtil||{},{geodesicArea:function(a){var b,c,d=6378100,e=a.length,f=0,g=j.LatLng.DEG_TO_RAD;if(e>2){for(var h=0;e>h;h++)b={lat:a[h][0],lng:a[h][1]},c={lat:a[(h+1)%e][0],lng:a[(h+1)%e][1]},f+=(c.lng-b.lng)*g*(2+Math.sin(b.lat*g)+Math.sin(c.lat*g));f=f*d*d/2}return Math.abs(f)},readableArea:function(a){var b;return b=a>=1e4?(1e-4*a).toFixed(2)+" ha":a.toFixed(0)+" m&sup2;"}}),j.Polyline.include({intersects:function(){var a,b,c,d=this._originalPoints,e=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=e-1;a>=3;a--)if(b=d[a-1],c=d[a],this._lineSegmentsIntersectsRange(b,c,a-2))return!0;return!1},_tooFewPointsForIntersection:function(a){var b=this._originalPoints,c=b?b.length:0;return c+=a||0,!this._originalPoints||3>=c},_lineSegmentsIntersectsRange:function(a,b,c,d){
var e,f,g=this._originalPoints;d=d||0;for(var h=c;h>d;h--)if(e=g[h-1],f=g[h],j.LineUtil.segmentsIntersect(a,b,e,f))return!0;return!1}}),j.Util.extend(j.LineUtil,{segmentsIntersect:function(a,b,c,d){return this._checkCounterclockwise(a,c,d)!==this._checkCounterclockwise(b,c,d)&&this._checkCounterclockwise(a,b,c)!==this._checkCounterclockwise(a,b,d)},_checkCounterclockwise:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}}),g.fn[l]=function(a,b){return this.each(function(){try{var c=g(this),e=g(this).data(l);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(l,e=new d(this,a,b))}catch(f){console.log("Failed to initialise geopicker for "+this+": "+f)}})},j.Google=j.Class.extend({includes:j.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,mapOptions:{backgroundColor:"#dddddd"}},initialize:function(a,b){j.Util.setOptions(this,b),this._ready=void 0!==google.maps.Map,this._ready||j.Google.asyncWait.push(this),this._type=a||"SATELLITE"},onAdd:function(a,b){this._map=a,this._insertAtTheBottom=b,this._initContainer(),this._initMapObject(),a.on("viewreset",this._resetCallback,this),this._limitedUpdate=j.Util.limitExecByInterval(this._update,150,this),a.on("move",this._update,this),a.on("zoomanim",this._handleZoomAnim,this),a._controlCorners.bottomright.style.marginBottom="20px",this._reset(),this._update()},onRemove:function(a){a._container.removeChild(this._container),a.off("viewreset",this._resetCallback,this),a.off("move",this._update,this),a.off("zoomanim",this._handleZoomAnim,this),a._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(a){this.options.opacity=a,1>a&&j.DomUtil.setOpacity(this._container,a)},setElementSize:function(a,b){a.style.width=b.x+"px",a.style.height=b.y+"px"},_initContainer:function(){var a=this._map._container,b=a.firstChild;this._container||(this._container=j.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer_"+j.Util.stamp(this),this._container.style.zIndex="auto"),a.insertBefore(this._container,b),this.setOpacity(this.options.opacity),this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(this._ready){this._google_center=new google.maps.LatLng(0,0);var a=new google.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.mapOptions.styles,backgroundColor:this.options.mapOptions.backgroundColor}),b=this;this._reposition=google.maps.event.addListenerOnce(a,"center_changed",function(){b.onReposition()}),this._google=a,google.maps.event.addListenerOnce(a,"idle",function(){b._checkZoomLevels()}),this.fire("MapObjectInitialized",{mapObject:a})}},_checkZoomLevels:function(){this._google.getZoom()!==this._map.getZoom()&&this._map.setZoom(this._google.getZoom())},_resetCallback:function(a){this._reset(a.hard)},_reset:function(a){this._initContainer()},_update:function(a){if(this._google){this._resize();var b=this._map.getCenter(),c=new google.maps.LatLng(b.lat,b.lng);this._google.setCenter(c),this._google.setZoom(Math.round(this._map.getZoom())),this._checkZoomLevels()}},_resize:function(){var a=this._map.getSize();this._container.style.width===a.x&&this._container.style.height===a.y||(this.setElementSize(this._container,a),this.onReposition())},_handleZoomAnim:function(a){var b=a.center,c=new google.maps.LatLng(b.lat,b.lng);this._google.setCenter(c),this._google.setZoom(Math.round(a.zoom))},onReposition:function(){this._google&&google.maps.event.trigger(this._google,"resize")}}),j.Google.asyncWait=[],j.Google.asyncInitialize=function(){var a;for(a=0;a<j.Google.asyncWait.length;a++){var b=j.Google.asyncWait[a];b._ready=!0,b._container&&(b._initMapObject(),b._update())}j.Google.asyncWait=[]},c.exports={name:l,selector:'input[data-type-xml="geopoint"], input[data-type-xml="geotrace"], input[data-type-xml="geoshape"]'}})},{"../../js/Widget":16,jquery:9,leaflet:10,q:12,"text!enketo-config":"text!enketo-config"}],29:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="horizontalChoices";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){e(this.element).find(".option-wrapper").each(function(){var a=e(this),b=a.find("label");b.length%3===2&&a.append('<label class="filler"></label>')})},d.prototype.destroy=function(){},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);f||"object"!=typeof a?f&&"string"==typeof a&&f[a](this):c.data(g,f=new d(this,a,b))})},c.exports={name:g,selector:".or-appearance-horizontal"}})},{"../../js/Widget":16,jquery:9}],30:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){c.exports={name:"mediagridpicker"}})},{}],31:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=g,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery");a("../../js/plugins");var g="notewidget";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=f(this.element);a.find("[readonly]").addClass("ignore"),a.is(".note")&&!a.next().is(".note")&&a.addClass("last-of-class")},d.prototype.destroy=function(a){},f.fn[g]=function(a,b){return this.each(function(){var c=f(this),e=c.data(g);a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(g,e=new d(this,a,b))})},c.exports={name:g,selector:".note"}})},{"../../js/Widget":16,"../../js/plugins":20,jquery:9}],32:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("jquery");a("../../js/plugins");var g=null,h="radiopicker";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){this._setDelegatedHandlers()},d.prototype._setDelegatedHandlers=function(){var a,b,c=f(this.element);c.on("click",'input[type="radio"]:checked',function(a){f(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}),c.on("click",'input[type="checkbox"]',function(c){b=f(this),a=b.parent("label"),b.is(":checked")?a.attr("data-checked","true"):a.removeAttr("data-checked")}),c.on("click",'input[type="radio"], input[type="checkbox"]',function(a){g&&g.trigger("fakeblur"),g=f(this).trigger("fakefocus")}),c.on("focusin fakefocus",'input:not([type="radio"], [type="checkbox"]), textarea, select',function(a){g&&g.trigger("fakeblur"),g=null}),c.find('input[type="radio"]:checked, input[type="checkbox"]:checked').parent("label").attr("data-checked","true"),c.on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(a){f(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")})},d.prototype.destroy=function(a){},f.fn[h]=function(a,b){var c=f(this),e=c.data(h);return a=a||{},e||"object"!=typeof a?e&&"string"==typeof a&&e[a](this):c.data(h,e=new d(c[0],a,b)),this},c.exports={name:h,selector:"form"}})},{"../../js/Widget":16,"../../js/plugins":20,jquery:9}],33:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,f.call(this,a,b),c&&(c.stopPropagation(),c.preventDefault()),this.$picker=null,this.noneSelectedText=b.noneSelectedText||"none selected",this.lengthmax=b.maxlength||15,this.multiple="undefined"!=typeof e(a).attr("multiple")&&e(a).attr("multiple")!==!1,this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="desktopSelectpicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this._getTemplate(),b=e(this.element);b.css("display","none"),a=this._createLi(a),this.$picker=a.insertAfter(b),this.$picker.find("> a").addClass(this.selectClass),this._clickListener(),this._focusListener()},d.prototype._getTemplate=function(){var a='<div class="btn-group bootstrap-select widget clearfix"><button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown"><span class="selected">__SELECTED_OPTIONS</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">__ADD_LI</ul></div>';return a},d.prototype._createLi=function(a){var b,c,d=[],f="",g=this.multiple?'type="checkbox"':'type="radio" name="'+1e5*Math.random()+'"',h=this;if(e(this.element).find("option").each(function(){d.push({label:e(this).text(),selected:e(this).is(":selected"),value:e(this).attr("value")})}),d.length>0){a=a.replace("__SELECTED_OPTIONS",this._createSelectedStr());for(var i=0;i<d.length;i++)d[i].value&&(b=d[i].selected?' checked="checked"':"",c=d[i].selected&&!h.multiple?'class="active"':"",f+="<li "+c+'><a class="option-wrapper" tabindex="-1" href="#"><label><input class="ignore" '+g+b+'value="'+d[i].value+'" /><span class="option-label">'+d[i].label+"</span></label></a></li>")}return a=a.replace("__ADD_LI",f),e(a)},d.prototype._createSelectedStr=function(){var a,b=[],c=e(this.element);return c.find("option:selected").each(function(){e(this).attr("value").length>0&&b.push(e(this).text())}),0===b.length?this.noneSelectedText:(a=b.join(", "),a.length>this.lengthmax?b.length+" selected":a)},d.prototype._clickListener=function(){var a=this;this.$picker.on("click","li:not(.disabled)",function(b){b.preventDefault();var c=e(this),d=c.find("input"),f=e(a.element),g=f.find('option[value="'+d.val()+'"]'),h=g.is(":selected");a.multiple?b.stopPropagation():(a.$picker.find("li").removeClass("active"),g.siblings("option").prop("selected",!1),a.$picker.find("input").prop("checked",!1)),h?(c.removeClass("active"),d.prop("checked",!1),g.prop("selected",!1)):(a.multiple||c.addClass("active"),d.prop("checked",!0),g.prop("selected",!0)),a.$picker.find(".selected").html(a._createSelectedStr()),f.trigger("change")})},d.prototype._focusListener=function(){var a=this;this.$picker.on("shown.bs.dropdown",function(){return e(a.element).trigger("fakefocus"),!0}).on("hidden.bs.dropdown",function(){return e(a.element).trigger("fakeblur"),!0})},d.prototype.disable=function(){this.$picker.find("li").addClass("disabled")},d.prototype.enable=function(){this.$picker.find("li").removeClass("disabled")},d.prototype.update=function(){this.$picker.remove(),this._init()},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);f||"object"!=typeof a||a.touch?f&&"string"==typeof a&&f[a](this):c.data(g,f=new d(this,a,b))})},+function(a){function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/^(38|40|27)$/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27===b.keyCode)return 27===b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38===b.keyCode&&j>0&&j--,40===b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),c.exports={name:g,selector:"select:not(#form-languages)"}})},{"../../js/Widget":16,jquery:9}],34:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){c.exports={name:"likertitem"}})},{}],35:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b,c){this.namespace=g,f.call(this,a,b),this._init()}var e=a("jquery"),f=a("../../js/Widget"),g="mobileSelectpicker";d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=this;e(this.element).on("change."+g,function(){return a._showSelectedValues(),!0}),this._showSelectedValues()},d.prototype._showSelectedValues=function(){var a,b=[],c='<span class="widget mobileselect"></span>',d=e(this.element),f=d.next(".widget").length>0?d.next(".widget"):e(c).insertAfter(d),g=e.isArray(d.val())?d.val():[d.val()];for(a=0;a<g.length;a++)b.push(e(this).find('option[value="'+g[a]+'"]').text());f.text(g.join(", "))},e.fn[g]=function(a,b){return a=a||{},this.each(function(){var c=e(this),f=c.data(g);!f&&"object"==typeof a&&a.touch&&c.data(g,f=new d(this,a,b)),f&&"string"==typeof a&&f[a](this)})},c.exports={name:g,selector:"select[multiple]"}})},{"../../js/Widget":16,jquery:9}],36:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){c.exports={name:"tablewidget"}})},{}],37:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){"use strict";function d(a,b){this.namespace=h,e.call(this,a,b),this._init()}var e=a("../../js/Widget"),f=a("../../js/support"),g=a("jquery");a("bootstrap-timepicker/js/bootstrap-timepicker");var h="timepickerExtended";d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype._init=function(){var a=g(this.element),b=g(this.element).val(),c=g('<div class="widget bootstrap-timepicker"><input class="ignore timepicker-default input-small" readonly="readonly" type="text" value="'+b+'" placeholder="hh:mm" /><button class="btn-icon-only btn-reset" type="button"><i class="icon icon-refresh"> </i></button></div>'),d=c.find(".btn-reset"),e=c.find("input");a.next(".widget.bootstrap-timepicker-component").remove(),a.hide().after(c),e.timepicker({defaultTime:b.length>0?b:"current",showMeridian:!1}).val(b).closest(".widget").find("input").addClass("ignore"),e.on("change",function(){var b=g(this),c=/^[0-9]:/.test(b.val())?"0"+b.val():b.val();return c=/^[0-9]{2}:$/.test(c)?c+"00":c,a.val(c).trigger("change").blur(),!1}),d.on("click",function(){e.val("").trigger("change")}),e.on("focus blur",function(b){a.trigger("fake"+b.type)})},g.fn[h]=function(a,b){return a=a||{},this.each(function(){var c=g(this),e=c.data(h);e||"object"!=typeof a||a.touch&&f.inputtypes.time?e&&"string"==typeof a&&e[a](this):c.data(h,e=new d(this,a,b))})},c.exports={name:h,selector:'input[type="time"]:not([readonly])'}})},{"../../js/Widget":16,"../../js/support":21,"bootstrap-timepicker/js/bootstrap-timepicker":4,jquery:9}],"extended-xpath":[function(a,b,d){var e=function(a,b){var d=b.func||{},e=b.process||{},f=function(a){return a.resultType===XPathResult.NUMBER_TYPE?{t:"num",v:a.numberValue}:a.resultType===XPathResult.BOOLEAN_TYPE?{t:"bool",v:a.booleanValue}:{t:"str",v:a.stringValue}},g=function(a){if(e.toExternalResult){var b=e.toExternalResult(a);if(b)return b}return"num"===a.t?{resultType:XPathResult.NUMBER_TYPE,numberValue:a.v,stringValue:a.v.toString()}:"bool"===a.t?{resultType:XPathResult.BOOLEAN_TYPE,booleanValue:a.v,stringValue:a.v.toString()}:{resultType:XPathResult.STRING_TYPE,stringValue:a.v.toString()}},h=function(a,b){return d.hasOwnProperty(a)?j(a,b):k(a,b)},j=function(a,b){var c,e,f=[];for(e=0;e<b.length;++e)f.push(b[e].v);return c=d[a].apply(null,f)},k=function(b,c){var d,e,g,h="";for(g=0;g<c.length;++g)d=c[g],"num"!==d.t&&"bool"!==d.t&&(e=-1===d.v.indexOf('"')?'"':"'",h+=e),h+=d.v,"bool"===d.t&&(h+="()"),"num"!==d.t&&"bool"!==d.t&&(h+=e),g<c.length-1&&(h+=", ");return f(a(b+"("+h+")"))},l=function(a){if(e.typefor){var b=e.typefor(a);if(b)return b}return"boolean"==typeof a?"bool":"number"==typeof a?"number":"str"};this.evaluate=function(b){var d,j=[{t:"root",tokens:[]}],k=function(){return j.slice(-1)[0]},m=function(a){throw new Error((a||"")+" [stack="+JSON.stringify(j)+"] [cur="+JSON.stringify(d)+"]")},n=function(){m('Character at unexpected location: "'+c+'"')},o=function(){d={t:"?",v:""}},p=function(){var a,b,c,d,f,g;c=k().tokens,b=c.length,b>=3&&(d=c[b-3],g=c[b-2],f=c[b-1],e.handleInfix&&(a=e.handleInfix(d,g,f),a&&"continue"===a.t&&(d=a.lhs,g=a.op,f=a.rhs,a=null)),"undefined"!=typeof a&&null!==a||("+"===g.t?a=d.v+f.v:"-"===g.t?a=d.v-f.v:"*"===g.t?a=d.v*f.v:"/"===g.t?a=d.v/f.v:"%"===g.t?a=d.v%f.v:"="===g.t?a=d.v===f.v:"<"===g.t?a=d.v<f.v:">"===g.t?a=d.v>f.v:"<="===g.t?a=d.v<=f.v:">="===g.t?a=d.v>=f.v:"!="===g.t?a=d.v!=f.v:"&"===g.t?a=d.v&&f.v:"|"===g.t&&(a=d.v||f.v)),"undefined"!=typeof a&&null!==a&&(c=c.slice(0,-3),c.push({t:l(a),v:a}),k().tokens=c))},q=function(){var b,c=d.v.trim();b=/^-?[0-9]+(\.[0-9]+)?$/.test(c)?{t:"num",v:parseFloat(c)}:f(a(d.v)),k().tokens.push(b),o(),p()},r=function(){return i>0?b.charAt(i-1):void 0},s=function(){return i<b.length-1?b.charAt(i+1):void 0};for(o(),i=0;i<b.length;++i)if(c=b.charAt(i),"str"===d.t)c===d.quote?(k().tokens.push(d),p(),o()):d.v+=c;else switch(c){case"'":case'"':"?"===d.t&&""===d.v?d={t:"str",quote:c,v:""}:m("Not sure how to handle: "+c);break;case"(":"?"===d.t?(d.t="fn",d.tokens=[],j.push(d),o()):n();break;case")":"?"===d.t?(""!==d.v&&q(),d=j.pop(),"fn"!==d.t&&m(),d.v?k().tokens.push(h(d.v,d.tokens)):(1!==d.tokens.length&&m(),k().tokens.push(d.tokens[0])),p(),o()):n();break;case",":"?"===d.t?(""!==d.v&&q(),"fn"!==k().t&&m()):n();break;case"-":if(/[0-9]/.test(s())||" "!==s()&&" "!==r()){d.v+=c;break}case"=":if("="===c&&("<"===d.v||"&lt;"===d.v||">"===d.v||"&gt;"===d.v||"!"===d.v)){d.v+=c;break}case">":case"<":if(("<"===c||">"===c)&&"="===s()){d.v+=c;break}case"+":case"*":"?"===d.t?(""!==d.v&&q(),k().tokens.push({t:c})):n();break;case" ":if("?"===d.t){""!==d.v&&("mod"===d.v?(k().tokens.push({t:"%"}),o()):"div"===d.v?(k().tokens.push({t:"/"}),o()):"and"===d.v?(k().tokens.push({t:"&"}),o()):"or"===d.v?(k().tokens.push({t:"|"}),o()):"&lt;"===d.v?(k().tokens.push({t:"<"}),o()):"&gt;"===d.v?(k().tokens.push({t:">"}),o()):"<="===d.v||"&lt;="===d.v?(k().tokens.push({t:"<="}),o()):">="===d.v||"&gt;="===d.v?(k().tokens.push({t:">="}),o()):"!="===d.v?(k().tokens.push({t:"!="}),o()):q());break}default:d.v+=c}return"?"===d.t&&""!==d.v&&q(),("?"!==d.t||""!==d.v||d.tokens&&current.tokens.length)&&m("Current item not evaluated!"),j.length>1&&m("Stuff left on stack."),"root"!==j[0].t&&m("Weird stuff on stack."),0===j[0].tokens.length&&m("No tokens."),j[0].tokens.length>1&&m("Too many tokens."),g(j[0].tokens[0])}};"function"==typeof define?define(function(){return e}):"object"==typeof b&&"object"==typeof b.exports&&(b.exports=e)},{}],"openrosa-xpath-extensions":[function(a,b,c){var d=function(){var a,b=864e5,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=/^(-?[0-9]+)(\.[0-9]+)?$/,f=/^\d\d\d\d-\d\d-\d\d(?:T\d\d:\d\d:\d\d(?:Z|[+-]\d\d:\d\d))?$/,g={"boolean":function(a){return{t:"bool",v:a}},number:function(a){return{t:"num",v:a}},string:function(a){return{t:"str",v:a}},date:function(a){if(!(a instanceof Date))throw new Error("Cannot create date from "+a+" ("+typeof a+")");return{t:"date",v:a}}},h=function(a,b){for(b=b||2,a=a.toString();a.length<b;)a="0"+a;return a},i=function(a){return Math.round("num"===a.t?a.v:parseFloat(a.v))},j=function(a){return a.getFullYear()+"-"+h(a.getMonth()+1)+"-"+h(a.getDate())},k=function(a){return 0>a?-Math.round(-a):Math.round(a)},l=function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)},m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l)},n=function(a){if(e.test(a)){var b=new Date(0);return b.setUTCDate(1+parseInt(a,10)),g.date(b)}return f.test(a)?g.date(new Date(a.substring(0,10))):g.string("Invalid Date")},o=function(a,b){if(a=Date.parse(a),isNaN(a))return"";a=new Date(a);var e,f,g="",i={year:1900+a.getYear(),month:1+a.getMonth(),day:a.getDate(),hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),secTicks:a.getTime(),dow:a.getDay()};for(f=0;f<b.length;++f)if(e=b.charAt(f),"%"===e){if(++f>=b.length)throw new Error("date format string ends with %");if(e=b.charAt(f),"%"===e)g+="%";else if("Y"===e)g+=h(i.year,4);else if("y"===e)g+=h(i.year,4).substring(2);else if("m"===e)g+=h(i.month,2);else if("n"===e)g+=i.month;else if("b"===e)g+=c[i.month-1];else if("d"===e)g+=h(i.day,2);else if("e"===e)g+=i.day;else if("H"===e)g+=h(i.hour,2);else if("h"===e)g+=i.hour;else if("M"===e)g+=h(i.minute,2);else if("S"===e)g+=h(i.second,2);else if("3"===e)g+=h(i.secTicks,3);else{if("a"!==e)throw"Z"===e||"A"===e||"B"===e?new Error("unsupported escape in date format string [%"+e+"]"):new Error("unrecognized escape in date format string [%"+e+"]");g+=d[i.dow-1]}}else g+=e;return g};return a={"boolean-from-string":function(a){return g["boolean"]("1"===a||"true"===a)},coalesce:function(a,b){return g.string(a||b)},date:n,"decimal-date":function(a){return g.number(Date.parse(a)/b)},"false":function(){return g["boolean"](!1)},"format-date":function(a,b){return g.string(o(a,b))},"if":function(a,b,c){return g.string(a?b:c)},"int":function(a){return g.number(parseInt(a,10))},now:function(){return g.number(Date.now())},pow:function(a,b){return g.number(Math.pow(a,b))},random:function(){return g.number(Math.random())},regex:function(a,b){return g["boolean"](new RegExp(b).test(a))},round:function(a,b){if(a=parseFloat(a),b=b?parseInt(b):0,!b)return g.number(k(a));var c=Math.pow(10,Math.abs(b));return b>0?g.number(k(a*c)/c):g.number(c*k(a/c))},selected:function(a,b){return g["boolean"](-1!==a.split(" ").indexOf(b))},substr:function(a,b,c){return g.string(a.slice(b,c))},today:function(){return g.date(new Date)},"true":function(){return g["boolean"](!0)},uuid:function(){return g.string(m())}},a["date-time"]=a.date,a["decimal-date-time"]=a["decimal-date"],a["format-date-time"]=a["format-date"],{func:a,process:{toExternalResult:function(a){return"date"===a.t?{resultType:XPathResult.STRING_TYPE,stringValue:j(a.v)}:void 0},typefor:function(a){return a instanceof Date?"date":void 0},handleInfix:function(a,b,c){if("date"===a.t||"date"===c.t){if("="===b.t||"<"===b.t||">"===b.t||"<="===b.t||">="===b.t||"!="===b.t){if("str"===a.t&&(a=n(a.v)),"str"===c.t&&(c=n(c.v)),"date"!==a.t||"date"!==c.t)return"!="===b.t;a={t:"num",v:a.v.getTime()},c={t:"num",v:c.v.getTime()}}else if("+"===b.t||"-"===b.t){"date"===a.t&&"date"===c.t&&err();var d="date"===a.t?a.v:c.v,e=i("date"!==a.t?a:c),f=new Date(d.getTime());return"-"===b.t&&(e=-e),f.setUTCDate(d.getDate()+e),f}return{t:"continue",lhs:a,op:b,rhs:c}}}}}}();"function"==typeof define?define(function(){return d}):"object"==typeof b&&"object"==typeof b.exports&&(b.exports=d)},{}],"text!enketo-config":[function(a,b,c){b.exports={maps:[{tiles:["http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"],name:"streets",attribution:'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'},{tiles:"GOOGLE_SATELLITE",name:"satellite"}],googleApiKey:""}},{}],widgets:[function(a,b,c){if("object"==typeof c&&"string"!=typeof c.nodeName&&"function"!=typeof d)var d=function(d){d(a,c,b)};d(function(a,b,c){var d=[a("../widget/note/notewidget"),a("../widget/select-desktop/selectpicker"),a("../widget/select-mobile/selectpicker"),a("../widget/geo/geopicker"),a("../widget/table/tablewidget"),a("../widget/radio/radiopicker"),a("../widget/date/datepicker-extended"),a("../widget/time/timepicker-extended"),a("../widget/datetime/datetimepicker-extended"),a("../widget/mediagrid/mediagridpicker"),a("../widget/file/filepicker"),a("../widget/select-likert/likertitem"),a("../widget/distress/distresspicker"),a("../widget/horizontal-choices/horizontalchoices")];c.exports=d})},{"../widget/date/datepicker-extended":24,"../widget/datetime/datetimepicker-extended":25,"../widget/distress/distresspicker":26,"../widget/file/filepicker":27,"../widget/geo/geopicker":28,"../widget/horizontal-choices/horizontalchoices":29,"../widget/mediagrid/mediagridpicker":30,"../widget/note/notewidget":31,"../widget/radio/radiopicker":32,"../widget/select-desktop/selectpicker":33,"../widget/select-likert/likertitem":34,"../widget/select-mobile/selectpicker":35,"../widget/table/tablewidget":36,"../widget/time/timepicker-extended":37}]},{},[1]);